(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[5482],{80341:function(){},25482:function(oe,w,r){"use strict";r.r(w);var u=r(11849),k=r(83279),_=r(54029),z=r(79166),b=r(39428),D=r(3182),t=r(94657),f=r(1615),I=r(27484),K=r.n(I),x=r(67294),F=r(51005),$=r(42285),L=r(3980),Y=r(94975),c=r(85893),G=function(){var te,le=(0,x.useState)([]),re=(0,t.Z)(le,2),J=re[0],ue=re[1],o=(0,x.useState)(!0),e=(0,t.Z)(o,2),m=e[0],n=e[1],a=(0,x.useState)([]),i=(0,t.Z)(a,2),y=i[0],v=i[1],Z=(0,x.useState)(),M=(0,t.Z)(Z,2),N=M[0],S=M[1],U=(0,Y.Z)((0,D.Z)((0,b.Z)().mark(function s(){var l,d;return(0,b.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,L.hi.loadDictItems({dictCode:"repoType"});case 2:return d=g.sent,S((l=d.list)===null||l===void 0?void 0:l[0].itemName),g.abrupt("return",d.list);case 5:case"end":return g.stop()}},s)}))),p=(0,$.YB)();(0,x.useEffect)(function(){N?L.hi.loadRepo({pageSize:100,category:N}).then(function(s){v(s.list||[])}):v([])},[N]);var C=(0,x.useRef)({current:1,pageSize:10}),O=function(l){return l.tempSave===0?(0,c.jsx)(z.Z,{status:"processing",text:p.formatMessage({id:"pages.exercise.status.inProgress",defaultMessage:"\u8FDB\u884C\u4E2D"})}):(0,c.jsx)(z.Z,{status:"success",text:p.formatMessage({id:"pages.exercise.status.completed",defaultMessage:"\u5DF2\u5B8C\u6210"})})};function P(s){return h.apply(this,arguments)}function h(){return h=(0,D.Z)((0,b.Z)().mark(function s(l){var d,j,g,H,E,V,Q;return(0,b.Z)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return m&&!l&&J.length>0&&(C.current.current=C.current.current+1),d=(0,u.Z)((0,u.Z)({},C.current),{},{current:l||C.current.current}),B.next=4,L.hi.listExercise(d);case 4:return j=B.sent,g=C.current,H=g.pageSize,E=H===void 0?10:H,V=g.total,Q=V===void 0?j.total||0:V,l||(C.current=(0,u.Z)((0,u.Z)({},C.current),{},{total:j.total}),n(Q/E>C.current.current)),B.abrupt("return",j.list);case 8:case"end":return B.stop()}},s)})),h.apply(this,arguments)}var T=function(){var s=(0,D.Z)((0,b.Z)().mark(function l(){var d;return(0,b.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,P();case 2:d=g.sent,ue([].concat((0,k.Z)(J),(0,k.Z)(d)));case 4:case"end":return g.stop()}},l)}));return function(){return s.apply(this,arguments)}}(),R=function(l){var d=[];return d.push({key:"start",text:l.tempSave===0?p.formatMessage({id:"pages.exercise.action.resume",defaultMessage:"\u7EE7\u7EED\u7B54\u9898"}):p.formatMessage({id:"pages.exercise.action.viewResult",defaultMessage:"\u67E5\u770B\u7ED3\u679C"}),primary:!0,onClick:function(){$.m8.push("/t/".concat(l.repoId,"/").concat(l.answerId))}}),d.push({key:"cancel",text:p.formatMessage({id:"pages.exercise.action.cancel",defaultMessage:"\u53D6\u6D88"})}),d};return(0,c.jsxs)("div",{children:[(0,c.jsxs)(f.Zb,{style:{margin:8},bodyStyle:{padding:0},children:[(0,c.jsx)(f.mQ,{activeKey:N,onChange:function(l){return S(l)},children:(te=U.value)===null||te===void 0?void 0:te.map(function(s){var l=s.itemName;return(0,c.jsx)(f.mQ.Tab,{title:l},l)})}),(0,c.jsxs)(f.rj,{columns:2,gap:8,style:{paddingBlock:8},children:[y.map(function(s){return(0,c.jsx)(f.Zb,{extra:(0,c.jsx)(F.Z,{}),style:{background:"#f6f6f8"},title:(0,c.jsxs)("div",{style:{fontWeight:"normal",padding:8},children:[s.name,(0,c.jsx)("div",{style:{color:"#a6a6a8"},children:s.description})]}),onClick:function(){$.m8.push("/exercise/".concat(s.id),{state:{name:s.name}})}},s.id)}),(0,c.jsx)(f.rj.Item,{span:2,children:y.length===0&&(0,c.jsx)(f.HY,{description:p.formatMessage({id:"pages.exercise.empty",defaultMessage:"\u6682\u65E0\u6570\u636E"})})})]})]}),(0,c.jsxs)(f.Zb,{title:p.formatMessage({id:"pages.exercise.mobile.record",defaultMessage:"\u7EC3\u4E60\u8BB0\u5F55"}),style:{margin:8},bodyStyle:{padding:0},children:[(0,c.jsx)(f.aV,{children:J.map(function(s,l){return(0,c.jsxs)(f.aV.Item,{onClick:function(){f.u_.show({content:s.projectName,closeOnAction:!0,actions:R(s)})},extra:O(s),description:s.createTime?K()(s.examStartTime).format("YYYY-MM-DD HH:mm"):void 0,children:[s.projectName,(0,c.jsx)(f.ko,{percent:s.percent,style:{"--fill-color":s.tempSave===0?"var(--adm-color-primary)":"var(--adm-color-success)"}})]},l)})}),(0,c.jsx)(f.v_,{loadMore:T,hasMore:m})]})]})};w.default=G},79166:function(oe,w,r){"use strict";r.d(w,{Z:function(){return ue}});var u=r(96156),k=r(90484),_=r(22122),z=r(94184),b=r.n(z),D=r(5461),t=r(67294),f=r(53124),I=r(96159),K=r(98787);function x(o){return K.Y.includes(o)}var F=function(e){var m=e.className,n=e.prefixCls,a=e.style,i=e.color,y=e.children,v=e.text,Z=e.placement,M=Z===void 0?"end":Z,N=t.useContext(f.E_),S=N.getPrefixCls,U=N.direction,p=S("ribbon",n),C=x(i),O=b()(p,"".concat(p,"-placement-").concat(M),(0,u.Z)((0,u.Z)({},"".concat(p,"-rtl"),U==="rtl"),"".concat(p,"-color-").concat(i),C),m),P={},h={};return i&&!C&&(P.background=i,h.color=i),t.createElement("div",{className:"".concat(p,"-wrapper")},y,t.createElement("div",{className:O,style:(0,_.Z)((0,_.Z)({},P),a)},t.createElement("span",{className:"".concat(p,"-text")},v),t.createElement("div",{className:"".concat(p,"-corner"),style:h})))},$=F,L=r(28481);function Y(o){var e=o.prefixCls,m=o.value,n=o.current,a=o.offset,i=a===void 0?0:a,y;return i&&(y={position:"absolute",top:"".concat(i,"00%"),left:0}),t.createElement("span",{style:y,className:b()("".concat(e,"-only-unit"),{current:n})},m)}function c(o,e,m){for(var n=o,a=0;(n+10)%10!==e;)n+=m,a+=m;return a}function G(o){var e=o.prefixCls,m=o.count,n=o.value,a=Number(n),i=Math.abs(m),y=t.useState(a),v=(0,L.Z)(y,2),Z=v[0],M=v[1],N=t.useState(i),S=(0,L.Z)(N,2),U=S[0],p=S[1],C=function(){M(a),p(i)};t.useEffect(function(){var d=setTimeout(function(){C()},1e3);return function(){clearTimeout(d)}},[a]);var O,P;if(Z===a||Number.isNaN(a)||Number.isNaN(Z))O=[t.createElement(Y,(0,_.Z)({},o,{key:a,current:!0}))],P={transition:"none"};else{O=[];for(var h=a+10,T=[],R=a;R<=h;R+=1)T.push(R);var s=T.findIndex(function(d){return d%10===Z});O=T.map(function(d,j){var g=d%10;return t.createElement(Y,(0,_.Z)({},o,{key:d,value:g,offset:j-s,current:j===s}))});var l=U<i?1:-1;P={transform:"translateY(".concat(-c(Z,a,l),"00%)")}}return t.createElement("span",{className:"".concat(e,"-only"),style:P,onTransitionEnd:C},O)}var A=function(o,e){var m={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(m[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(o);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(o,n[a])&&(m[n[a]]=o[n[a]]);return m},te=function(e){var m=e.prefixCls,n=e.count,a=e.className,i=e.motionClassName,y=e.style,v=e.title,Z=e.show,M=e.component,N=M===void 0?"sup":M,S=e.children,U=A(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),p=t.useContext(f.E_),C=p.getPrefixCls,O=C("scroll-number",m),P=(0,_.Z)((0,_.Z)({},U),{"data-show":Z,style:y,className:b()(O,a,i),title:v}),h=n;if(n&&Number(n)%1==0){var T=String(n).split("");h=T.map(function(R,s){return t.createElement(G,{prefixCls:O,count:Number(n),value:R,key:T.length-s})})}return y&&y.borderColor&&(P.style=(0,_.Z)((0,_.Z)({},y),{boxShadow:"0 0 0 1px ".concat(y.borderColor," inset")})),S?(0,I.Tm)(S,function(R){return{className:b()("".concat(O,"-custom-component"),R==null?void 0:R.className,i)}}):t.createElement(N,P,h)},le=te,re=function(o,e){var m={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&e.indexOf(n)<0&&(m[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(o);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(o,n[a])&&(m[n[a]]=o[n[a]]);return m},J=function(e){var m=e.prefixCls,n=e.scrollNumberPrefixCls,a=e.children,i=e.status,y=e.text,v=e.color,Z=e.count,M=Z===void 0?null:Z,N=e.overflowCount,S=N===void 0?99:N,U=e.dot,p=U===void 0?!1:U,C=e.size,O=C===void 0?"default":C,P=e.title,h=e.offset,T=e.style,R=e.className,s=e.showZero,l=s===void 0?!1:s,d=re(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),j=t.useContext(f.E_),g=j.getPrefixCls,H=j.direction,E=g("badge",m),V=M>S?"".concat(S,"+"):M,Q=V==="0"||V===0,de=M===null||Q&&!l,B=(i!=null||v!=null)&&de,ne=p&&!Q,X=ne?"":V,q=(0,t.useMemo)(function(){var W=X==null||X==="";return(W||Q&&!l)&&!ne},[X,Q,l,ne]),fe=(0,t.useRef)(M);q||(fe.current=M);var ee=fe.current,me=(0,t.useRef)(X);q||(me.current=X);var ce=me.current,ve=(0,t.useRef)(ne);q||(ve.current=ne);var ae=(0,t.useMemo)(function(){if(!h)return(0,_.Z)({},T);var W={marginTop:h[1]};return H==="rtl"?W.left=parseInt(h[0],10):W.right=-parseInt(h[0],10),(0,_.Z)((0,_.Z)({},W),T)},[H,h,T]),ge=P!=null?P:typeof ee=="string"||typeof ee=="number"?ee:void 0,ye=q||!y?null:t.createElement("span",{className:"".concat(E,"-status-text")},y),Ce=!ee||(0,k.Z)(ee)!=="object"?void 0:(0,I.Tm)(ee,function(W){return{style:(0,_.Z)((0,_.Z)({},ae),W.style)}}),Ee=b()((0,u.Z)((0,u.Z)((0,u.Z)({},"".concat(E,"-status-dot"),B),"".concat(E,"-status-").concat(i),!!i),"".concat(E,"-status-").concat(v),x(v))),_e={};v&&!x(v)&&(_e.background=v);var pe=b()(E,(0,u.Z)((0,u.Z)((0,u.Z)({},"".concat(E,"-status"),B),"".concat(E,"-not-a-wrapper"),!a),"".concat(E,"-rtl"),H==="rtl"),R);if(!a&&B){var he=ae.color;return t.createElement("span",(0,_.Z)({},d,{className:pe,style:ae}),t.createElement("span",{className:Ee,style:_e}),y&&t.createElement("span",{style:{color:he},className:"".concat(E,"-status-text")},y))}return t.createElement("span",(0,_.Z)({},d,{className:pe}),a,t.createElement(D.default,{visible:!q,motionName:"".concat(E,"-zoom"),motionAppear:!1,motionDeadline:1e3},function(W){var be=W.className,xe=g("scroll-number",n),ie=ve.current,Me=b()((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},"".concat(E,"-dot"),ie),"".concat(E,"-count"),!ie),"".concat(E,"-count-sm"),O==="small"),"".concat(E,"-multiple-words"),!ie&&ce&&ce.toString().length>1),"".concat(E,"-status-").concat(i),!!i),"".concat(E,"-status-").concat(v),x(v))),se=(0,_.Z)({},ae);return v&&!x(v)&&(se=se||{},se.background=v),t.createElement(le,{prefixCls:xe,show:!q,motionClassName:be,className:Me,count:ce,title:ge,style:se,key:"scrollNumber"},Ce)}),ye)};J.Ribbon=$;var ue=J},54029:function(oe,w,r){"use strict";var u=r(38663),k=r.n(u),_=r(80341),z=r.n(_)},94975:function(oe,w,r){"use strict";r.d(w,{Z:function(){return b}});var u=r(67294),k=r(65353);function _(){var D=(0,u.useRef)(!1),t=(0,u.useCallback)(function(){return D.current},[]);return(0,u.useEffect)(function(){return D.current=!0,function(){D.current=!1}},[]),t}function z(D,t,f){t===void 0&&(t=[]),f===void 0&&(f={loading:!1});var I=(0,u.useRef)(0),K=_(),x=(0,u.useState)(f),F=x[0],$=x[1],L=(0,u.useCallback)(function(){for(var Y=[],c=0;c<arguments.length;c++)Y[c]=arguments[c];var G=++I.current;return F.loading||$(function(A){return(0,k.pi)((0,k.pi)({},A),{loading:!0})}),D.apply(void 0,Y).then(function(A){return K()&&G===I.current&&$({value:A,loading:!1}),A},function(A){return K()&&G===I.current&&$({error:A,loading:!1}),A})},t);return[F,L]}function b(D,t){t===void 0&&(t=[]);var f=z(D,t,{loading:!0}),I=f[0],K=f[1];return(0,u.useEffect)(function(){K()},[K]),I}}}]);
