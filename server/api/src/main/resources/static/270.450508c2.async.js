(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[270],{38006:function(x){x.exports={linkGroup:"linkGroup___9Jgdb"}},9016:function(x){x.exports={activitiesList:"activitiesList___H8HBB",username:"username___2ciPn",event:"event___3yvwe",pageHeaderContent:"pageHeaderContent___PWSiu",avatar:"avatar___3ZBop",content:"content___1eLtZ",contentTitle:"contentTitle___Yu-cR",extraContent:"extraContent___3rMo7",statItem:"statItem___2hHyE",members:"members___1FE9G",member:"member___2ERhZ",projectList:"projectList___2xaJs",cardTitle:"cardTitle___Bli-X",projectGrid:"projectGrid___Bia9a",projectItemContent:"projectItemContent___3_r0i",datetime:"datetime___2UCoC",activeCard:"activeCard___10qJg",container:"container___1D3Yy"}},60438:function(x,p,t){"use strict";t.r(p),t.d(p,{default:function(){return te}});var re=t(13062),G=t(71230),ne=t(58024),j=t(91894),oe=t(89032),T=t(15746),ie=t(54421),C=t(38272),B=t(94657),de=t(95300),I=t(7277),le=t(94233),S=t(51890),me=t(71748),P=t(43574),H=t(67294),Z=t(27400),L=t(36450),D=t(9761),z=t(30381),U=t.n(z),f=t(42285),R=t(73727),k=t(38006),F=t.n(k),e=t(85893),E=function(i){var s=i.links,a=i.linkElement,r=i.onAdd;return(0,e.jsx)("div",{className:F().linkGroup,children:s.map(function(l){return(0,H.createElement)(a,{key:"linkGroup-item-".concat(l.id||l.title),to:l.href,href:l.href},l.title)})})};E.defaultProps={links:[],onAdd:function(){},linkElement:"a"};var W=E,J=t(9016),d=t.n(J),ue=t(18106),O=t(72488),Y=t(39428),$=t(3182),ge=t(402),K=t(56118),b=t(3980),V=t(16894),X=t(27484),y=t.n(X),N=K.Z.Text,M=function(i){var s=i.mode,a=i.type,r=(0,f.YB)(),l=[{title:s==="exam"?r.formatMessage({id:"pages.home.todo.table.title.examName",defaultMessage:"\u8003\u8BD5\u540D\u79F0"}):r.formatMessage({id:"pages.home.todo.table.title.surveyName",defaultMessage:"\u95EE\u5377\u540D\u79F0"}),dataIndex:"name"},{title:r.formatMessage({id:"pages.home.todo.table.title.startTime",defaultMessage:"\u5F00\u59CB\u65F6\u95F4"}),dataIndex:"examStartTime",hideInTable:a==="history",renderText:function(m){return m?y()(m).format("YYYY-MM-DD HH:mm"):"-"}},{title:r.formatMessage({id:"pages.home.todo.table.title.status",defaultMessage:"\u5B8C\u6210\u72B6\u6001"}),dataIndex:"status",valueType:"select",hideInTable:a==="history",valueEnum:{0:{text:r.formatMessage({id:"pages.home.todo.table.status.notStarted",defaultMessage:"\u672A\u5F00\u59CB"}),status:"Default"},1:{text:r.formatMessage({id:"pages.home.todo.table.status.processing",defaultMessage:"\u8FDB\u884C\u4E2D"}),status:"Processing"},2:{text:r.formatMessage({id:"pages.home.todo.table.status.finished",defaultMessage:"\u5DF2\u5B8C\u6210"}),status:"Success"}}},{title:r.formatMessage({id:"pages.home.todo.table.title.answerTime",defaultMessage:"\u6211\u7684\u7B54\u9898\u65F6\u95F4"}),dataIndex:"answerTime",hideInTable:a!=="history",renderText:function(m,o){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{fontSize:12},children:y()(o.startTime).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:y()(o.endTime).format("YYYY-MM-DD HH:mm:ss")})]})}},{title:r.formatMessage({id:"pages.home.todo.table.title.duration",defaultMessage:"\u6211\u7684\u7B54\u9898\u7528\u65F6"}),dataIndex:"totalTime",hideInTable:a!=="history",renderText:function(m,o){if(o.endTime&&o.startTime)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(N,{strong:!0,style:{fontSize:18,marginRight:5},children:Math.floor((o.endTime-o.startTime)/6e4)}),(0,e.jsx)("span",{style:{fontSize:12},children:r.formatMessage({id:"pages.home.todo.table.duration.unit",defaultMessage:"\u5206\u949F"})})]})}},{title:r.formatMessage({id:"pages.home.todo.table.title.score",defaultMessage:"\u6211\u7684\u5F97\u5206"}),dataIndex:"examScore",hideInTable:!(s==="exam"&&a==="history"),renderText:function(m){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(N,{type:"danger",strong:!0,style:{fontSize:18,marginRight:5},children:m}),(0,e.jsx)("span",{style:{fontSize:12},children:r.formatMessage({id:"pages.home.todo.table.score.unit",defaultMessage:"\u5206"})})]})}},{title:r.formatMessage({id:"pages.home.todo.table.title.actions",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"operate",renderText:function(m,o){return o.answerId&&s==="exam"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(o.projectId,"/exam-result/").concat(o.answerId))},children:r.formatMessage({id:"pages.home.todo.table.action.viewResult",defaultMessage:"\u67E5\u770B\u7ED3\u679C"})}):o.answerId&&s==="survey"?(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(o.projectId,"/").concat(o.answerId,"?pattern=readPretty"))},children:r.formatMessage({id:"pages.home.todo.table.action.viewAnswer",defaultMessage:"\u67E5\u770B\u7B54\u6848"})}):(0,e.jsx)("a",{onClick:function(){return window.open("/s/".concat(o.projectId))},children:r.formatMessage({id:"pages.home.todo.table.action.open",defaultMessage:"\u8DF3\u8F6C"})})}}];return(0,e.jsx)(V.ZP,{rowKey:"id",params:{type:s},request:function(){var g=(0,$.Z)((0,Y.Z)().mark(function m(o){return(0,Y.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",a==="todo"?b.hi.listUserTask(o):b.hi.listHistoryTask(o));case 1:case"end":return c.stop()}},m)}));return function(m){return g.apply(this,arguments)}}(),bordered:!0,columns:l,search:!1,toolbar:{}})};function Q(){var n=(0,f.YB)(),i=[{key:"exam",label:n.formatMessage({id:"pages.home.todo.tab.myExams",defaultMessage:"\u6211\u7684\u8003\u8BD5"}),children:(0,e.jsx)(M,{type:"todo",mode:"exam"})},{key:"survey",label:n.formatMessage({id:"pages.home.todo.tab.mySurveys",defaultMessage:"\u6211\u7684\u95EE\u5377"}),children:(0,e.jsx)(M,{type:"todo",mode:"survey"})},{key:"surveyHistory",label:n.formatMessage({id:"pages.home.todo.tab.surveyHistory",defaultMessage:"\u95EE\u5377\u8BB0\u5F55"}),children:(0,e.jsx)(M,{type:"history",mode:"survey"})},{key:"examHistory",label:n.formatMessage({id:"pages.home.todo.tab.examHistory",defaultMessage:"\u8003\u8BD5\u8BB0\u5F55"}),children:(0,e.jsx)(M,{type:"history",mode:"exam"})}];return(0,e.jsx)(j.Z,{style:{width:"100%",marginBottom:24},children:(0,e.jsx)(O.Z,{items:i})})}function w(n){var i=new Date,s=i.getHours();return s<6?n.formatMessage({id:"pages.home.greeting.dawn",defaultMessage:"\u51CC\u6668\u597D"}):s<9?n.formatMessage({id:"pages.home.greeting.morning",defaultMessage:"\u65E9\u4E0A\u597D"}):s<12?n.formatMessage({id:"pages.home.greeting.forenoon",defaultMessage:"\u4E0A\u5348\u597D"}):s<14?n.formatMessage({id:"pages.home.greeting.noon",defaultMessage:"\u4E2D\u5348\u597D"}):s<17?n.formatMessage({id:"pages.home.greeting.afternoon",defaultMessage:"\u4E0B\u5348\u597D"}):s<19?n.formatMessage({id:"pages.home.greeting.dusk",defaultMessage:"\u508D\u665A\u597D"}):s<22?n.formatMessage({id:"pages.home.greeting.night",defaultMessage:"\u665A\u4E0A\u597D"}):n.formatMessage({id:"pages.home.greeting.midnight",defaultMessage:"\u591C\u91CC\u597D"})}var q=function(i){var s=i.currentUser,a=(0,f.YB)(),r=s&&Object.keys(s).length;if(!r)return(0,e.jsx)(P.Z,{avatar:!0,paragraph:{rows:1},active:!0});var l=w(a);return(0,e.jsxs)("div",{className:d().pageHeaderContent,children:[(0,e.jsx)("div",{className:d().avatar,children:(0,e.jsx)(S.C,{size:"large",src:s.avatar})}),(0,e.jsxs)("div",{className:d().content,children:[(0,e.jsx)("div",{className:d().contentTitle,children:a.formatMessage({id:"pages.home.welcome.message",defaultMessage:"{greeting}\uFF0C{name}\uFF0C\u795D\u4F60\u5F00\u5FC3\u6BCF\u4E00\u5929\uFF01"},{greeting:l,name:s.name||""})}),(0,e.jsx)("div",{children:s.group})]}),(0,e.jsx)(_,{})]})},_=function(){var i=(0,f.YB)(),s=(0,Z.a)(),a=s.userOverview;return(0,e.jsxs)("div",{className:d().extraContent,children:[(0,e.jsx)("div",{className:d().statItem,children:(0,e.jsx)(I.Z,{title:i.formatMessage({id:"pages.home.statistic.survey",defaultMessage:"\u95EE\u5377\u6570"}),value:a==null?void 0:a.surveyCount})}),(0,e.jsx)("div",{className:d().statItem,children:(0,e.jsx)(I.Z,{title:i.formatMessage({id:"pages.home.statistic.exam",defaultMessage:"\u8003\u8BD5\u6570"}),value:a==null?void 0:a.examCount})})]})},ve=void 0==="1",ee=function(){var i=(0,Z.a)(),s=(0,f.YB)(),a=i.user,r=[{title:s.formatMessage({id:"pages.home.quickStart.createSurvey",defaultMessage:"\u521B\u5EFA\u95EE\u5377"}),href:"/survey/new?mode=survey"},{title:s.formatMessage({id:"pages.home.quickStart.createExam",defaultMessage:"\u521B\u5EFA\u8003\u8BD5"}),href:"/survey/new?mode=exam"}],l=(0,H.useState)(function(){return!localStorage.getItem("welcome")}),g=(0,B.Z)(l,2),m=g[0],o=g[1],v={},c=v.loading,A=v.data,fe=A===void 0?[]:A,ce=function(u){var se=u.template.split(/@\{([^{}]*)\}/gi).map(function(h){return u[h]?(0,e.jsx)("a",{href:u[h].link,children:u[h].name},u[h].name):h});return(0,e.jsx)(C.ZP.Item,{children:(0,e.jsx)(C.ZP.Item.Meta,{avatar:(0,e.jsx)(S.C,{src:u.user.avatar}),title:(0,e.jsxs)("span",{children:[(0,e.jsx)("a",{className:d().username,children:u.user.name}),"\xA0",(0,e.jsx)("span",{className:d().event,children:se})]}),description:(0,e.jsx)("span",{className:d().datetime,title:u.updatedAt,children:U()(u.updatedAt).fromNow()})})},u.id)};return(0,e.jsx)(L._z,{className:d().container,content:(0,e.jsx)(q,{currentUser:{avatar:"/api/public/preview/".concat(a==null?void 0:a.avatar),name:a==null?void 0:a.name,userid:a==null?void 0:a.userId,email:a==null?void 0:a.email,signature:a==null?void 0:a.profile,group:a==null?void 0:a.deptName}}),children:(0,e.jsxs)(G.Z,{gutter:24,children:[(0,e.jsx)(T.Z,{xl:16,lg:24,md:24,sm:24,xs:24,children:(0,e.jsx)(Q,{})}),i.hasPermission("project:create")&&(0,e.jsx)(T.Z,{xl:8,lg:24,md:24,sm:24,xs:24,children:(0,e.jsx)(j.Z,{style:{marginBottom:24},title:s.formatMessage({id:"pages.home.quickStart.title",defaultMessage:"\u5FEB\u901F\u5F00\u59CB / \u4FBF\u6377\u5BFC\u822A"}),bordered:!1,bodyStyle:{padding:0},children:(0,e.jsx)(W,{onAdd:function(){},links:r,linkElement:R.rU})})})]})})},te=(0,D.Pi)(ee)}}]);
