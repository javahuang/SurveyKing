(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[811],{1997:function(it,ve,i){"use strict";i.d(ve,{ML:function(){return we},tC:function(){return Me},sJ:function(){return ye},ZP:function(){return tt}});var je=i(71194),v=i(50146),se=i(57663),re=i(71577),M=i(49111),S=i(19650),ae=i(77576),ne=i(12028),K=i(22385),$=i(94199),ot=i(402),ke=i(20294),Se=i(94184),Ze=i.n(Se),x=i(67294),E=i(94657),Ie=i(29656),rt=i(63138),ce=i(88386),r=i(85893),Oe=(0,x.forwardRef)(function(f,u){var b=f.value,p=f.readOnly,m=f.placeholder,q=(0,x.useState)(),z=(0,E.Z)(q,2),D=z[0],F=z[1];(0,x.useEffect)(function(){D&&D.focus()},[D]),(0,x.useImperativeHandle)(u,function(){return{getValue:function(){return D.getValue()},focus:function(){D.focus()},getDoc:function(){return D.getDoc()}}});var O=(0,x.useMemo)(function(){return{mode:"text/x-spreadsheet",line:!0,lineWrapping:!0,readOnly:p,placeholder:m}},[p]),W=function(Z,B,j,w,y){var k=Z.getDoc(),T=document.createElement("span");T.innerText=w.title||w.path,T.className="formula-tag ".concat(y||"formula-tag-value"),k.markText(B,j,{replacedWith:T})},X=function V(Z,B,j){var w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];(w||[]).forEach(function(y){for(var k="#{".concat(y.path,"}"),T=new RegExp(k,"g");T.exec(B)!==null;){var J={line:j,ch:T.lastIndex-k.length},Ce={line:j,ch:T.lastIndex};W(Z,J,Ce,y)}for(k="#{_".concat(y.path,"}"),T=new RegExp(k,"g");T.exec(B)!==null;){var be={line:j,ch:T.lastIndex-k.length},Y={line:j,ch:T.lastIndex};W(Z,be,Y,y,"formula-tag-text")}y.children&&y.children.length>0&&V(Z,B,j,y.children)})},P=function(Z,B){var j=B.split(`
`);j.forEach(function(w,y){return X(Z,w,y,f.variable)})},ee=function(Z,B){F(Z),b!=null&&b!==""&&P(Z,B)},te=function(Z,B,j){(j!=null||j!=="")&&P(Z,j),f.onChange&&f.onChange(j)};return(0,r.jsx)("div",{className:Ze()("formula-editor-content",{readOnly:p}),children:(0,r.jsx)(Ie.Rt,{autoCursor:!1,value:b,options:O,editorDidMount:ee,onChange:te})})}),we=Oe,Ue=i(1870),pt=i(18106),Be=i(60561),bt=i(47673),Pe=i(4107),Ve=i(83279),at=i(20136),H=i(55241),ut=i(7359),Ne=i(7964),Qe=Ne.Z.Panel,He=ke.Z.Link;function de(f,u,b){if(f.popover){var p,m;return(0,r.jsx)(H.Z,{content:(0,r.jsxs)("div",{className:"fn-popover-content",children:[(0,r.jsxs)("div",{className:"fn-popover-content-header",children:["\u516C\u5F0F\u7B80\u4ECB",(0,r.jsx)(He,{href:f.popover.docHref,target:"_blank",children:"\u6587\u6863"})]}),(p=f.popover)===null||p===void 0?void 0:p.content]}),title:(m=f.popover)===null||m===void 0?void 0:m.title,placement:"right",className:"fn-popover",children:(0,r.jsxs)("div",{className:"function-item",onClick:function(){return b&&b(f.name)},children:[(0,r.jsx)("div",{className:"function-item__name",children:f.name}),(0,r.jsx)("div",{className:"function-item__desc",children:f.description})]})},u)}return(0,r.jsxs)("div",{className:"function-item",onClick:function(){return b&&b(f.name)},children:[(0,r.jsx)("div",{className:"function-item__name",children:f.name}),(0,r.jsx)("div",{className:"function-item__desc",children:f.description})]},u)}var We=function(u){var b=u.dataSource,p=b===void 0?[]:b,m=u.check,q="function-store";return(0,r.jsx)(Ne.Z,{className:q,bordered:!1,defaultActiveKey:[0],expandIconPosition:"right",ghost:!0,children:p.map(function(z,D){return(0,r.jsx)(Qe,{className:"".concat(q,"-group"),header:z.name,children:z.functions.map(function(F,O){return de(F,O,m)})},D)})})},Xe=We,fe=i(11849),Ye=function(f){return(0,r.jsx)("svg",(0,fe.Z)((0,fe.Z)({width:"1em",height:"1.2em",viewBox:"0 0 24 24"},f),{},{children:(0,r.jsx)("path",{d:"M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 0 1 2 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3c.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 0 1 4.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41l-2.83 2.83l-2.83-2.83l-1.43 1.41l2.85 2.85l-2.85 2.81l1.43 1.41l2.83-2.83l2.83 2.83L22 19.31l-2.83-2.81L22 13.65z",fill:"currentColor"})}))},De=function(f){return(0,r.jsx)("svg",(0,fe.Z)((0,fe.Z)({width:"1em",height:"1em",viewBox:"0 0 16 16"},f),{},{children:(0,r.jsx)("g",{fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 5h2V4H1.5l-.5.5v8l.5.5H4v-1H2V5zm12.5-1H12v1h2v7h-2v1h2.5l.5-.5v-8l-.5-.5zm-2.74 2.57L12 7v2.51l-.3.45l-4.5 2h-.46l-2.5-1.5l-.24-.43v-2.5l.3-.46l4.5-2h.46l2.5 1.5zM5 9.71l1.5.9V9.28L5 8.38v1.33zm.58-2.15l1.45.87l3.39-1.5l-1.45-.87l-3.39 1.5zm1.95 3.17l3.5-1.56v-1.4l-3.5 1.55v1.41z"})})}))},st=i(32157),$e=i(32138),Ge=i(57254),me=function(u){var b=u.id,p=u.type,m=u.title,q=u.pick,z=(0,x.useMemo)(function(){return p==="SplitLine"},[]);return(0,r.jsx)("div",{className:Ze()("field-variable",{disabled:z}),onClick:function(){q&&q()},children:m})},le=me;function ie(f,u){return{title:(0,r.jsx)(le,{type:f.type,id:f.id,title:f.title,pick:function(){return u&&u(f)}}),key:f.id,children:(f.children||[]).map(function(b){return ie(b,u)})}}var he=function(u){var b=u.dataSource,p=u.pick,m=(0,x.useMemo)(function(){return b.map(function(q){return ie(q,p)})},[p]);return(0,r.jsx)($e.Z,{blockNode:!0,defaultExpandAll:!0,showLine:{showLeafIcon:!1},switcherIcon:(0,r.jsx)(Ge.Z,{}),className:"hide-file-icon",treeData:m,selectable:!1})},Ae=he,Ke=i(76570),ze=i(54421),Te=i(38272),Le=function(u){var b=u.check,p=u.dataSource;return(0,r.jsx)(Te.ZP,{bordered:!1,dataSource:p,className:"function-store-group",renderItem:function(q){return(0,r.jsx)(Te.ZP.Item,{children:de(q,q.name,b)})}})},Je=Le,ue=function(u){var b=u.variables,p=b===void 0?[]:b,m=u.insertFun,q=u.insertVariable,z=u.functionVisible,D=z===void 0?!0:z,F=u.helperVariables,O="formula-editor-toolbar",W=(0,x.useState)([]),X=(0,E.Z)(W,2),P=X[0],ee=X[1],te=(0,x.useCallback)(function(B){return(0,r.jsxs)("span",{children:[B.icon?(0,r.jsx)("span",{role:"img",className:"anticon",children:B.icon}):null,B.name]})},[]),V=function(j){var w;if(!j){ee([]);return}var y=new Set;ee(((w=u.functions)===null||w===void 0?void 0:w.reduce(function(k,T){return k.push.apply(k,(0,Ve.Z)(T.functions.filter(function(J){return J.name.includes(j.toUpperCase())}))),k},[]).filter(function(k){return y.has(k.name)?!1:(y.add(k.name),!0)}))||[])},Z=[{key:"field",label:(0,r.jsx)(te,{name:"\u95EE\u9898",icon:(0,r.jsx)(De,{})}),children:(0,r.jsx)("div",{children:(0,r.jsx)(Ae,{dataSource:p,pick:q})})}];return F&&Z.push({key:"helperFiled",label:(0,r.jsx)(te,{name:"\u547D\u540D\u53D8\u91CF",icon:(0,r.jsx)(De,{})}),children:(0,r.jsx)("div",{children:(0,r.jsx)(Ae,{dataSource:F,pick:q})})}),D&&Z.push({key:"fx",label:(0,r.jsx)(te,{name:"\u51FD\u6570",icon:(0,r.jsx)(Ye,{})}),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Pe.Z,{placeholder:"\u641C\u7D22\u516C\u5F0F",prefix:(0,r.jsx)(Ke.Z,{}),allowClear:!0,onChange:function(j){return V(j.target.value)}}),P.length>0&&(0,r.jsx)(Je,{dataSource:P,check:m}),P.length===0&&(0,r.jsx)(Xe,{dataSource:u.functions,check:m})]})}),(0,r.jsx)("div",{className:O,children:(0,r.jsx)(Be.Z,{defaultActiveKey:"field",centered:D,items:Z})})};function ge(f){for(var u=arguments.length,b=new Array(u>1?u-1:0),p=1;p<u;p++)b[p-1]=arguments[p];return(0,r.jsxs)("div",{className:"fn-popover-title",children:[f,"(",b.map(function(m,q){return(0,r.jsxs)("span",{className:"fn-popover-arg",children:[m," ",q===b.length-1?"":","]},q)}),")"]})}var xe="https://support.microsoft.com/zh-cn/office/",qe=[{name:"\u903B\u8F91",functions:[{name:"IF",description:"\u6839\u636E\u5224\u65AD\u6761\u4EF6\uFF0C\u8FD4\u56DE\u6B63\u786E\u6216\u9519\u8BEF\u7684\u503C"},{name:"AND",description:"\u8FD4\u56DE\u903B\u8F91\u503C\uFF1A\u5982\u679C\u6240\u6709\u53C2\u6570\u503C\u5747\u4E3A\u903B\u8F91\u201Ctrue\u201D\uFF0C\u5219\u8FD4\u56DE\u903B\u8F91\u201Ctrue\u201D\uFF0C\u53CD\u4E4B\u8FD4\u56DE\u903B\u8F91\u201Cfalse",popover:{title:ge("AND","logical1","logical2","..."),content:(0,r.jsxs)("div",{className:"fn-popover-content",children:["\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Afalse\uFF0C\u5373\u8FD4\u56DE false\uFF1B",(0,r.jsx)("br",{})," \u53EA\u6709\u5F53\u6240\u6709\u53C2\u6570\u7684\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u624D\u8FD4\u56DE true\u3002",(0,r.jsx)("br",{}),"logical:\u903B\u8F91\u503C\uFF0C\u4F8B\u5982\uFF0C2>1\u7684\u903B\u8F91\u503C\u4E3A true"]})}},{name:"OR",description:"\u4EFB\u4F55\u4E00\u4E2A\u53C2\u6570\u903B\u8F91\u503C\u4E3Atrue\uFF0C\u5373\u8FD4\u56DEtrue\uFF1B\u53EA\u6709\u5F53\u6240\u6709\u903B\u8F91\u53C2\u6570\u503C\u4E3Afalse\uFF0C\u624D\u8FD4\u56DEfalse"},{name:"XOR",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u6570\u7684\u5F02\u6216\u503C"},{name:"NOT",description:"\u5BF9\u53C2\u6570\u903B\u8F91\u503C\u6C42\u53CD"}]},{name:"\u6587\u5B57",functions:[{name:"SUBSTITUTE",description:"\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text",popover:{title:ge("SUBSTITUTE","old_text","new_text","[instance_num]"),content:(0,r.jsxs)("div",{className:"fn-popover-content",children:["\u5728\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7528 new_text \u66FF\u6362 old_text\u3002",(0,r.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u6307\u5B9A\u7684\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 SUBSTITUTE\uFF1B",(0,r.jsx)("br",{}),"\u5982\u679C\u9700\u8981\u5728\u67D0\u4E00\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u66FF\u6362\u7279\u5B9A\u4F4D\u7F6E\u5904\u7684\u4EFB\u610F\u6587\u672C\uFF0C\u8BF7\u4F7F\u7528\u51FD\u6570 REPLACE\u3002"]}),docHref:"".concat(xe,"substitute-\u51FD\u6570-6434944e-a904-4336-a9b0-1e58df3bc332")}},{name:"CONCATENATE",description:"\u5C06\u591A\u4E2A\u6587\u5B57\u5408\u5E76"},{name:"LEFT",description:"\u4ECE\u5DE6\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"RIGHT",description:"\u4ECE\u53F3\u8FB9\u8FB9\u622A\u53D6\u6307\u5B9A\u957F\u5EA6\u7684\u6587\u5B57"},{name:"MID",description:"\u622A\u53D6\u6307\u5B9A\u4F4D\u7F6E\u7684\u6587\u5B57"},{name:"REPLACE",description:"\u66FF\u6362\u6587\u672C\u4E2D\u7684\u6307\u5B9A\u6587\u5B57",popover:{title:ge("REPLACE","old_text","start_num","num_chars","new_text"),content:(0,r.jsxs)("div",{className:"fn-popover-content",children:["\u6839\u636E\u6307\u5B9A\u7684\u5B57\u7B26\u6570\uFF0CREPLACE \u5C06\u90E8\u5206\u6587\u672C\u5B57\u7B26\u4E32\u66FF\u6362\u4E3A\u4E0D\u540C\u7684\u6587\u672C\u5B57\u7B26\u4E32\u3002",(0,r.jsx)("br",{}),"REPLACEB \u4F7F\u7528\u5176\u4ED6\u6587\u672C\u5B57\u7B26\u4E32\u5E76\u6839\u636E\u6240\u6307\u5B9A\u7684\u5B57\u8282\u6570\u66FF\u6362\u67D0\u6587\u672C\u5B57\u7B26\u4E32\u4E2D\u7684\u90E8\u5206\u6587\u672C\u3002"]}),docHref:"".concat(xe,"replace-replaceb-\u51FD\u6570-8d799074-2425-4a8a-84bc-82472868878a")}},{name:"TRIM",description:"\u79FB\u9664\u6587\u5B57\u5934\u5C3E\u7684\u7A7A\u683C"},{name:"LEN",description:"\u540E\u53BB\u6587\u5B57\u7684\u957F\u5EA6"},{name:"LOWER",description:"\u8F6C\u6210\u5C0F\u5199\u6587\u5B57"},{name:"UPPER",description:"\u8F6C\u6210\u5927\u5199\u6587\u5B57"}]},{name:"\u6570\u5B57",functions:[{name:"AVERAGE",description:"\u8BA1\u7B97\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u7684\u5E73\u5747\u503C"},{name:"COUNT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u6570\u5B57\u7684\u6570\u91CF"},{name:"COUNTA",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u8FD0\u7B97\u5B57\u6BB5\u4E2D\u503C\u4E0D\u4E3A\u7A7A\u7684\u6570\u91CF"},{name:"COUNTIF",description:"COUNTIF(\u8868\u683C[\u91D1\u989D], 100)\uFF0C\u53EF\u5F97\u5230\u8868\u683C\u4E2D\u91D1\u989D\u4E3A100\u7684\u6570\u636E\u6761\u6570"},{name:"MAX",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5927\u503C"},{name:"MIN",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u7684\u6700\u5C0F\u503C"},{name:"ROUND",description:"\u5C06\u6570\u5B57\u56DB\u820D\u4E94\u5165\u5230\u6307\u5B9A\u7684\u4F4D\u6570"},{name:"INT",description:"\u5C06\u6570\u5B57\u5411\u4E0B\u53D6\u6574"},{name:"MOD",description:"\u8FD4\u56DE\u4E24\u6570\u76F8\u9664\u7684\u4F59\u6570"},{name:"PRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u4E58\u79EF"},{name:"SUM",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMPRODUCT",description:"\u8FD4\u56DE\u6240\u6709\u53C2\u4E0E\u5B57\u6BB5\u4E2D\u6570\u503C\u7684\u603B\u548C"},{name:"SUMIF",description:"\u7EDF\u8BA1\u8868\u683C\u4E2D\u7B26\u5408\u6761\u4EF6\u7684\u6570\u503C\uFF0C\u5E76\u6C42\u548C"},{name:"ROUNDUP",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0A\u53D6"},{name:"ROUNDDOWN",description:"\u5C06\u6570\u5B57\u4FDD\u7559\u6307\u5B9A\u7684\u4F4D\u6570\uFF0C\u6700\u540E\u4E00\u4F4D\u5411\u4E0B\u53D6"},{name:"POWER",description:"\u8BA1\u7B97\u6570\u5B57num\u7684n\u6B21\u65B9\uFF0Cn\u53EF\u4EE5\u4E3A\u5206\u6570\u6216\u8005\u6574\u6570"},{name:"LN",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u81EA\u7136\u5BF9\u6570"},{name:"SQRT",description:"\u8BA1\u7B97\u6307\u5B9A\u6570\u5B57\u7684\u5E73\u65B9\u6839"}]},{name:"\u65F6\u95F4",functions:[{name:"YEAR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5E74\u4EFD"},{name:"MONTH",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u6708\u4EFD"},{name:"DAY",description:"\u8FD4\u56DE\u65E5\u671F\u5728\u4E00\u4E2A\u6708\u4E2D\u7684\u7B2C\u51E0\u5929\u7684\u6570\u503C"},{name:"HOUR",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5C0F\u65F6\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"MINUTE",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u5206\u949F\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"SECOND",description:"\u8FD4\u56DE\u65E5\u671F\u4E2D\u7684\u79D2\uFF0C\u65E5\u671F\u5B57\u6BB5\u5FC5\u987B\u7CBE\u786E\u5230\u65F6\u95F4\u624D\u53EF\u4EE5\u8BA1\u7B97\u51FA\u6765"},{name:"DATE",description:"\u5C06\u6570\u5B57\u62FC\u63A5\u6210\u4E3A\u5E74\u4EFD\uFF0C\u6570\u5B57\u5B57\u6BB5\u987A\u5E8F\u4E3A\uFF1A\u5E74\uFF0F\u6708\uFF0F\u65E5\uFF0F\u65F6\uFF0F\u5206\uFF0F\u79D2"},{name:"CURDATE",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F"},{name:"NOW",description:"\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u7CBE\u786E\u5230\u65F6/\u5206/\u79D2"},{name:"DAYS",description:"\u8FD4\u56DE\u65E5\u671F\u5B57\u6BB51\u4E0E\u65E5\u671F\u5B57\u6BB52\u7684\u5DEE\u503C\uFF0C\u5355\u4F4D\u4E3A\u5929"},{name:"DATEDELTA",description:"\u5C06\u6307\u5B9A\u65E5\u671F\u52A0/\u51CF\u6307\u5B9A\u5929\u6570\uFF0C\u5E76\u8FD4\u56DE\u76EE\u6807\u65E5\u671F"}]},{name:"\u81EA\u5B9A\u4E49\u51FD\u6570",functions:[{name:"CURRENT_DATE",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F\uFF0C\u683C\u5F0F 2022-01-01"},{name:"CURRENT_TIME",description:"\u8FD4\u56DE\u5F53\u524D\u65F6\u95F4\uFF0C\u683C\u5F0F 18:20:30"},{name:"CURRENT_DATETIME",description:"\u8FD4\u56DE\u5F53\u524D\u65E5\u671F\u65F6\u95F4\uFF0C\u683C\u5F0F 2022-01-01 18:20:30"}]}];function _e(f){if(f){var u=qe.map(function(p){return p.functions}).reduce(function(p,m){return p.concat(m)},[]),b=f.map(function(p){return u.find(function(m){return m.name===p})});return[{name:"\u5E38\u7528",functions:b}].concat(qe)}return qe}var Re=i(76826);function pe(f){return f==="SplitLine"||f==="Pagination"||f==="Remark"||f==="Signature"||f==="Upload"}function et(f){return!!["Dept","FillBlank","User","Score","Nps","Textarea"].includes(f)}var ct=function f(u){var b;(b=u.children)===null||b===void 0||b.forEach(function(p){p.parent=u,f(p)})},ye=function f(u,b,p,m,q){var z;if(!u)return[];var D=!1;return((z=u.children)===null||z===void 0?void 0:z.filter(function(F){return F===b&&!p?(D=!0,!1):m&&!m.includes(F.type)?!1:!pe(F.type)&&!D?!0:((F.type==="Option"||F.type===void 0)&&q===!1,!1)}).map(function(F){var O=F.id,W=F.title,X=F.type,P=F.type===void 0?"".concat(u==null?void 0:u.id,".").concat(O):O;return et(F.type)?{id:O,path:P,title:(0,Re.WO)(W),type:X}:{id:O,path:P,title:(0,Re.WO)(W),type:X,children:f(F,b,p,m,q)}}))||[]},l=ke.Z.Link,Me=function(u){var b=u.title,p=u.subTitle,m=u.helpLink,q=u.onOk,z=u.value,D=u.className,F=u.onCancel,O=u.fieldAll,W=u.visible,X=W===void 0?!0:W,P=u.schema,ee=u.current,te=u.functions,V=u.functionVisible,Z=u.fieldTypes,B=u.helperVariables,j=u.optionVisible,w=j===void 0?!0:j,y=(0,x.useRef)(null),k="formula-editor",T=(0,x.useRef)(""),J=(0,x.useCallback)(function(Y){if(y.current!=null){var U=y.current.getDoc(),oe=U.getCursor();U.replaceRange("".concat(Y,"()"),oe),oe.ch+=Y.length+1,U.setCursor(oe),y.current.focus()}},[]),Ce=(0,x.useCallback)(function(Y){if(y.current!=null){var U=y.current.getDoc(),oe=U.getCursor();U.replaceRange("#{".concat(T.current).concat(Y.path,"}"),oe,oe),y.current.focus()}},[]),be=(0,x.useMemo)(function(){return ye(P,ee,O,Z,w)},[P,ee,O,Z]);return(0,r.jsx)(v.Z,{onCancel:F,open:X,maskClosable:!1,getContainer:u.getContainer,title:b,width:1e3,footer:!1,onOk:function(U){U.stopPropagation(),q(y.current.getValue())},keyboard:!1,children:(0,r.jsxs)("div",{className:Ze()(k,D),children:[(0,r.jsx)(ue,{functionVisible:V,functions:te||_e(u.commonUseFunctionNames),variables:be,helperVariables:B,insertFun:J,insertVariable:Ce}),(0,r.jsxs)("div",{className:"".concat(k,"-main"),children:[(0,r.jsxs)("div",{className:"".concat(k,"-main__code"),children:[(0,r.jsxs)("h1",{children:[(0,r.jsxs)("span",{className:"equle",children:[p,"="]}),(0,r.jsxs)("span",{style:{float:"right"},children:[(0,r.jsx)($.Z,{title:"\u903B\u8F91\u8868\u793A\u4F7F\u7528\u5177\u4F53\u503C\u53C2\u4E0E\u903B\u8F91\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u4E3A true;\u6587\u672C\u8868\u793A\u4F7F\u7528\u6807\u9898\u53C2\u4E0E\u6587\u672C\u8BA1\u7B97\uFF0C\u5982\u5355\u9009\u9898\u9009\u4E2D\u9009\u9879\u7684\u6587\u672C\u3002",children:(0,r.jsx)(Ue.Z,{style:{fontSize:16,marginRight:10}})}),(0,r.jsx)(ne.Z,{checkedChildren:"\u903B\u8F91",defaultChecked:!0,unCheckedChildren:"\u6587\u672C",onChange:function(U){U?T.current="":T.current="_"}})]})]}),(0,r.jsx)("div",{style:{fontSize:14,color:"#b0b0b9"},children:"\u5728\u5DE6\u4FA7\u9009\u62E9\u51FD\u6570\u6216\u5B57\u6BB5\u53D8\u91CF\uFF0C\u4E14\u5728\u82F1\u6587\u8F93\u5165\u6CD5\u4E0B\u7F16\u8F91"})]}),(0,r.jsx)("div",{className:"".concat(k,"-main__panel"),children:(0,r.jsx)(we,{ref:y,variable:be.concat(B||[]),value:z})}),(0,r.jsxs)("div",{className:"".concat(k,"-main__footer"),children:[(0,r.jsxs)(S.Z,{children:[(0,r.jsx)("span",{children:m}),(0,r.jsx)(l,{href:"https://surveyking.cn/docs/guides/formula",target:"_blank",children:"\u516C\u5F0F\u6587\u6863"})]}),(0,r.jsxs)(S.Z,{children:[(0,r.jsx)(re.Z,{onClick:function(){F&&F()},children:"\u53D6\u6D88"}),(0,r.jsx)(re.Z,{type:"primary",onClick:function(U){U.stopPropagation(),q(y.current.getValue())},children:"\u786E\u5B9A"})]})]})]})]})})},tt=Me},70811:function(it,ve,i){"use strict";i.d(ve,{Mf:function(){return W},cM:function(){return X},Bn:function(){return U},ZP:function(){return oe}});var je=i(22385),v=i(94199),se=i(94657),re=i(20310),M=i(69610),S=i(54941),ae=i(63543),ne=i(94663),K=i(43028),$=i(15818),ot=i(94184),ke=i.n(ot),Se=i(28579),Ze=i(44823),x=i(67294),E=i(71167),Ie=i.n(E),rt=i(61233),ce=i(11849),r=i(71194),Oe=i(50146),we=i(49111),Ue=i(19650),pt=i(57663),Be=i(71577),bt=i(77576),Pe=i(12028),Ve=i(93224),at=i(76095),H=i.n(at),ut=function(){function d(a,t){(0,M.Z)(this,d),this.quill=a,this.options=t,this.container=document.querySelector(t.container),a.on("text-change",this.update.bind(this)),this.update()}return(0,S.Z)(d,[{key:"calculate",value:function(){var t=this.quill.getText();return this.options.unit==="word"?(t=t.trim(),t.length>0?t.split(/\s+/).length:0):t.length}},{key:"update",value:function(){var t=this.calculate(),e=this.options.unit;t!==1&&(e+="s")}}]),d}();E.Quill.register("modules/counter",ut);var Ne=i(66913),Qe=i.n(Ne),He={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},de=(0,S.Z)(function d(a){(0,M.Z)(this,d),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=a.overlay,this.img=a.img,this.options=a.options,this.requestUpdate=a.onUpdate}),We=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){var e;(0,M.Z)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return e=a.call.apply(a,[this].concat(n)),e.onCreate=function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)},e.onDestroy=function(){},e.onUpdate=function(){if(!(!e.display||!e.img)){var s=e.getCurrentSize();if(e.display.innerHTML=s.join(" &times; "),s[0]>120&&s[1]>30)Object.assign(e.display.style,{right:"4px",bottom:"4px",left:"auto"});else if(e.img.style.float=="right"){var h=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"auto",bottom:"-".concat(h.height+4,"px"),left:"-".concat(h.width+4,"px")})}else{var C=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"-".concat(C.width+4,"px"),bottom:"-".concat(C.height+4,"px"),left:"auto"})}}},e.getCurrentSize=function(){return[e.img.width,Math.round(e.img.width/e.img.naturalWidth*e.img.naturalHeight)]},e}return(0,S.Z)(t)}(de),Xe=i(20668),fe=i.n(Xe),Ye=i(15924),De=i.n(Ye),st=i(43203),$e=i.n(st),Ge=i(76095),me=Ge.imports.parchment,le=new me.Attributor.Style("float","float"),ie=new me.Attributor.Style("margin","margin"),he=new me.Attributor.Style("display","display"),Ae=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){var e;(0,M.Z)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return e=a.call.apply(a,[this].concat(n)),e.onCreate=function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons()},e.onDestroy=function(){},e.onUpdate=function(){},e._defineAlignments=function(){e.alignments=[{icon:fe(),apply:function(){he.add(e.img,"inline"),le.add(e.img,"left"),ie.add(e.img,"0 1em 1em 0")},isApplied:function(){return le.value(e.img)=="left"}},{icon:De(),apply:function(){he.add(e.img,"block"),le.remove(e.img),ie.add(e.img,"auto")},isApplied:function(){return ie.value(e.img)=="auto"}},{icon:$e(),apply:function(){he.add(e.img,"inline"),le.add(e.img,"right"),ie.add(e.img,"0 0 1em 1em")},isApplied:function(){return le.value(e.img)=="right"}}]},e._addToolbarButtons=function(){var s=[];e.alignments.forEach(function(h,C){var g=document.createElement("span");s.push(g),g.innerHTML=h.icon,g.addEventListener("click",function(){s.forEach(function(Q){return Q.style.filter=""}),h.isApplied()?(le.remove(e.img),ie.remove(e.img),he.remove(e.img)):(e._selectButton(g),h.apply()),e.requestUpdate()}),Object.assign(g.style,e.options.toolbarButtonStyles),C>0&&(g.style.borderLeftWidth="0"),Object.assign(g.children[0].style,e.options.toolbarButtonSvgStyles),h.isApplied()&&e._selectButton(g),e.toolbar.appendChild(g)})},e._selectButton=function(s){s.style.filter="invert(20%)"},e}return(0,S.Z)(t)}(de),Ke=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){var e;(0,M.Z)(this,t);for(var o=arguments.length,n=new Array(o),c=0;c<o;c++)n[c]=arguments[c];return e=a.call.apply(a,[this].concat(n)),e.onCreate=function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()},e.onDestroy=function(){e.setCursor("")},e.positionBoxes=function(){var s="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),h="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:s,top:h},{right:s,top:h},{right:s,bottom:h},{left:s,bottom:h}].forEach(function(C,g){Object.assign(e.boxes[g].style,C)})},e.addBox=function(s){var h=document.createElement("div");Object.assign(h.style,e.options.handleStyles),h.style.cursor=s,h.style.width="".concat(e.options.handleStyles.width,"px"),h.style.height="".concat(e.options.handleStyles.height,"px"),h.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(h),e.boxes.push(h)},e.handleMousedown=function(s){e.dragBox=s.target,e.dragStartX=s.clientX,e.preDragWidth=e.img.width||e.img.naturalWidth,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)},e.handleMouseup=function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)},e.handleDrag=function(s){if(!!e.img){var h=s.clientX-e.dragStartX;e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]?e.img.width=Math.round(e.preDragWidth-h):e.img.width=Math.round(e.preDragWidth+h),e.requestUpdate()}},e.setCursor=function(s){[document.body,e.img].forEach(function(h){h.style.cursor=s})},e}return(0,S.Z)(t)}(de),ze=i(76095),Te={DisplaySize:We,Toolbar:Ae,Resize:Ke},Le=(0,S.Z)(function d(a){var t=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,M.Z)(this,d),this.initializeModules=function(){t.removeModules(),t.modules=t.moduleClasses.map(function(n){return new(Te[n]||n)(t)}),t.modules.forEach(function(n){n.onCreate()}),t.onUpdate()},this.onUpdate=function(){t.repositionElements(),t.modules.forEach(function(n){n.onUpdate()})},this.removeModules=function(){t.modules.forEach(function(n){n.onDestroy()}),t.modules=[]},this.handleClick=function(n){if(n.target&&n.target.tagName&&n.target.tagName.toUpperCase()==="IMG"){if(t.img===n.target)return;t.img&&t.hide(),t.show(n.target)}else t.img&&t.hide()},this.show=function(n){t.img=n,t.showOverlay(),t.initializeModules()},this.showOverlay=function(){t.overlay&&t.hideOverlay(),t.quill.setSelection(null),t.setUserSelect("none"),document.addEventListener("keyup",t.checkImage,!0),t.quill.root.addEventListener("input",t.checkImage,!0),t.overlay=document.createElement("div"),Object.assign(t.overlay.style,t.options.overlayStyles),t.quill.root.parentNode.appendChild(t.overlay),t.repositionElements()},this.hideOverlay=function(){!t.overlay||(t.quill.root.parentNode.removeChild(t.overlay),t.overlay=void 0,document.removeEventListener("keyup",t.checkImage),t.quill.root.removeEventListener("input",t.checkImage),t.setUserSelect(""))},this.repositionElements=function(){if(!(!t.overlay||!t.img)){var n=t.quill.root.parentNode,c=t.img.getBoundingClientRect(),s=n.getBoundingClientRect();Object.assign(t.overlay.style,{left:"".concat(c.left-s.left-1+n.scrollLeft,"px"),top:"".concat(c.top-s.top+n.scrollTop,"px"),width:"".concat(c.width,"px"),height:"".concat(c.height,"px")})}},this.hide=function(){t.hideOverlay(),t.removeModules(),t.img=void 0},this.setUserSelect=function(n){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(c){t.quill.root.style[c]=n,document.documentElement.style[c]=n})},this.checkImage=function(n){t.img&&((n.keyCode==46||n.keyCode==8)&&ze.find(t.img).deleteAt(0),t.hide())},this.quill=a;var o=!1;e.modules&&(o=e.modules.slice()),this.options=Qe()({},e,He),o!==!1&&(this.options.modules=o),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]});ze&&ze.register("modules/imageResize",Le);var Je=H().import("blots/block"),ue=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){return(0,M.Z)(this,t),a.apply(this,arguments)}return(0,S.Z)(t,[{key:"deleteAt",value:function(o,n){(0,ae.Z)((0,ne.Z)(t.prototype),"deleteAt",this).call(this,o,n),this.cache={}}}],[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this,o);if(o===!0)return n;var c=document.createElement("img");return c.setAttribute("src",o),n.appendChild(c),n}},{key:"value",value:function(o){var n=o.dataset,c=n.src,s=n.custom;return{src:c,custom:s}}}]),t}(Je);ue.blotName="imageBlot",ue.className="image-uploading",ue.tagName="span",H().register({"formats/imageBlot":ue});var ge=ue,xe=function(){function d(a,t){(0,M.Z)(this,d),this.quill=a,this.options=t,this.range=null,typeof this.options.upload!="function"&&console.warn("[Missing config] upload function that returns a promise is required");var e=this.quill.getModule("toolbar");e.addHandler("image",this.selectLocalImage.bind(this)),this.handleDrop=this.handleDrop.bind(this),this.handlePaste=this.handlePaste.bind(this),this.quill.root.addEventListener("drop",this.handleDrop,!1),this.quill.root.addEventListener("paste",this.handlePaste,!1)}return(0,S.Z)(d,[{key:"selectLocalImage",value:function(){var t=this;this.range=this.quill.getSelection(),this.fileHolder=document.createElement("input"),this.fileHolder.setAttribute("type","file"),this.fileHolder.setAttribute("accept","image/*"),this.fileHolder.setAttribute("style","visibility:hidden"),this.fileHolder.onchange=this.fileChanged.bind(this),document.body.appendChild(this.fileHolder),this.fileHolder.click(),window.requestAnimationFrame(function(){document.body.removeChild(t.fileHolder)})}},{key:"handleDrop",value:function(t){var e=this;if(t.stopPropagation(),t.preventDefault(),t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){if(document.caretRangeFromPoint){var o=document.getSelection(),n=document.caretRangeFromPoint(t.clientX,t.clientY);o&&n&&o.setBaseAndExtent(n.startContainer,n.startOffset,n.startContainer,n.startOffset)}else{var c=document.getSelection(),s=document.caretPositionFromPoint(t.clientX,t.clientY);c&&s&&c.setBaseAndExtent(s.offsetNode,s.offset,s.offsetNode,s.offset)}this.range=this.quill.getSelection();var h=t.dataTransfer.files[0];setTimeout(function(){e.range=e.quill.getSelection(),e.readAndUploadFile(h)},0)}}},{key:"handlePaste",value:function(t){var e=this,o=t.clipboardData||window.clipboardData;if(o&&(o.items||o.files))for(var n=o.items||o.files,c=/^image\/(jpe?g|gif|png|svg|webp)$/i,s=0;s<n.length;s++)c.test(n[s].type)&&function(){var h=n[s].getAsFile?n[s].getAsFile():n[s];h&&(e.range=e.quill.getSelection(),t.preventDefault(),setTimeout(function(){e.range=e.quill.getSelection(),e.readAndUploadFile(h)},0))}()}},{key:"readAndUploadFile",value:function(t){var e=this,o=!1,n=new FileReader;n.addEventListener("load",function(){if(!o){var c=n.result;e.insertBase64Image(c)}},!1),t&&n.readAsDataURL(t),this.options.upload(t).then(function(c){e.insertToEditor(c)},function(c){o=!0,e.removeBase64Image(),console.warn(c)})}},{key:"fileChanged",value:function(){var t=this.fileHolder.files[0];this.readAndUploadFile(t)}},{key:"insertBase64Image",value:function(t){var e=this.range;this.quill.insertEmbed(e.index,ge.blotName,"".concat(t),"user")}},{key:"insertToEditor",value:function(t){var e=this.range;this.quill.deleteText(e.index,3,"user"),this.quill.insertEmbed(e.index,"image","".concat(t)),e.index++,this.quill.setSelection(e,"user")}},{key:"removeBase64Image",value:function(){var t=this.range;this.quill.deleteText(t.index,3,"user")}}]),d}();window.ImageUploader=xe;var qe=xe,_e=E.Quill.import("parchment"),Re=E.Quill.import("ui/icons");Re.score='<svg t="1656149207035" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2625"><path d="M905.92 237.76a32 32 0 0 0-52.48 36.48A416 416 0 1 1 96 512a418.56 418.56 0 0 1 297.28-398.72 32 32 0 1 0-18.24-61.44A480 480 0 1 0 992 512a477.12 477.12 0 0 0-86.08-274.24z" fill="#231815" p-id="2626"></path><path d="M630.72 113.28A413.76 413.76 0 0 1 768 185.28a32 32 0 0 0 39.68-50.24 476.8 476.8 0 0 0-160-83.2 32 32 0 0 0-18.24 61.44zM489.28 86.72a36.8 36.8 0 0 0 10.56 6.72 30.08 30.08 0 0 0 24.32 0 37.12 37.12 0 0 0 10.56-6.72A32 32 0 0 0 544 64a33.6 33.6 0 0 0-9.28-22.72A32 32 0 0 0 505.6 32a20.8 20.8 0 0 0-5.76 1.92 23.68 23.68 0 0 0-5.76 2.88l-4.8 3.84a32 32 0 0 0-6.72 10.56A32 32 0 0 0 480 64a32 32 0 0 0 2.56 12.16 37.12 37.12 0 0 0 6.72 10.56zM355.84 313.6a36.8 36.8 0 0 0-13.12 18.56l-107.52 312.96a37.44 37.44 0 0 0 2.56 35.52 32 32 0 0 0 24.96 10.56 27.84 27.84 0 0 0 17.28-5.76 43.84 43.84 0 0 0 10.56-13.44 100.16 100.16 0 0 0 7.04-15.36l4.8-12.8 17.6-49.92h118.72l24.96 69.76a45.76 45.76 0 0 0 10.88 19.2 28.8 28.8 0 0 0 20.48 8.32h2.24a27.52 27.52 0 0 0 27.84-15.68 41.28 41.28 0 0 0 0-29.44l-107.84-313.6a36.8 36.8 0 0 0-13.44-19.2 44.16 44.16 0 0 0-48 0.32z m24.32 96l41.6 125.44h-83.2zM594.88 544a66.56 66.56 0 0 0 25.6 4.16h62.4v78.72a29.12 29.12 0 0 0 32 32 26.24 26.24 0 0 0 27.2-16.32 73.28 73.28 0 0 0 4.16-26.24v-66.88h73.6a27.84 27.84 0 0 0 29.44-32 26.56 26.56 0 0 0-16-27.2 64 64 0 0 0-23.04-4.16h-64v-75.84a28.16 28.16 0 0 0-32-30.08 26.56 26.56 0 0 0-27.2 15.68 64 64 0 0 0-4.16 24v66.88h-62.72a69.44 69.44 0 0 0-25.6 4.16 26.56 26.56 0 0 0-15.68 27.2 25.92 25.92 0 0 0 16 25.92z" fill="#231815" p-id="2627"></path></svg>';var pe=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){return(0,M.Z)(this,t),a.apply(this,arguments)}return(0,S.Z)(t,null,[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this,o);return n.innerText=o,n.contentEditable="false",n}},{key:"value",value:function(o){return o.childNodes[0].textContent}},{key:"_addRemovalButton",value:function(o){var n=document.createElement("button");n.innerText="x",n.onclick=function(){return o.remove()},n.contentEditable="false",o.appendChild(n);var c=document.createElement("span");c.innerText=" ",o.appendChild(c)}}]),t}(_e.Embed);pe.blotName="score",pe.tagName="SPAN",pe.className="ql-label",E.Quill.register(pe);var et=i(83279),ct=i(1997),ye=i(11628),l=i(85893),Me=E.Quill.import("delta"),tt=function(){function d(a,t){(0,M.Z)(this,d),this.quill=a,this.options=t,a.on("text-change",this.update.bind(this)),this.update()}return(0,S.Z)(d,[{key:"update",value:function(){}}]),d}();E.Quill.register("modules/scoreLogic",tt);var f=function(a){var t=a.onCancel,e=a.editorRef,o=a.formula,n=(0,ye.IE)(),c=(0,x.useMemo)(function(){var C;return(C=e.current)===null||C===void 0?void 0:C.getSelection()},[]),s=function(g){if(c){var Q;(Q=e.current)===null||Q===void 0||Q.updateContents(new Me().retain(c.index-1).delete(1).insert({"score-logic":{text:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F(\u70B9\u51FB\u4FEE\u6539)",formula:g}}))}};if(!n.schema)return(0,l.jsx)(l.Fragment,{});var h=n.mode==="exam"?(0,ce.Z)((0,ce.Z)({},n.schema),{},{children:[{type:"FillBlank",id:"score",title:"\u5206\u6570",children:[{id:"score",title:"\u5206\u6570",type:"Option",attribute:{dataType:"number"}}]}].concat((0,et.Z)(n.schema.children))}):n.schema;return(0,l.jsx)(ct.ZP,{title:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F\u8BBE\u7F6E",functionVisible:!0,schema:h,value:o,onCancel:t,onOk:function(g){s(g),t()}})},u=E.Quill.import("parchment"),b=E.Quill.import("delta"),p=E.Quill.import("ui/icons");p["score-logic"]='<svg t="1656401750965" class="icon" viewBox="0 0 1128 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5625" ><path d="M473.184 356.632c-23.048-28.336-64.616-32.632-92.816-9.672-28.248 23.048-32.568 64.528-9.616 92.84l473.328 547.152c22.928 28.248 64.376 32.488 92.776 9.552 28.224-22.992 32.512-64.528 9.528-92.752l-473.2-547.12z" fill="#0092D2" p-id="5626"></path><path d="M151.4 65.976l-1.056-0.472 54.912 223.104L52.68 460.32l229.128 16.664 116.12 198.2 56.8-139.376 389.6 450.344c22.224 27.4 61.792 31.984 90.072 11.32L151.4 65.976z" fill="#0085BF" p-id="5627"></path><path d="M150.104 66.304L360.56 158.4 555.752 37.224l-22.52 228.6L708.8 414.016l-224.416 49.24-86.664 212.728-116.152-198.2-229.12-16.672 152.6-171.712z" fill="#F5B146" p-id="5628"></path><path d="M276.192 225.08l95.368 41.712 88.424-54.888-10.2 103.576 79.568 67.144-101.704 22.312-39.28 96.368-52.616-89.816-103.808-7.52 69.144-77.816z" fill="#E5226B" p-id="5629"></path><path d="M484.384 463.256l0.528-0.112L152.072 67.152l-1.208-0.528 54.856 222.92-152.48 171.624 228.328 16.616 0.064 0.08 0.648 0.064 115.68 197.464z" fill="#EF962F" p-id="5630"></path><path d="M434.56 403.408L289.6 230.928l-13.408-5.848 24.896 101.072-69.144 77.816 103.808 7.52 52.616 89.816 39.28-96.368z" fill="#C9005B" p-id="5631"></path></svg>';var m=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){return(0,M.Z)(this,t),a.apply(this,arguments)}return(0,S.Z)(t,null,[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this,o);return n.innerText=o.text,n.dataset.formula=o.formula,n.contentEditable="false",this._addClickEvent(n),n}},{key:"value",value:function(o){return{text:o.childNodes[0].textContent,formula:o.dataset.formula}}},{key:"_addClickEvent",value:function(o){o.onclick=function(){var n=o.closest(".custom-quill-editor");if(n){var c=E.Quill.find(n.querySelector(".quill-editor")),s=c.getModule("scoreLogic");s.options.openModal(o.dataset.formula)}}}}]),t}(u.Embed);m.blotName="score-logic",m.tagName="SPAN",m.className="ql-score-logic",E.Quill.register(m);var q=i(40807),z=i(3980),D=["onChange","onClose","value","toolbar"];H().register("modules/imageResize",Le),H().register("modules/imageUploader",qe);var F=H().import("delta"),O=H().import("attributors/style/size");O.whitelist=["9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","36px"],H().register(O,!0);var W=function(a){var t=a.toolbar,e=(0,x.useRef)(null),o=(0,x.useRef)(),n=(0,x.useRef)(),c=(0,x.useState)(),s=(0,se.Z)(c,2),h=s[0],C=s[1],g=(0,ye.IE)(),Q=(0,x.useMemo)(function(){return"quill-".concat((0,q.kb)())},[]);return(0,x.useEffect)(function(){return e.current&&(o.current=new(H())(e.current,{theme:"snow",formats:["size","color","width","background","header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","formula","align","imageBlot","code-block","score","score-logic"],modules:{syntax:{highlight:function(A){return Se.Z.highlightAuto(A).value}},counter:{container:"#counter",unit:"word"},imageResize:{parchment:H().import("parchment"),modules:["Resize","DisplaySize"]},imageUploader:{upload:function(A){return new Promise(function(N,I){z.hi.uploadImage(3,A).then(function(G){G.success&&N("/api/public/preview/".concat(G.data.id))}).catch(function(G){I("Upload failed"),console.error("Error:",G)})})}},scoreLogic:{openModal:function(A){C({visible:!0,formula:A})}},toolbar:{container:"#".concat(Q),handlers:{score:function(A){var N=o.current;if(N){var I=N.getSelection(!0);N.insertEmbed(I.index,"score","\u5206\u6570"),N.setSelection(I.index+1,1)}},"score-logic":function(A){var N=o.current;if(N){var I=N.getSelection(!0);N.insertEmbed(I.index,"score-logic",{text:"\u81EA\u5B9A\u4E49\u63D0\u793A\u4FE1\u606F(\u70B9\u51FB\u8BBE\u7F6E)",formula:g.mode==="exam"?"#{score}":""}),N.setSelection(I.index+1,1)}}}}}}),o.current.on("text-change",function(L,A,N){var I,G=(I=o.current)===null||I===void 0?void 0:I.root.innerHTML;G!==n.current&&a.onChange&&(a.onChange(G||""),n.current=G)})),function(){}},[]),(0,x.useEffect)(function(){var L,A=n.current,N=(L=a.value)!==null&&L!==void 0?L:"";if(N!==A){var I;n.current=N,(I=o.current)===null||I===void 0||I.setContents(o.current.clipboard.convert(N))}},[a.value]),(0,l.jsxs)("div",{className:"custom-quill-editor",children:[(0,l.jsxs)("div",{id:Q,className:"ql-formats",children:[(0,l.jsx)(v.Z,{title:"\u5B57\u53F7",children:(0,l.jsxs)("select",{className:"ql-size",children:[(0,l.jsx)("option",{value:"12px",children:"12px"}),(0,l.jsx)("option",{value:"14px",children:"14px"}),(0,l.jsx)("option",{value:"16px",children:"16px"}),(0,l.jsx)("option",{value:"18px",children:"18px"}),(0,l.jsx)("option",{value:"20px",children:"20px"}),(0,l.jsx)("option",{value:"22px",children:"22px"}),(0,l.jsx)("option",{value:"24px",children:"24px"}),(0,l.jsx)("option",{value:"36px",children:"36px"})]})}),(0,l.jsx)(v.Z,{title:"\u5B57\u4F53\u989C\u8272",children:(0,l.jsx)("select",{className:"ql-color"})}),(0,l.jsx)(v.Z,{title:"\u80CC\u666F\u8272",children:(0,l.jsx)("select",{className:"ql-background"})}),(0,l.jsx)(v.Z,{title:"\u52A0\u7C97",children:(0,l.jsx)("button",{className:"ql-bold"})}),(0,l.jsx)(v.Z,{title:"\u659C\u4F53",children:(0,l.jsx)("button",{className:"ql-italic"})}),(0,l.jsx)(v.Z,{title:"\u4E0B\u5212\u7EBF",children:(0,l.jsx)("button",{className:"ql-underline"})}),(0,l.jsx)(v.Z,{title:"\u5220\u9664\u7EBF",children:(0,l.jsx)("button",{className:"ql-strike"})}),(0,l.jsx)(v.Z,{title:"\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align"})}),(0,l.jsx)(v.Z,{title:"\u5C45\u4E2D\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"center"})}),(0,l.jsx)(v.Z,{title:"\u53F3\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"right"})}),(0,l.jsx)(v.Z,{title:"\u4E24\u7AEF\u5BF9\u9F50",children:(0,l.jsx)("button",{className:"ql-align",value:"justify"})}),(0,l.jsx)(v.Z,{title:"\u94FE\u63A5",children:(0,l.jsx)("button",{className:"ql-link"})}),(0,l.jsx)(v.Z,{title:"\u56FE\u7247",children:(0,l.jsx)("button",{className:"ql-image"})}),(0,l.jsx)(v.Z,{title:"\u89C6\u9891",children:(0,l.jsx)("button",{className:"ql-video"})}),(0,l.jsx)(v.Z,{title:"\u4EE3\u7801\u5757",children:(0,l.jsx)("button",{className:"ql-code-block"})}),(0,l.jsx)(v.Z,{title:"\u516C\u5F0F",children:(0,l.jsx)("button",{className:"ql-formula"})}),(0,l.jsx)(v.Z,{title:"\u6709\u5E8F\u5217\u8868",children:(0,l.jsx)("button",{className:"ql-list",value:"ordered"})}),(0,l.jsx)(v.Z,{title:"\u65E0\u5E8F\u5217\u8868",children:(0,l.jsx)("button",{className:"ql-list",value:"bullet"})}),(0,l.jsx)(v.Z,{title:"\u5DE6\u7F29\u8FDB",children:(0,l.jsx)("button",{className:"ql-indent",value:"-1"})}),(0,l.jsx)(v.Z,{title:"\u53F3\u7F29\u8FDB",children:(0,l.jsx)("button",{className:"ql-indent",value:"+1"})}),(0,l.jsx)(v.Z,{title:"\u6E05\u9664\u6837\u5F0F",children:(0,l.jsx)("button",{className:"ql-clean"})}),(t==null?void 0:t.includes("score"))&&(0,l.jsx)(v.Z,{title:"\u63D2\u5165\u5206\u6570",children:(0,l.jsx)("button",{className:"ql-score"})}),(t==null?void 0:t.includes("scoreLogic"))&&(0,l.jsx)(v.Z,{title:"\u6839\u636E\u7B54\u6848\u8BBE\u7F6E\u63D0\u793A\u4FE1\u606F",children:(0,l.jsx)("button",{className:"ql-score-logic"})})]}),(0,l.jsx)("pre",{ref:e,className:"quill-editor",style:{overflow:"visible"}}),(h==null?void 0:h.visible)&&(0,l.jsx)(f,{formula:h.formula,onCancel:function(){return C(void 0)},editorRef:o})]})},X=function(a){var t=a.onChange,e=a.onClose,o=a.value,n=a.toolbar,c=n===void 0?[]:n,s=(0,Ve.Z)(a,D),h=(0,x.useState)(o),C=(0,se.Z)(h,2),g=C[0],Q=C[1];return(0,l.jsx)(Oe.Z,(0,ce.Z)((0,ce.Z)({open:!0,onCancel:e,footer:!1,maskClosable:!1,closable:!1,width:650},s),{},{children:(0,l.jsxs)("div",{children:[(0,l.jsx)(W,{value:g,toolbar:c,onChange:function(A){Q(A)}}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:10},children:[(0,l.jsxs)("div",{children:["\u590D\u5236\u683C\u5F0F",(0,l.jsx)(Pe.Z,{checkedChildren:"\u6253\u5F00",unCheckedChildren:"\u5173\u95ED",onChange:function(A){localStorage.setItem("rich_copy_enable","".concat(A))},style:{marginLeft:5},defaultChecked:localStorage.getItem("rich_copy_enable")==="true"})]}),(0,l.jsxs)(Ue.Z,{children:[(0,l.jsx)(Be.Z,{onClick:e,children:"\u53D6\u6D88"}),(0,l.jsx)(Be.Z,{type:"primary",onClick:function(){return t(g)},children:"\u4FDD\u5B58"})]})]})]})}))},P=i(8166),ee=E.Quill.import("themes/bubble"),te=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(e,o){var n;return(0,M.Z)(this,t),n=a.call(this,e,o),e.on("selection-change",function(c){if(c){var s;e.theme.tooltip.show(),(s=e.theme.tooltip)===null||s===void 0||s.position((0,ce.Z)({},e.getBounds(c)))}}),e.on("text-change",function(c){e.hasFocus()&&e.theme.tooltip.show()}),n}return(0,S.Z)(t)}(ee);E.Quill.register("themes/bubble",te);var V=H().import("modules/clipboard"),Z=H().import("delta"),B=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){return(0,M.Z)(this,t),a.apply(this,arguments)}return(0,S.Z)(t,[{key:"onPaste",value:function(o){var n=o.clipboardData||window.clipboardData;if(n&&(n.items||n.files)){for(var c=n.items||n.files,s=/^image\/(jpe?g|gif|png|svg|webp)$/i,h=0;h<c.length;h++)if(s.test(c[h].type))return}if(localStorage.getItem("rich_copy_enable")==="true"){(0,ae.Z)((0,ne.Z)(t.prototype),"onPaste",this).call(this,o);return}o.preventDefault();var C=this.quill.getSelection(),g=o.clipboardData.getData("text/plain"),Q=new Z().retain(C.index).delete(C.length).insert(g),L=g.length+C.index,A=0;this.quill.updateContents(Q,"silent"),this.quill.setSelection(L,A,"silent"),this.quill.scrollIntoView()}}]),t}(V),j=B,w,y=E.Quill.import("blots/embed");window.katex=P.Z;var k=E.Quill.import("attributors/style/size");k.whitelist=["9px","10px","11px","12px","14px","16px","18px","20px","22px","24px","26px","36px"],E.Quill.register(k,!0),E.Quill.register("modules/clipboard",j,!0);var T=E.Quill.import("delta"),J=function(d){(0,K.Z)(t,d);var a=(0,$.Z)(t);function t(){return(0,M.Z)(this,t),a.apply(this,arguments)}return(0,S.Z)(t,null,[{key:"create",value:function(o){var n=(0,ae.Z)((0,ne.Z)(t),"create",this).call(this);return n.setAttribute("contenteditable","true"),n.classList.add("myspan"),this._addRemovalButton(n),n}},{key:"_addRemovalButton",value:function(o){var n=document.createElement("span");n.innerText="___",n.contentEditable="true",o.appendChild(n)}},{key:"value",value:function(o){return o.childNodes[1].textContent}}]),t}(y);J.blotName="spanEmbed",J.tagName="span",J.className="myclass",E.Quill.register(J);var Ce=rt.ZP.div(w||(w=(0,re.Z)([`
  box-sizing: border-box;
  margin: 0;
  font-variant: tabular-nums;
  list-style: none;
  font-feature-settings: 'tnum';
  width: 100%;
  padding: `,`;
  color: rgba(0, 0, 0, 0.65);

  border: `,`;
  transition: all 0.3s;

  &.is-focus {
    border: `,`;
    border-right-width: 1px !important;
    outline: 0;
  }
  &.not-focus:hover {
    border: dashed 1px #aaaaaa !important;
    border-right-width: 1px !important;
  }

  .ql-editor {
    padding: 0;
    font-size: `,`;
    text-align: `,`;
  }

  .ql-tooltip {
    top: -40px !important;
    left: -10px !important;
    width: 240px;
    transform: none;
  }

  .ql-formats > span,
  .ql-formats > button {
    &:hover {
      background-color: hsla(0, 0%, 84.7%, 0.3);
    }
  }

  .ql-bubble .ql-tooltip {
    z-index: 999;
    box-sizing: border-box;
    padding: 0 2px;
    text-align: left;
    /* white-space: nowrap; */
    background-color: #fff;
    /* border: 1px solid #eaeaea; */
    /* border-radius: 2px; rgb(0 0 0 / 20%); */
    border-radius: 2px;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 20%);
    cursor: pointer;
  }

  .ql-bubble .ql-tooltip.ql-flip .ql-tooltip-arrow {
    display: none;
  }

  .ql-tooltip-arrow {
    display: none;
  }

  pre.ql-container {
    overflow: visible;
  }
  .ql-toolbar {
    box-sizing: border-box;
    font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
    /* border: 1px solid #ccc; */
  }

  .ql-bubble .ql-picker {
    position: relative;
    display: inline-block;
    float: left;
    height: 24px;
    color: #444;
    font-weight: 500;
    font-size: 14px;
    vertical-align: middle;
  }

  .ql-bubble .ql-stroke {
    fill: none;
    stroke: #444;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-width: 2;
  }

  .ql-bubble.ql-toolbar button:hover .ql-stroke,
  .ql-bubble .ql-toolbar button:hover .ql-stroke,
  .ql-bubble.ql-toolbar button:focus .ql-stroke,
  .ql-bubble .ql-toolbar button:focus .ql-stroke,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-bubble.ql-toolbar button:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar button:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar button:focus .ql-stroke-miter,
  .ql-bubble .ql-toolbar button:focus .ql-stroke-miter,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
    stroke: #2196f3;
  }

  .ql-bubble.ql-toolbar button:hover,
  .ql-bubble .ql-toolbar button:hover,
  .ql-bubble.ql-toolbar button:focus,
  .ql-bubble .ql-toolbar button:focus,
  .ql-bubble.ql-toolbar button.ql-active,
  .ql-bubble .ql-toolbar button.ql-active,
  .ql-bubble.ql-toolbar .ql-picker-label:hover,
  .ql-bubble .ql-toolbar .ql-picker-label:hover,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active,
  .ql-bubble.ql-toolbar .ql-picker-item:hover,
  .ql-bubble .ql-toolbar .ql-picker-item:hover,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected {
    color: #2196f3;
  }

  .ql-toolbar.ql-bubble .ql-picker.ql-expanded .ql-picker-options {
    border-color: #ccc;
  }
  .ql-bubble .ql-picker.ql-expanded .ql-picker-options {
    top: 100%;
    z-index: 1;
    display: block;
    margin-top: -1px;
    border: 1px solid #cccccc;
  }
  .ql-toolbar.ql-bubble .ql-picker-options {
    border: 1px solid transparent;
    box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;
  }
  .ql-bubble .ql-picker-options {
    position: absolute;
    display: none;
    min-width: 100%;
    height: 200px;
    padding: 4px 2px;
    overflow-y: auto;
    white-space: nowrap;
    background-color: #fff;
  }

  .ql-bubble .ql-tooltip:not(.ql-flip) .ql-tooltip-arrow {
    top: -6px;
    border-bottom: 6px solid #fff;
  }

  .ql-formats {
    margin: 3px 6px 3px 0px;
  }

  .ql-bubble .ql-toolbar .ql-formats:first-child {
    margin-left: 1px;
  }

  .ql-bubble.ql-toolbar button:hover .ql-fill,
  .ql-bubble .ql-toolbar button:hover .ql-fill,
  .ql-bubble.ql-toolbar button:focus .ql-fill,
  .ql-bubble .ql-toolbar button:focus .ql-fill,
  .ql-bubble.ql-toolbar button.ql-active .ql-fill,
  .ql-bubble .ql-toolbar button.ql-active .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-bubble.ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-bubble.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
  .ql-bubble .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
    fill: #2196f3;
  }
  .ql-bubble .ql-picker.ql-size {
    width: 60px;
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='9px']::before {
    font-size: 9px !important;
    content: '9';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='10px']::before {
    font-size: 10px !important;
    content: '10';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='11px']::before {
    font-size: 11px !important;
    content: '11';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='12px']::before {
    font-size: 12px !important;
    content: '12';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='14px']::before {
    font-size: 14px !important;
    content: '14';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='16px']::before {
    font-size: 16px !important;
    content: '16';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='18px']::before {
    font-size: 18px !important;
    content: '18';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='20px']::before {
    font-size: 20px !important;
    content: '20';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='22px']::before {
    font-size: 22px !important;
    content: '22';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='24px']::before {
    font-size: 24px !important;
    content: '24';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='26px']::before {
    font-size: 26px !important;
    content: '26';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-item[data-value='36px']::before {
    font-size: 36px !important;
    content: '36';
  }
  .ql-bubble .ql-picker.ql-size .ql-picker-label::before,
  .ql-bubble .ql-picker.ql-size .ql-picker-item::before {
    font-size: 14px !important;
    content: '14px';
  }

  .myclass {
    border: 1px solid transparent;
    cursor: pointer;
    :hover {
      border: 1px solid #58a6e7;
    }
  }
`])),function(d){return d.size==="middle"?"6px 11px 4px 11px":d.size==="small"?"2px 2px 0px 5px":"14px 11px"},function(d){return d.hasError?"1px solid #ff4d4f":"1px solid transparent"},function(d){return d.hasError?"1px solid #ff4d4f !important":"1px solid #1890ff !important"},function(d){return d.innerStyle&&d.innerStyle.fontSize},function(d){return d.innerStyle&&d.innerStyle.textAlign});function be(d){return typeof d=="symbol"?"":d&&d.startsWith("<p")?d:"<p>".concat(d,"</p>")}var Y=E.Quill.import("ui/icons");Y.tags='<svg style="width:18px;height:18px;"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="512" height="512"><path d="M851.968 167.936l0 109.568-281.6 0 0 587.776-116.736 0 0-587.776-281.6 0 0-109.568 679.936 0z" p-id="3840"></path></svg>';var U=function(a){var t=a.onChange,e=a.value,o=e===void 0?"":e,n=a.placeholder,c=a.style,s=a.className,h=a.bounds,C=a.excludeToolbars,g=C===void 0?[]:C,Q=(0,x.useState)(!1),L=(0,se.Z)(Q,2),A=L[0],N=L[1],I=(0,x.useState)(!1),G=(0,se.Z)(I,2),vt=G[0],nt=G[1],Ee=(0,x.useRef)(),dt=(0,x.useMemo)(function(){return"quill-".concat((0,q.kb)())},[]),ft=function(R){var Fe=R.replace(/^<p>/,"").replace(/<\/p>$/,"");if(Fe==="<br>"){t("");return}Fe.includes("<p>")?t(R):t(Fe)};function mt(){nt(!0)}return(0,x.useEffect)(function(){var _;setTimeout(function(){return N(!1)},50),(_=Ee.current)===null||_===void 0||_.editor.getModule("toolbar").container.addEventListener("mousedown",function(R){R.preventDefault()})},[]),(0,l.jsxs)(Ce,{style:c,className:ke()(s,{"is-focus":A,"not-focus":!A}),innerStyle:a.innerStyle,size:a.size,children:[vt&&(0,l.jsx)(X,{onClose:function(){return nt(!1)},value:o,onChange:function(R){R&&ft(R),nt(!1)}}),(0,l.jsxs)("div",{id:dt,className:"ql-formats",children:[!g.includes("tags")&&(0,l.jsx)(v.Z,{title:"\u9AD8\u7EA7\u7F16\u8F91",children:(0,l.jsx)("button",{className:"ql-tags"})}),!g.includes("size")&&(0,l.jsx)(v.Z,{title:"\u5B57\u53F7",children:(0,l.jsxs)("select",{className:"ql-size",children:[(0,l.jsx)("option",{value:"12px",children:"12px"}),(0,l.jsx)("option",{value:"14px",children:"14px"}),(0,l.jsx)("option",{value:"16px",children:"16px"}),(0,l.jsx)("option",{value:"18px",children:"18px"}),(0,l.jsx)("option",{value:"20px",children:"20px"}),(0,l.jsx)("option",{value:"22px",children:"22px"}),(0,l.jsx)("option",{value:"24px",children:"24px"}),(0,l.jsx)("option",{value:"36px",children:"36px"})]})}),!g.includes("color")&&(0,l.jsx)(v.Z,{title:"\u5B57\u4F53\u989C\u8272",children:(0,l.jsx)("select",{className:"ql-color"})}),!g.includes("background")&&(0,l.jsx)(v.Z,{title:"\u80CC\u666F\u8272",children:(0,l.jsx)("select",{className:"ql-background"})}),!g.includes("bold")&&(0,l.jsx)(v.Z,{title:"\u52A0\u7C97",children:(0,l.jsx)("button",{className:"ql-bold"})}),!g.includes("italic")&&(0,l.jsx)(v.Z,{title:"\u659C\u4F53",children:(0,l.jsx)("button",{className:"ql-italic"})}),!g.includes("clean")&&(0,l.jsx)(v.Z,{title:"\u6E05\u9664\u6837\u5F0F",children:(0,l.jsx)("button",{className:"ql-clean"})})]}),(0,l.jsx)(Ie(),{theme:"bubble",value:be(o),ref:Ee,preserveWhitespace:!0,onChange:ft,onChangeSelection:function(R,Fe,ht){a.onChangeSelection&&R&&R.index&&a.onChangeSelection(R.index,ht.getText())},style:{textAlign:"center"},bounds:h,onFocus:function(){if(Ee.current.editor.theme.tooltip.show(),o.startsWith("\u9009\u9879")||o.startsWith("\u586B\u7A7A")||o.startsWith("\u8BF7\u8F93\u5165\u9898\u5E72\u8BF4\u660E")||["\u8BF7\u8F93\u5165\u6807\u9898","\u5355\u9009\u9898","\u591A\u9009\u9898","\u4E0B\u62C9\u9898","\u7EA7\u8054\u9898","\u4E0A\u4F20\u6587\u4EF6","\u5355\u884C\u6587\u672C\u9898","\u591A\u884C\u6587\u672C\u9898","\u591A\u9879\u586B\u7A7A","\u7535\u5B50\u7B7E\u540D","\u6A2A\u5411\u586B\u7A7A","\u626B\u7801\u9898","\u6253\u5206\u9898","NPS\u9898","\u77E9\u9635\u586B\u7A7A","\u77E9\u9635\u5355\u9009","\u77E9\u9635\u591A\u9009","\u8868\u683C\u81EA\u589E","\u95EE\u9898\u7EC4","\u6587\u5B57\u63CF\u8FF0","\u5206\u9875","\u5206\u5272\u7EBF","\u6210\u5458","\u90E8\u95E8","\u5BCC\u6587\u672C"].includes(o)){var R;(R=Ee.current)===null||R===void 0||R.editor.setSelection(0,9999,"silent")}N(!0)},scrollingContainer:"body",className:s,onBlur:function(R,Fe,ht){var lt;N(!1),(lt=Ee.current)===null||lt===void 0||lt.editor.theme.tooltip.hide()},placeholder:n,formats:["size","color","width","background","header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video","formula","align","imageBlot","code-block"],modules:(0,x.useMemo)(function(){return{toolbar:{container:"#".concat(dt),handlers:{tags:mt}},clipboard:{matchVisual:!1},syntax:{highlight:function(R){return Se.Z.highlightAuto(R).value}}}},[])})]})},oe=U},11628:function(it,ve,i){"use strict";i.d(ve,{xI:function(){return v},Ge:function(){return M},IE:function(){return re}});var je=i(67294),v=(0,je.createContext)({}),se=v.Provider;function re(){var S=(0,je.useContext)(v);return S.store}function M(){var S=re();return S.flowStore}}}]);
