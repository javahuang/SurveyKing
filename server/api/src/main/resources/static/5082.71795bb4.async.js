(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[5082],{16165:function(ie,_,s){"use strict";var B=s(28991),w=s(96156),M=s(81253),I=s(67294),A=s(94184),D=s.n(A),o=s(63017),u=s(41755),f=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],b=I.forwardRef(function(e,T){var k=e.className,H=e.component,L=e.viewBox,U=e.spin,j=e.rotate,re=e.tabIndex,O=e.onClick,q=e.children,ee=(0,M.Z)(e,f);(0,u.Kp)(Boolean(H||q),"Should have `component` prop or `children`."),(0,u.C3)();var me=I.useContext(o.Z),oe=me.prefixCls,se=oe===void 0?"anticon":oe,ye=D()(se,k),Ae=D()((0,w.Z)({},"".concat(se,"-spin"),!!U)),ve=j?{msTransform:"rotate(".concat(j,"deg)"),transform:"rotate(".concat(j,"deg)")}:void 0,Ce=(0,B.Z)((0,B.Z)({},u.vD),{},{className:Ae,style:ve,viewBox:L});L||delete Ce.viewBox;var be=function(){return H?I.createElement(H,(0,B.Z)({},Ce),q):q?((0,u.Kp)(Boolean(L)||I.Children.count(q)===1&&I.isValidElement(q)&&I.Children.only(q).type==="use","Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),I.createElement("svg",(0,B.Z)((0,B.Z)({},Ce),{},{viewBox:L}),q)):null},Be=re;return Be===void 0&&O&&(Be=-1),I.createElement("span",(0,B.Z)((0,B.Z)({role:"img"},ee),{},{ref:T,tabIndex:Be,onClick:O,className:ye}),be())});b.displayName="AntdIcon",_.Z=b},46533:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="CheckSquareFilled";var o=w.forwardRef(D)},36862:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="CloseSquareFilled";var o=w.forwardRef(D)},91816:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="FolderOpenOutlined";var o=w.forwardRef(D)},63258:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="FolderOutlined";var o=w.forwardRef(D)},41687:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM512 533c-85.5 0-155.6 67.3-160 151.6a8 8 0 008 8.4h48.1c4.2 0 7.8-3.2 8.1-7.4C420 636.1 461.5 597 512 597s92.1 39.1 95.8 88.6c.3 4.2 3.9 7.4 8.1 7.4H664a8 8 0 008-8.4C667.6 600.3 597.5 533 512 533z"}}]},name:"frown",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="FrownOutlined";var o=w.forwardRef(D)},57206:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z"}}]},name:"heart",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="HeartOutlined";var o=w.forwardRef(D)},46870:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 565H360c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"meh",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="MehOutlined";var o=w.forwardRef(D)},54121:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]},name:"minus-circle",theme:"filled"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="MinusCircleFilled";var o=w.forwardRef(D)},81473:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M136 384h56c4.4 0 8-3.6 8-8V200h176c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H196c-37.6 0-68 30.4-68 68v180c0 4.4 3.6 8 8 8zm512-184h176v176c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V196c0-37.6-30.4-68-68-68H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM376 824H200V648c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v180c0 37.6 30.4 68 68 68h180c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm512-184h-56c-4.4 0-8 3.6-8 8v176H648c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h180c37.6 0 68-30.4 68-68V648c0-4.4-3.6-8-8-8zm16-164H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"scan",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="ScanOutlined";var o=w.forwardRef(D)},18613:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="SmileOutlined";var o=w.forwardRef(D)},89366:function(ie,_,s){"use strict";s.d(_,{Z:function(){return o}});var B=s(28991),w=s(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},I=M,A=s(27029),D=function(f,b){return w.createElement(A.Z,(0,B.Z)((0,B.Z)({},f),{},{ref:b,icon:I}))};D.displayName="UserOutlined";var o=w.forwardRef(D)},34442:function(){},31930:function(){},16695:function(){},76898:function(ie,_,s){"use strict";s.d(_,{Ff:function(){return Ve},rF:function(){return Ae},M2:function(){return ye}});var B=s(22385),w=s(94199),M=s(11849),I=s(93224),A=s(77883),D=s(85986),o=s(34792),u=s(48086),f=s(54707),b=s(49914),e=s(9761),T=s(94184),k=s.n(T),H=s(94657),L=s(78338),U=s(67294),j=s(85893);function re($){if($=Number($),$<=0)return"0:0:0";var le=Math.floor($/3600),ce=Math.floor($%3600/60),pe=Math.floor($%3600%60),de="".concat(le).padStart(2,"0"),ue="".concat(ce).padStart(2,"0"),Ee="".concat(pe).padStart(2,"0");return"".concat(de,":").concat(ue,":").concat(Ee)}function O($){return $<=60?"#ff4d4f":$<=180?"#faad14":"#52c41a"}var q=(0,e.Pi)(function(){var $,le,ce=(0,b.H)(),pe=(0,f.Rk)(),de=ce.startTime,ue=(($=ce.project)===null||$===void 0||(le=$.setting.examSetting)===null||le===void 0?void 0:le.maxSubmitMinutes)||0,Ee=(0,U.useState)(0),R=(0,H.Z)(Ee,2),J=R[0],te=R[1],Y=de+ue*60*1e3,ae=(0,U.useRef)();return(0,U.useEffect)(function(){if(ue!==0)return ae.current=window.setInterval(function(){te((Y-new Date().getTime())/1e3)},1e3),function(){clearInterval(ae.current)}},[Y]),(0,U.useEffect)(function(){J<0&&(pe.submit(),clearInterval(ae.current))},[J]),ue===0?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)("div",{style:{position:"absolute",right:0,fontSize:13},children:[(0,j.jsx)(L.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,j.jsx)("span",{style:{marginLeft:3,color:O(J)},children:re(J)})]})}),ee=s(27400),me=s(3980),oe=["size","marked"],se=(0,e.Pi)(function(){var $=(0,f.Rk)(),le=$.lazy,ce=(0,ee.a)().user;return!le||!ce?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)("div",{style:{marginTop:10,textWrap:"wrap",lineHeight:"24px",fontSize:12,color:"#707070"},children:["\u8FDE\u7EED\u505A\u5BF9",(0,j.jsx)(D.Z,{size:"small",style:{width:60,marginInline:4},defaultValue:ce.correctTimes,min:0,max:100,onChange:function(de){de!==null&&me.hi.updateUserInfo({correctTimes:de}).then(function(ue){ue.success&&u.default.success("\u66F4\u65B0\u6210\u529F")})}}),"\u2003\u6B21\uFF0C\u81EA\u52A8\u79FB\u51FA\u9519\u9898/0\u4EE3\u8868\u6C38\u4E0D\u79FB\u51FA"]})}),ye=(0,e.Pi)(function($){var le=(0,f.Rk)(),ce=le.props.answerSheetVisible,pe=$.size,de=$.marked,ue=de===void 0?!0:de,Ee=(0,I.Z)($,oe);return ce?(0,j.jsx)(w.Z,{title:"\u6807\u8BB0",children:(0,j.jsx)("svg",(0,M.Z)((0,M.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:$.size||24,height:$.size||24,className:"marked"},Ee),{},{children:(0,j.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:ue?"#EA4942":"#d8d8d8"})}))}):(0,j.jsx)(j.Fragment,{})}),Ae=(0,e.Pi)(function($){var le,ce,pe,de=$.id,ue=$.name,Ee=(0,f.Rk)(),R=Ee.answerSheet,J=R.find(function(W){return W.id===de}),te=(0,b.H)(),Y=te==null||(le=te.project)===null||le===void 0?void 0:le.isAuthenticated,ae=(ce=te.project)===null||ce===void 0||(pe=ce.setting.examSetting)===null||pe===void 0?void 0:pe.randomSurveyWrong,he=Ee.exerciseMode;return(!he||!Y||de.length<=10)&&!ae?(0,j.jsx)(j.Fragment,{}):J!=null&&J.favorite?(0,j.jsx)(w.Z,{title:ae?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,j.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){Ee.favoriteQuestion({templateId:de,name:ue},!1)},children:(0,j.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,j.jsx)(w.Z,{title:ae?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,j.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){Ee.favoriteQuestion({templateId:de,name:ue})},children:(0,j.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),ve=(0,e.Pi)(function($){var le=(0,f.Rk)(),ce=$.finished,pe=$.id,de=$.marked,ue=$.seqNo,Ee=$.isCorrect;return(0,j.jsxs)("div",{className:k()("answer-sheet-item",{marked:de,finished:ce,correct:Ee===!0,wrong:Ee===!1}),onClick:function(){return le.changePageIndex(pe)},children:[ue,de&&(0,j.jsx)(ye,{style:{position:"absolute",left:20,bottom:18},size:18})]})}),Ce=(0,e.Pi)(function(){var $=(0,f.Rk)(),le=$.answerSheet;return(0,j.jsx)(j.Fragment,{children:le.filter(function(ce){return ce.display!=="none"}).map(function(ce,pe){return(0,U.createElement)(ve,(0,M.Z)((0,M.Z)({},ce),{},{seqNo:pe+1,key:ce.id}))})})}),be=(0,e.Pi)(function(){var $=(0,f.Rk)(),le=$.answerSheet,ce=le.filter(function(ue){return ue.finished}).length,pe=le.filter(function(ue){return!ue.finished}).length,de=le.filter(function(ue){return ue.marked}).length;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,j.jsx)("span",{style:{marginLeft:4},children:ce})]}),(0,j.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,j.jsx)("span",{style:{marginLeft:4},children:pe})]}),(0,j.jsxs)("div",{className:"marked",children:[(0,j.jsx)(ye,{size:18}),"\u6807\u8BB0",(0,j.jsx)("span",{style:{marginLeft:4},children:de})]})]})}),Be=(0,e.Pi)(function(){return(0,j.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,j.jsx)(q,{})]})}),Ve=(0,e.Pi)(function(){var $=(0,f.Rk)(),le=$.props.answerSheetVisible;return le?(0,j.jsxs)("div",{className:"answer-sheet",children:[(0,j.jsx)(Be,{}),(0,j.jsx)("div",{className:"answer-sheet-content",children:(0,j.jsx)(Ce,{})}),(0,j.jsx)("div",{className:"answer-sheet-footer",children:(0,j.jsx)(be,{})}),(0,j.jsx)(se,{})]}):(0,j.jsx)(j.Fragment,{})})},6727:function(ie,_,s){"use strict";var B=s(47673),w=s(4107),M=s(11849),I=s(94657),A=s(93224),D=s(67294),o=s(3980),u=s(40807),f=s(85893),b=["value","onChange","style"],e=function(k){var H=k.value,L=H===void 0?"":H,U=k.onChange,j=k.style,re=j===void 0?{}:j,O=(0,A.Z)(k,b),q=(0,D.useState)(80),ee=(0,I.Z)(q,2),me=ee[0],oe=ee[1],se=(0,D.useRef)(null),ye=(0,o.dD)();return(0,D.useEffect)(function(){if(se.current){for(var Ae=se.current.offsetWidth,ve=Ae+34,Ce=se.current.parentElement;Ce&&!Ce.getAttribute("data-id");)Ce=Ce.parentElement;if(Ce){var be=Ce.offsetWidth;ye&&(be-=40),ve=Math.min(ve,be)}re.width&&(ve=Math.max(ve,parseFloat(re.width.toString()))),oe(Math.max(ve,100))}},[L,re.width]),(0,f.jsxs)("div",{style:{display:"inline-block",verticalAlign:(0,u.ob)()?"top":"unset",marginInline:5},children:[(0,f.jsx)("div",{ref:se,style:{position:"absolute",visibility:"hidden",whiteSpace:"pre",fontSize:"14px",fontFamily:"Arial, sans-serif",padding:"4px 11px",border:"1px solid #d9d9d9",borderRadius:"4px",overflow:"hidden",height:12,lineHeight:"12px"},children:L||" "}),(0,f.jsx)(w.Z,(0,M.Z)((0,M.Z)({},O),{},{value:L,onChange:U,style:(0,M.Z)((0,M.Z)({},re),{},{width:"".concat(me,"px"),margin:0,padding:0})}))]})};_.Z=e},68209:function(ie,_,s){"use strict";s.r(_),s.d(_,{default:function(){return Fn}});var B=s(9715),w=s(55843),M=s(94657),I=s(40807),A=s(78210),D=s(9761),o=s(67294),u=s(54707),f=s(48187),b=s(76898),e=s(85893),T=function(){var n=(0,u.AK)(),t=(0,o.useContext)(I.ZX),i=t.schema;return(0,e.jsxs)("div",{className:n+"-header",children:[(0,e.jsx)("div",{className:n+"-header-title",children:(0,e.jsx)(A.Z,{html:i.title})}),(0,e.jsx)("div",{className:n+"-header-description",children:(0,e.jsx)(A.Z,{html:i.description})})]})},k=function(n){var t=(0,u.AK)();return(0,e.jsx)("div",{className:t+"-body",children:n.children})},H=s(57663),L=s(71577),U=(0,D.Pi)(function(){var r,n,t,i=(0,u.AK)("-footer"),a=(0,o.useContext)(I.ZX),l=a.schema,v=a.loading,c=(0,u.Rk)(),d=c.pagination,m=d.pageSize>1,h=d.current===1,g=d.current===d.pageSize;return(0,e.jsxs)("div",{className:i,children:[g&&(0,e.jsx)("div",{className:i+"-desc",style:{userSelect:"none",WebkitTouchCallout:"none"},children:(0,e.jsx)(A.Z,{html:l==null||(r=l.attribute)===null||r===void 0?void 0:r.suffix})}),(0,e.jsxs)("div",{className:i+"-pagination",children:[m&&!h&&(0,e.jsx)("div",{children:(0,e.jsx)(L.Z,{type:"primary",block:!0,onClick:function(){return c.handlePrev()},children:"\u4E0A\u4E00\u9875"})}),m&&!g&&(0,e.jsx)("div",{children:(0,e.jsx)(L.Z,{type:"primary",block:!0,onClick:function(){return c.handleNext()},children:"\u4E0B\u4E00\u9875"})}),g&&!m&&(0,e.jsx)("div",{style:{width:"100%",padding:"0 20px"},children:(0,e.jsx)(L.Z,{type:"primary",block:!0,onClick:function(){return c.submit()},loading:v,children:(0,e.jsx)(A.Z,{html:((n=l.attribute)===null||n===void 0?void 0:n.submitButton)||"\u63D0\u4EA4"})})}),g&&m&&(0,e.jsx)("div",{children:(0,e.jsx)(L.Z,{type:"primary",onClick:function(){return c.submit()},loading:v,children:(0,e.jsx)(A.Z,{html:((t=l.attribute)===null||t===void 0?void 0:t.submitButton)||"\u63D0\u4EA4"})})}),m&&(0,e.jsxs)("div",{className:i+"-pagination-info",children:["\u7B2C",d.current,"\u9875/\u5171",d.pageSize,"\u9875"]})]})]})}),j=s(11849),re=s(47673),O=s(4107),q=s(43358),ee=s(34041),me=s(29985),oe=s(46842),se=s(64302),ye=s(6727),Ae=function(n){var t=n.dictCode,i=n.value,a=n.onChange,l=n.style,v=n.bordered,c=n.className,d=n.parentValue,m=n.cascaderLevel,h=m===void 0?1:m,g=(0,u.Al)(),p=(0,o.useState)([]),x=(0,M.Z)(p,2),C=x[0],y=x[1],E=(0,u.zE)(function(Z){h&&h>1&&!d||g.onDictSearch&&g.onDictSearch({dictCode:t,searchValue:Z,parentValue:d==null?void 0:d.split("|")[0],cascaderLevel:h}).then(function(S){y(S||[])})},2);return(0,o.useEffect)(function(){h&&h>1&&(d?E(void 0):y([]))},[d,h]),(0,o.useEffect)(function(){!i&&h<=1&&t&&E(void 0),i&&C.length===0&&E(i)},[i]),(0,e.jsx)(ee.Z,{options:C,showSearch:!0,filterOption:function(S,P){var N;return((N=P==null?void 0:P.label)!==null&&N!==void 0?N:"").includes(S)},value:(i==null?void 0:i.split("|")[0])||"",onChange:function(S){var P;if(S===void 0){a(void 0);return}a("".concat(S||"","|").concat(((P=C.find(function(N){return N.value===S}))===null||P===void 0?void 0:P.label)||""))},style:l,bordered:v,className:c,allowClear:!0})},ve=function(n){var t,i=n.onChange,a=n.type,l=n.value,v=n.suffix,c=n.prefix,d=n.style,m=d===void 0?{width:"100%"}:d,h=n.bordered,g=h===void 0?!0:h,p=n.className,x=n.dictCode,C=n.parentValue,y=n.cascaderLevel,E=n.icon,Z=E===void 0?!0:E,S=n.readOnly,P=n.schema,N=n.dateTimeFormat,z=n.onBlur,K=z===void 0?function(){}:z,X=n.placeholder,ne=X===void 0?P==null||(t=P.attribute)===null||t===void 0?void 0:t.placeholder:X,F=n.autoSize;if(a==="horzBlank")return(0,e.jsx)(e.Fragment,{});if(a==="selectDict"&&x)return(0,e.jsx)(Ae,{value:l,onChange:i,dictCode:x,style:m,bordered:g,className:p,parentValue:C,cascaderLevel:y});if(a==="select"&&P!==null&&P!==void 0&&P.dataSource)return(0,e.jsx)(ee.Z,{options:P.dataSource,style:{width:"100%",opacity:"unset"},bordered:g,onChange:i,className:p,value:l});if(a==="date"){var V;return(0,e.jsx)(Ie,{onChange:function(Q){return i(Q)},value:l,style:m,bordered:g,placeholder:ne,readOnly:S,className:p,dateTimeFormat:N||(P==null||(V=P.attribute)===null||V===void 0?void 0:V.dateTimeFormat)})}return a==="mobile"?(0,e.jsx)(O.Z,{prefix:Z?c||(0,e.jsx)(me.Z,{}):void 0,onChange:function(Q){return i(Q.target.value)},value:l,bordered:g,placeholder:ne,className:p,readOnly:S,onBlur:function(Q){K(Q.target.value)}}):a==="idCard"?(0,e.jsx)(O.Z,{prefix:Z?c||(0,e.jsx)(oe.Z,{}):void 0,onChange:function(Q){return i(Q.target.value)},value:l,style:m,bordered:g,placeholder:ne,className:p,readOnly:S,onBlur:function(Q){K(Q.target.value)}}):F?(0,e.jsx)(ye.Z,{onChange:function(Q){return i(Q.target.value)},onBlur:function(Q){return K(Q.target.value)},value:l,suffix:v,prefix:c,style:m,bordered:g,placeholder:ne,className:p,readOnly:S}):a==="number"?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.Z,{onChange:function(Q){Q.target.value===""?i(""):i(Q.target.value)},prefix:c,type:"number",value:l,style:(0,j.Z)((0,j.Z)({},m),{},{paddingLeft:20}),onBlur:function(Q){var xe=Q.target.value;K(xe===""?void 0:parseFloat(xe))},suffix:v,inputMode:"decimal",bordered:g,placeholder:ne,className:p,readOnly:S})}):a==="email"?(0,e.jsx)(O.Z,{prefix:Z?c||(0,e.jsx)(se.Z,{}):void 0,onChange:function(Q){return i(Q.target.value)},value:l,style:m,bordered:g,placeholder:ne,className:p,readOnly:S,onBlur:function(Q){K(Q.target.value)}}):(0,e.jsx)(O.Z,{onChange:function(Q){return i(Q.target.value)},value:l,suffix:v,prefix:c,style:m,bordered:g,placeholder:ne,className:p,readOnly:S,onBlur:function(Q){K(Q.target.value)}})},Ce=s(57254),be=function(n){var t=n.options,i=n.onChange,a=n.value;return(0,e.jsxs)("div",{className:"native-select",children:[(0,e.jsxs)("select",{onChange:function(v){return i(v.target.value)},value:a,className:"native-select__select",children:[(0,e.jsx)("option",{children:"\u8BF7\u9009\u62E9"}),t==null?void 0:t.map(function(l){return(0,e.jsx)("option",{value:l.value,children:l.label},l.value)})]}),(0,e.jsx)("span",{className:"native-select__arrow",children:(0,e.jsx)(Ce.Z,{})})]})};/*!
 * mobileSelect.js
 * (c) 2017-present onlyhom
 * Released under the MIT License.
 */function Be(r,n){return r.getElementsByClassName(n)}function Ve(r){this.mobileSelect,this.wheelsData=r.wheels,this.jsonType=!1,this.cascadeJsonData=[],this.displayJson=[],this.curValue=null,this.curIndexArr=[],this.cascade=!1,this.startY,this.moveEndY,this.moveY,this.oldMoveY,this.offset=0,this.offsetSum=0,this.oversizeBorder,this.curDistance=[],this.clickStatus=!1,this.isPC=!0,this.init(r)}Ve.prototype={constructor:Ve,init:function(n){var t=this;if(t.keyMap=n.keyMap?n.keyMap:{id:"id",value:"value",childs:"childs"},t.checkDataType(),t.renderWheels(t.wheelsData,n.cancelBtnText,n.ensureBtnText,n.container),t.wheel=Be(t.mobileSelect,"wheel"),t.slider=Be(t.mobileSelect,"selectContainer"),t.wheels=t.mobileSelect.querySelector(".wheels"),t.liHeight=t.mobileSelect.querySelector("li").offsetHeight,t.ensureBtn=t.mobileSelect.querySelector(".ensure"),t.cancelBtn=t.mobileSelect.querySelector(".cancel"),t.grayLayer=t.mobileSelect.querySelector(".grayLayer"),t.popUp=t.mobileSelect.querySelector(".content"),t.callback=n.callback||function(){},t.transitionEnd=n.transitionEnd||function(){},t.onShow=n.onShow||function(){},t.onHide=n.onHide||function(){},t.initPosition=n.position||[],t.titleText=n.title||"",t.connector=n.connector||" ",t.triggerDisplayData=typeof n.triggerDisplayData!="undefined"?n.triggerDisplayData:!0,t.setStyle(n),t.setTitle(t.titleText),t.checkIsPC(),t.checkCascade(),t.addListenerAll(),t.cascade&&t.initCascade(),t.initPosition.length<t.slider.length)for(var i=t.slider.length-t.initPosition.length,a=0;a<i;a++)t.initPosition.push(0);t.setCurDistance(t.initPosition),t.cancelBtn.addEventListener("click",function(l){t.hide()}),t.ensureBtn.addEventListener("click",function(l){t.hide(),t.liHeight||(t.liHeight=t.mobileSelect.querySelector("li").offsetHeight);for(var v="",c=0;c<t.wheel.length;c++)c==t.wheel.length-1?v+=t.getInnerHtml(c):v+=t.getInnerHtml(c)+t.connector;t.curIndexArr=t.getIndexArr(),t.curValue=t.getCurValue(),t.callback(t.curIndexArr,t.curValue)}),t.grayLayer.addEventListener("click",function(l){t.hide()}),t.popUp.addEventListener("click",function(l){l.stopPropagation()}),t.fixRowStyle()},setTitle:function(n){var t=this;t.titleText=n,t.mobileSelect.querySelector(".title").innerHTML=t.titleText},setStyle:function(n){var t=this;n.ensureBtnColor&&(t.ensureBtn.style.color=n.ensureBtnColor),n.cancelBtnColor&&(t.cancelBtn.style.color=n.cancelBtnColor),n.titleColor&&(t.title=t.mobileSelect.querySelector(".title"),t.title.style.color=n.titleColor),n.textColor&&(t.panel=t.mobileSelect.querySelector(".panel"),t.panel.style.color=n.textColor),n.titleBgColor&&(t.btnBar=t.mobileSelect.querySelector(".btnBar"),t.btnBar.style.backgroundColor=n.titleBgColor),n.bgColor&&(t.panel=t.mobileSelect.querySelector(".panel"),t.shadowMask=t.mobileSelect.querySelector(".shadowMask"),t.panel.style.backgroundColor=n.bgColor,t.shadowMask.style.background="linear-gradient(to bottom, "+n.bgColor+", rgba(255, 255, 255, 0), "+n.bgColor+")"),isNaN(n.maskOpacity)||(t.grayMask=t.mobileSelect.querySelector(".grayLayer"),t.grayMask.style.background="rgba(0, 0, 0, "+n.maskOpacity+")")},checkIsPC:function(){var n=this,t=navigator.userAgent.toLowerCase(),i=t.match(/ipad/i)=="ipad",a=t.match(/iphone os/i)=="iphone os",l=t.match(/midp/i)=="midp",v=t.match(/rv:1.2.3.4/i)=="rv:1.2.3.4",c=t.match(/ucweb/i)=="ucweb",d=t.match(/android/i)=="android",m=t.match(/windows ce/i)=="windows ce",h=t.match(/windows mobile/i)=="windows mobile";(i||a||l||v||c||d||m||h)&&(n.isPC=!1)},show:function(){this.mobileSelect.classList.add("mobileSelect-show"),typeof this.onShow=="function"&&this.onShow(this)},hide:function(){this.mobileSelect.classList.remove("mobileSelect-show"),typeof this.onHide=="function"&&this.onHide(this)},renderWheels:function(n,t,i,a){var l=this,v=t||"\u53D6\u6D88",c=i||"\u786E\u8BA4";l.mobileSelect=document.createElement("div"),l.mobileSelect.className="mobileSelect",l.mobileSelect.innerHTML='<div class="grayLayer"></div><div class="content"><div class="btnBar"><div class="fixWidth"><div class="cancel">'+v+'</div><div class="title"></div><div class="ensure">'+c+'</div></div></div><div class="panel"><div class="fixWidth"><div class="wheels"></div><div class="selectLine"></div><div class="shadowMask"></div></div></div></div>',a?a.appendChild(l.mobileSelect):document.body.appendChild(l.mobileSelect);for(var d="",m=0;m<n.length;m++){if(d+='<div class="wheel"><ul class="selectContainer">',l.jsonType)for(var h=0;h<n[m].data.length;h++)d+='<li data-id="'+n[m].data[h][l.keyMap.id]+'">'+n[m].data[h][l.keyMap.value]+"</li>";else for(var h=0;h<n[m].data.length;h++)d+="<li>"+n[m].data[h]+"</li>";d+="</ul></div>"}l.mobileSelect.querySelector(".wheels").innerHTML=d},addListenerAll:function(){for(var n=this,t=0;t<n.slider.length;t++)(function(i){n.addListenerWheel(n.wheel[i],i)})(t)},addListenerWheel:function(n,t){var i=this;n.addEventListener("touchstart",function(a){i.touch(a,this.firstChild,t)},!1),n.addEventListener("touchend",function(a){i.touch(a,this.firstChild,t)},!1),n.addEventListener("touchmove",function(a){i.touch(a,this.firstChild,t)},!1),i.isPC&&(n.addEventListener("mousedown",function(a){i.dragClick(a,this.firstChild,t)},!1),n.addEventListener("mousemove",function(a){i.dragClick(a,this.firstChild,t)},!1),n.addEventListener("mouseup",function(a){i.dragClick(a,this.firstChild,t)},!0))},checkDataType:function(){var n=this;typeof n.wheelsData[0].data[0]=="object"&&(n.jsonType=!0)},checkCascade:function(){var n=this;if(n.jsonType){for(var t=n.wheelsData[0].data,i=0;i<t.length;i++)if(n.keyMap.childs in t[i]&&t[i][n.keyMap.childs].length>0){n.cascade=!0,n.cascadeJsonData=n.wheelsData[0].data;break}}else n.cascade=!1},generateArrData:function(n){for(var t=[],i=this.keyMap.id,a=this.keyMap.value,l=0;l<n.length;l++){var v={};v[i]=n[l][this.keyMap.id],v[a]=n[l][this.keyMap.value],t.push(v)}return t},initCascade:function(){var n=this;n.displayJson.push(n.generateArrData(n.cascadeJsonData)),n.initPosition.length>0?(n.initDeepCount=0,n.initCheckArrDeep(n.cascadeJsonData[n.initPosition[0]])):n.checkArrDeep(n.cascadeJsonData[0]),n.reRenderWheels()},initCheckArrDeep:function(n){var t=this;if(n&&t.keyMap.childs in n&&n[t.keyMap.childs].length>0){t.displayJson.push(t.generateArrData(n[t.keyMap.childs])),t.initDeepCount++;var i=n[t.keyMap.childs][t.initPosition[t.initDeepCount]];i?t.initCheckArrDeep(i):t.checkArrDeep(n[t.keyMap.childs][0])}},checkArrDeep:function(n){var t=this;n&&t.keyMap.childs in n&&n[t.keyMap.childs].length>0&&(t.displayJson.push(t.generateArrData(n[t.keyMap.childs])),t.checkArrDeep(n[t.keyMap.childs][0]))},checkRange:function(n,t){for(var i=this,a=i.displayJson.length-1-n,l=0;l<a;l++)i.displayJson.pop();for(var v,l=0;l<=n;l++)l==0?v=i.cascadeJsonData[t[0]]:v=v[i.keyMap.childs][t[l]];i.checkArrDeep(v),i.reRenderWheels(),i.fixRowStyle(),i.setCurDistance(i.resetPosition(n,t))},resetPosition:function(n,t){var i=this,a=t,l;if(i.slider.length>t.length){l=i.slider.length-t.length;for(var v=0;v<l;v++)a.push(0)}else if(i.slider.length<t.length){l=t.length-i.slider.length;for(var v=0;v<l;v++)a.pop()}for(var v=n+1;v<a.length;v++)a[v]=0;return a},reRenderWheels:function(){var n=this;if(n.wheel.length>n.displayJson.length)for(var t=n.wheel.length-n.displayJson.length,i=0;i<t;i++)n.wheels.removeChild(n.wheel[n.wheel.length-1]);for(var i=0;i<n.displayJson.length;i++)(function(l){var v="";if(n.wheel[l]){for(var c=0;c<n.displayJson[l].length;c++)v+='<li data-id="'+n.displayJson[l][c][n.keyMap.id]+'">'+n.displayJson[l][c][n.keyMap.value]+"</li>";n.slider[l].innerHTML=v}else{var d=document.createElement("div");d.className="wheel",v='<ul class="selectContainer">';for(var c=0;c<n.displayJson[l].length;c++)v+='<li data-id="'+n.displayJson[l][c][n.keyMap.id]+'">'+n.displayJson[l][c][n.keyMap.value]+"</li>";v+="</ul>",d.innerHTML=v,n.addListenerWheel(d,l),n.wheels.appendChild(d)}})(i)},updateWheels:function(n){var t=this;if(t.cascade){if(t.cascadeJsonData=n,t.displayJson=[],t.initCascade(),t.initPosition.length<t.slider.length)for(var i=t.slider.length-t.initPosition.length,a=0;a<i;a++)t.initPosition.push(0);t.setCurDistance(t.initPosition),t.fixRowStyle()}},updateWheel:function(n,t){var i=this,a="";if(i.cascade)return console.error("\u7EA7\u8054\u683C\u5F0F\u4E0D\u652F\u6301updateWheel(),\u8BF7\u4F7F\u7528updateWheels()\u66F4\u65B0\u6574\u4E2A\u6570\u636E\u6E90"),!1;if(i.jsonType){for(var l=0;l<t.length;l++)a+='<li data-id="'+t[l][i.keyMap.id]+'">'+t[l][i.keyMap.value]+"</li>";i.wheelsData[n]={data:t}}else{for(var l=0;l<t.length;l++)a+="<li>"+t[l]+"</li>";i.wheelsData[n]=t}i.slider[n].innerHTML=a},fixRowStyle:function(){for(var n=this,t=(100/n.wheel.length).toFixed(2)-2,i=0;i<n.wheel.length;i++);},getIndex:function(n){return Math.round((2*this.liHeight-n)/this.liHeight)},getIndexArr:function(){for(var n=this,t=[],i=0;i<n.curDistance.length;i++)t.push(n.getIndex(n.curDistance[i]));return t},getCurValue:function(){var n=this,t=[],i=n.getIndexArr();if(n.cascade)for(var a=0;a<n.wheel.length;a++)t.push(n.displayJson[a][i[a]]);else if(n.jsonType)for(var a=0;a<n.curDistance.length;a++)t.push(n.wheelsData[a].data[n.getIndex(n.curDistance[a])]);else for(var a=0;a<n.curDistance.length;a++)t.push(n.getInnerHtml(a));return t},getValue:function(){return this.curValue},calcDistance:function(n){return 2*this.liHeight-n*this.liHeight},setCurDistance:function(n){for(var t=this,i=[],a=0;a<t.slider.length;a++)i.push(t.calcDistance(n[a])),t.movePosition(t.slider[a],i[a]);t.curDistance=i},fixPosition:function(n){return-(this.getIndex(n)-2)*this.liHeight},movePosition:function(n,t){n.style.webkitTransform="translate3d(0,"+t+"px, 0)",n.style.transform="translate3d(0,"+t+"px, 0)"},locatePosition:function(n,t){var i=this;this.curDistance[n]=this.calcDistance(t),this.movePosition(this.slider[n],this.curDistance[n]),i.cascade&&i.checkRange(n,i.getIndexArr())},updateCurDistance:function(n,t){n.style.transform?this.curDistance[t]=parseInt(n.style.transform.split(",")[1]):this.curDistance[t]=parseInt(n.style.webkitTransform.split(",")[1])},getDistance:function(n){return n.style.transform?parseInt(n.style.transform.split(",")[1]):parseInt(n.style.webkitTransform.split(",")[1])},getInnerHtml:function(n){var t=this,i=t.slider[n].getElementsByTagName("li").length,a=t.getIndex(t.curDistance[n]);return a>=i?a=i-1:a<0&&(a=0),t.slider[n].getElementsByTagName("li")[a].innerHTML},touch:function(n,t,i){var a=this;switch(n=n||window.event,n.type){case"touchstart":a.startY=n.touches[0].clientY,a.startY=parseInt(a.startY),a.oldMoveY=a.startY;break;case"touchend":if(a.moveEndY=parseInt(n.changedTouches[0].clientY),a.offsetSum=a.moveEndY-a.startY,a.oversizeBorder=-(t.getElementsByTagName("li").length-3)*a.liHeight,a.offsetSum==0){var l=parseInt((document.documentElement.clientHeight-a.moveEndY)/40);if(l!=2){var v=l-2,c=a.curDistance[i]+v*a.liHeight;c<=2*a.liHeight&&c>=a.oversizeBorder&&(a.curDistance[i]=c,a.movePosition(t,a.curDistance[i]),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i))}}else a.updateCurDistance(t,i),a.curDistance[i]=a.fixPosition(a.curDistance[i]),a.movePosition(t,a.curDistance[i]),a.curDistance[i]+a.offsetSum>2*a.liHeight?(a.curDistance[i]=2*a.liHeight,setTimeout(function(){a.movePosition(t,a.curDistance[i])},100)):a.curDistance[i]+a.offsetSum<a.oversizeBorder&&(a.curDistance[i]=a.oversizeBorder,setTimeout(function(){a.movePosition(t,a.curDistance[i])},100)),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i);a.cascade&&a.checkRange(i,a.getIndexArr());break;case"touchmove":n.preventDefault(),a.moveY=n.touches[0].clientY,a.offset=a.moveY-a.oldMoveY,a.updateCurDistance(t,i),a.curDistance[i]=a.curDistance[i]+a.offset,a.movePosition(t,a.curDistance[i]),a.oldMoveY=a.moveY;break}},dragClick:function(n,t,i){var a=this;switch(n=n||window.event,n.type){case"mousedown":a.startY=n.clientY,a.oldMoveY=a.startY,a.clickStatus=!0;break;case"mouseup":if(a.moveEndY=n.clientY,a.offsetSum=a.moveEndY-a.startY,a.oversizeBorder=-(t.getElementsByTagName("li").length-3)*a.liHeight,a.offsetSum==0){var l=parseInt((document.documentElement.clientHeight-a.moveEndY)/40);if(l!=2){var v=l-2,c=a.curDistance[i]+v*a.liHeight;c<=2*a.liHeight&&c>=a.oversizeBorder&&(a.curDistance[i]=c,a.movePosition(t,a.curDistance[i]),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i))}}else a.updateCurDistance(t,i),a.curDistance[i]=a.fixPosition(a.curDistance[i]),a.movePosition(t,a.curDistance[i]),a.curDistance[i]+a.offsetSum>2*a.liHeight?(a.curDistance[i]=2*a.liHeight,setTimeout(function(){a.movePosition(t,a.curDistance[i])},100)):a.curDistance[i]+a.offsetSum<a.oversizeBorder&&(a.curDistance[i]=a.oversizeBorder,setTimeout(function(){a.movePosition(t,a.curDistance[i])},100)),a.transitionEnd(a.getIndexArr(),a.getCurValue(),i);a.clickStatus=!1,a.cascade&&a.checkRange(i,a.getIndexArr());break;case"mousemove":n.preventDefault(),a.clickStatus&&(a.moveY=n.clientY,a.offset=a.moveY-a.oldMoveY,a.updateCurDistance(t,i),a.curDistance[i]=a.curDistance[i]+a.offset,a.movePosition(t,a.curDistance[i]),a.oldMoveY=a.moveY);break}}};var $=s(83279),le=s(16165),ce=function(){return _jsx("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:_jsx("path",{d:"M237.136842 668.294737c-5.389474-5.389474-10.778947-10.778947-10.778947-16.168421V355.705263v-21.557895-26.947368-32.336842c0-10.778947 0-21.557895 5.389473-26.947369l-5.389473-5.389473-80.842106 32.336842c-26.947368 5.389474-59.284211 16.168421-91.621052 26.947368l5.389474 21.557895 107.789473-16.168421v334.147368c0 10.778947-5.389474 16.168421-10.778947 21.557895-5.389474 5.389474-16.168421 10.778947-32.336842 10.778948-10.778947 0-32.336842 5.389474-53.894737 5.389473v16.168421H323.368421v-21.557894c-21.557895 0-37.726316 0-48.505263-5.389474-21.557895 10.778947-32.336842 5.389474-37.726316 0z m414.989474-43.11579c0-10.778947 5.389474-16.168421 5.389473-26.947368l-16.168421-5.389474c-5.389474 16.168421-10.778947 26.947368-16.168421 32.336842-5.389474 5.389474-10.778947 16.168421-16.168421 16.168421-5.389474 5.389474-10.778947 5.389474-16.168421 5.389474h-16.168421l-172.463158 5.389474 107.789474-102.4c16.168421-16.168421 32.336842-26.947368 48.505263-43.11579 16.168421-16.168421 26.947368-26.947368 37.726316-43.115789 10.778947-16.168421 21.557895-32.336842 26.947368-48.505263 5.389474-16.168421 10.778947-37.726316 10.778948-53.894737 0-21.557895-5.389474-37.726316-10.778948-53.894737-10.778947-16.168421-21.557895-26.947368-32.336842-37.726316-16.168421-10.778947-32.336842-16.168421-48.505263-21.557895-21.557895-5.389474-37.726316-10.778947-59.28421-10.778947-21.557895 0-48.505263 5.389474-70.063158 10.778947-16.168421 10.778947-37.726316 21.557895-59.284211 32.336843 0 16.168421 0 32.336842 5.389474 48.505263v53.894737h21.557895c0-16.168421 5.389474-26.947368 10.778947-37.726316l16.168421-32.336842c5.389474-10.778947 16.168421-16.168421 26.947368-21.557895 10.778947-5.389474 21.557895-5.389474 37.726316-5.389474 10.778947 0 26.947368 0 37.726316 5.389474 10.778947 5.389474 21.557895 10.778947 32.336842 21.557895 10.778947 10.778947 16.168421 16.168421 21.557895 32.336842 5.389474 10.778947 5.389474 26.947368 5.389474 37.726316 0 16.168421-5.389474 32.336842-10.778948 48.505263-5.389474 16.168421-16.168421 32.336842-26.947368 48.505263-5.389474 10.778947-21.557895 26.947368-32.336842 43.115789l-48.505264 48.505264-123.957894 123.957894 5.389473 5.389474h301.810527v-21.557895c0-10.778947 5.389474-16.168421 5.389473-26.947368 5.389474-10.778947 10.778947-21.557895 10.778948-26.947369z m307.2-80.842105c-5.389474-10.778947-16.168421-26.947368-21.557895-32.336842-10.778947-10.778947-21.557895-21.557895-37.726316-26.947368-10.778947-5.389474-26.947368-10.778947-43.115789-16.168421 16.168421-10.778947 32.336842-26.947368 43.115789-37.726316 10.778947-10.778947 21.557895-21.557895 26.947369-32.336842 5.389474-10.778947 10.778947-21.557895 10.778947-26.947369v-16.168421c0-16.168421-5.389474-32.336842-10.778947-48.505263-10.778947-10.778947-21.557895-26.947368-32.336842-32.336842-10.778947-10.778947-26.947368-16.168421-43.11579-21.557895-16.168421-5.389474-32.336842-5.389474-48.505263-5.389474-26.947368 0-48.505263 5.389474-70.063158 10.778948s-43.115789 16.168421-64.673684 32.336842v91.621053h21.557895c0-16.168421 5.389474-26.947368 10.778947-37.726316 5.389474-10.778947 10.778947-21.557895 21.557895-26.947369 10.778947-5.389474 16.168421-16.168421 26.947368-16.168421 10.778947-5.389474 21.557895-5.389474 37.726316-5.389473 10.778947 0 21.557895 0 32.336842 5.389473 10.778947 5.389474 21.557895 10.778947 26.947368 16.168421 5.389474 5.389474 16.168421 16.168421 21.557895 26.947369 5.389474 10.778947 5.389474 21.557895 5.389474 32.336842 0 21.557895-5.389474 37.726316-16.168421 53.894737-10.778947 16.168421-21.557895 26.947368-37.726316 37.726316-16.168421 10.778947-32.336842 16.168421-48.505263 21.557894-16.168421 5.389474-37.726316 10.778947-53.894737 16.168421l5.389474 26.947369c5.389474-5.389474 16.168421-5.389474 26.947368-5.389474h26.947369c16.168421 0 32.336842 0 48.505263 5.389474 16.168421 5.389474 26.947368 10.778947 37.726315 21.557894 10.778947 10.778947 16.168421 21.557895 26.947369 32.336843 5.389474 16.168421 10.778947 32.336842 10.778947 48.505263 0 16.168421 0 32.336842-5.389473 48.505263-5.389474 16.168421-10.778947 26.947368-21.557895 37.726316-10.778947 10.778947-21.557895 21.557895-37.726316 26.947368-16.168421 5.389474-32.336842 10.778947-48.505263 10.778947-21.557895 0-37.726316-5.389474-59.284211-10.778947-21.557895-10.778947-37.726316-21.557895-48.505263-32.336842-10.778947 0-16.168421 5.389474-26.947368 16.168421-5.389474-16.168421-5.389474-5.389474-5.389474 5.389474s5.389474 16.168421 10.778947 21.557894c5.389474 5.389474 10.778947 10.778947 21.557895 16.168422 10.778947 5.389474 16.168421 5.389474 26.947369 5.389473h32.336842c26.947368 0 53.894737-5.389474 86.231579-10.778947 26.947368-10.778947 53.894737-21.557895 75.452631-37.726316 21.557895-16.168421 43.115789-37.726316 53.894737-64.673684 16.168421-26.947368 21.557895-53.894737 21.557895-86.231579-5.389474-10.778947-10.778947-26.947368-16.168421-37.726316z",fill:"#bfbfbf"})})},pe=function(n){return _jsx(Icon,_objectSpread({component:ce},n))},de=function(){return(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M682.666667 213.333333a21.333333 21.333333 0 0 1 20.992 17.493334l0.341333 3.84v42.666666H810.666667a42.666667 42.666667 0 0 1 42.666666 42.666667v469.333333a42.666667 42.666667 0 0 1-42.666666 42.666667H256a42.666667 42.666667 0 0 1-42.666667-42.666667v-469.333333a42.666667 42.666667 0 0 1 42.666667-42.666667h106.666667v-42.666666a21.333333 21.333333 0 0 1 42.325333-3.84l0.341333 3.84v42.666666h256v-42.666666A21.333333 21.333333 0 0 1 682.666667 213.333333z m128 234.666667H256v341.333333h554.666667v-341.333333z m-448-128H256v85.333333h554.666667v-85.333333h-106.666667V341.333333a21.333333 21.333333 0 0 1-42.325333 3.84L661.333333 341.333333v-21.333333h-256V341.333333a21.333333 21.333333 0 0 1-42.325333 3.84L362.666667 341.333333v-21.333333z",fill:"#bfbfbf","p-id":"4605"})})},ue=function(n){return(0,e.jsx)(le.Z,(0,j.Z)({component:de},n))},Ee=function(){return _jsx("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:_jsx("path",{d:"M510.61572266 166.37561035A368.95935059 368.95935059 0 0 0 141.70581055 535.33496094a368.95935059 368.95935059 0 0 0 368.95935059 368.95935059 368.95935059 368.95935059 0 0 0 368.95935058-368.95935059A368.95935059 368.95935059 0 0 0 510.61572266 166.42504883z m0 688.77685547a319.86694336 319.86694336 0 0 1 0-639.63500977 319.86694336 319.86694336 0 0 1 0 639.63500977z m159.93347168-295.24658204h-159.93347168V400.02185058a12.35961914 12.35961914 0 0 0-12.26074219-12.31018066h-24.62036133a12.35961914 12.35961914 0 0 0-12.26074219 12.31018067v196.76513671a12.35961914 12.35961914 0 0 0 12.26074219 12.31018067h196.76513672a12.35961914 12.35961914 0 0 0 12.35961914-12.31018066v-24.57092286a12.26074219 12.26074219 0 0 0-12.35961914-12.31018066z","p-id":"9722",fill:"#bfbfbf"})})},R=function(n){return _jsx(Icon,_objectSpread({component:Ee},n))},J=function(){return _jsx("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:_jsx("path",{d:"M566.272 217.088c-11.264-7.168-24.576-11.264-41.984-11.264-4.096 0-8.192 0-12.288 1.024-45.056 7.168-74.752 48.128-93.184 87.04-8.192 18.432-15.36 37.888-22.528 56.32-3.072 9.216-7.168 17.408-10.24 26.624 0 1.024-5.12 18.432-6.144 18.432h-46.08c-6.144 0-11.264 5.12-11.264 11.264 0 6.144 5.12 11.264 11.264 11.264h39.936l-22.528 96.256c-22.528 107.52-53.248 230.4-60.416 251.904-7.168 22.528-17.408 33.792-31.744 33.792-3.072 0-5.12-1.024-7.168-2.048-2.048-1.024-3.072-3.072-3.072-5.12s1.024-5.12 4.096-9.216c3.072-4.096 4.096-9.216 4.096-13.312 0-8.192-3.072-15.36-8.192-20.48-6.144-5.12-12.288-7.168-19.456-7.168s-14.336 3.072-20.48 8.192c-1.024 7.168-4.096 14.336-4.096 23.552 0 12.288 5.12 22.528 15.36 31.744 10.24 9.216 23.552 13.312 40.96 13.312 27.648 0 52.224-12.288 70.656-33.792 11.264-13.312 19.456-28.672 26.624-45.056 22.528-50.176 34.816-105.472 48.128-158.72 13.312-54.272 25.6-108.544 36.864-162.816h44.032c6.144 0 11.264-5.12 11.264-11.264 0-6.144-5.12-11.264-11.264-11.264h-40.96c22.528-84.992 48.128-143.36 53.248-151.552 8.192-14.336 17.408-21.504 27.648-21.504 4.096 0 6.144 1.024 7.168 3.072 1.024 2.048 2.048 4.096 2.048 5.12 0 1.024-1.024 4.096-4.096 9.216-3.072 5.12-4.096 10.24-4.096 15.36 0 7.168 3.072 13.312 8.192 18.432s12.288 8.192 19.456 8.192 14.336-3.072 19.456-8.192 8.192-12.288 8.192-21.504c-1.024-17.408-6.144-28.672-17.408-35.84z m204.8 258.048c16.384 0 48.128-13.312 48.128-56.32s-30.72-45.056-40.96-45.056c-18.432 0-37.888 13.312-54.272 41.984-16.384 28.672-34.816 61.44-34.816 61.44h-1.024c-4.096-20.48-7.168-36.864-9.216-45.056-3.072-17.408-23.552-56.32-66.56-56.32s-81.92 24.576-81.92 24.576c-7.168 4.096-12.288 12.288-12.288 21.504 0 14.336 11.264 25.6 25.6 25.6 4.096 0 8.192-1.024 11.264-3.072 0 0 32.768-18.432 38.912 0 2.048 5.12 4.096 11.264 6.144 17.408 8.192 27.648 15.36 60.416 22.528 90.112L596.992 593.92s-31.744-11.264-48.128-11.264-48.128 13.312-48.128 56.32 30.72 45.056 40.96 45.056c18.432 0 37.888-13.312 54.272-41.984 16.384-28.672 34.816-61.44 34.816-61.44 5.12 26.624 10.24 48.128 13.312 56.32 10.24 30.72 34.816 48.128 67.584 48.128 0 0 33.792 0 72.704-22.528 9.216-4.096 16.384-13.312 16.384-23.552 0-14.336-11.264-25.6-25.6-25.6-4.096 0-8.192 1.024-11.264 3.072 0 0-27.648 15.36-37.888 3.072-7.168-13.312-12.288-30.72-17.408-52.224-4.096-19.456-9.216-41.984-13.312-63.488l28.672-40.96c-1.024 1.024 30.72 12.288 47.104 12.288z","p-id":"1938",fill:"#bfbfbf"})})},te=function(n){return _jsx(Icon,_objectSpread({component:J},n))},Y=s(27484),ae=s.n(Y),he=s(1615),W=s(10285),Pe=s.n(W);ae().extend(Pe());function fe(r,n){for(var t=[],i=r;i<=n;i++)t.push("".concat(i).padStart(2,"0"));return t}function Le(r,n){var t=31;return[1,3,5,7,8,10,12].indexOf(n)!==-1?t=31:(t=30,n===2&&r%4==0?t=29:n===2&&r%4!=0&&(t=28)),t}var Ie=function(n){var t=n.onChange,i=n.value,a=i===void 0?"":i,l=n.suffix,v=n.readOnly,c=n.dateTimeFormat,d=c===void 0?"YYYY-MM-DD":c,m=n.style,h=n.bordered,g=n.className,p=(0,o.useRef)(0),x=(0,o.useState)([]),C=(0,M.Z)(x,2),y=C[0],E=C[1],Z=(0,o.useState)(a.split(/-|\s|:/)),S=(0,M.Z)(Z,2),P=S[0],N=S[1];(0,o.useEffect)(function(){var F=ae()(ae()(a||void 0).format(d),d),V=fe(1900,2100),G=fe(1,12),Q=fe(1,Le(F.year(),F.month())),xe=fe(0,23),je=fe(0,59),Fe=fe(0,59),Se=[],Ze=0;d.includes("YYYY")&&(y.push(V),Se.push(F.year()+""),Ze++),d.includes("MM")&&(y.push(G),Se.push(String(F.month()+1).padStart(2,"0")),Ze++),d.includes("DD")&&(y.push(Q),Se.push(String(F.date()).padStart(2,"0")),Ze++),p.current=Ze,d.includes("HH")&&(y.push(xe),Se.push(String(F.hour()).padStart(2,"0")),Ze++),d.includes("mm")&&(y.push(je),Se.push(String(F.minute()).padStart(2,"0")),Ze++),d.includes("ss")&&(y.push(Fe),Se.push(String(F.second()).padStart(2,"0")),Ze++),E((0,$.Z)(y)),N(Se)},[]);var z=(0,o.useState)(!1),K=(0,M.Z)(z,2),X=K[0],ne=K[1];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(O.Z,{prefix:(0,e.jsx)(ue,{}),readOnly:!0,value:a,style:m,suffix:l,bordered:h,className:g,onClick:function(){v||ne(!0)}}),(0,e.jsx)(he.cW,{columns:y.map(function(F){return F.map(function(V){return{label:V,value:V}})}),value:P,title:"\u65E5\u671F\u9009\u62E9",visible:X,onClose:function(){ne(!1)},mouseWheel:!0,onSelect:function(V){d.includes("MM")&&d.includes("DD")&&(y.splice(2,1,fe(1,Le(parseInt(V[0]),parseInt(V[1])))),E((0,$.Z)(y)))},onConfirm:function(V){var G=ae()(V.join("-"),d.replaceAll(/\s|:/g,"-"));t(G.format(d))}})]})};function et(){var r=new Date;return["".concat(r.getHours()).padStart(2,"0"),"".concat(r.getMinutes()).padStart(2,"0"),"".concat(r.getSeconds()).padStart(2,"0")]}var it=function(n){var t=n.onChange,i=n.value,a=i===void 0?"":i,l=n.readOnly,v=useRef(),c=useRef();return useEffect(function(){var d=et(),m=_slicedToArray(d,3),h=m[0],g=m[1],p=m[2],x=a.split(":"),C=_slicedToArray(x,3),y=C[0],E=C[1],Z=C[2],S=generateSerialNums(0,23),P=generateSerialNums(0,59),N=generateSerialNums(0,59);v.current=new MobileSelect({title:"\u65F6\u95F4\u9009\u62E9",position:[S.indexOf(y||h),P.indexOf(E||g),N.indexOf(Z||p)],wheels:[{data:S},{data:P},{data:N}],onShow:function(){document.getElementsByTagName("body")[0].style.overflow="hidden"},onHide:function(){document.getElementsByTagName("body")[0].style.overflow=null},callback:function(K,X){t(X.join(":"))}})},[]),_jsx("div",{ref:c,children:_jsx(_Input,{prefix:_jsx(TimeIcon,{}),readOnly:!0,value:a,onClick:function(){l||v.current.show()}})})},tt=s(17672),Je=s(94184),Te=s.n(Je),Ye=s(73935),Ke=function(n){var t=n.visible,i=n.title,a=n.children,l=n.okContent,v=n.cancelContent,c=n.height,d=n.onCancel;return Ye.createPortal((0,e.jsxs)("div",{className:Te()("mobileDrawer",{"mobileDrawer-show":t}),children:[(0,e.jsx)("div",{className:"grayLayer",onClick:d}),(0,e.jsxs)("div",{className:"content",children:[(0,e.jsx)("div",{className:"btnBar",children:(0,e.jsxs)("div",{className:"fixWidth",children:[(0,e.jsx)("div",{className:"cancel",children:v}),i&&(0,e.jsx)("div",{className:"title",children:i}),(0,e.jsx)("div",{className:"ensure",style:{width:80,display:"flex",justifyContent:"space-between"},children:l})]})}),(0,e.jsx)("div",{className:"panel",children:(0,e.jsx)("div",{className:"fixWidth",children:(0,e.jsx)("div",{className:"wheels",style:{height:c},children:a})})})]})]}),document.body)},Ge=function(n){var t=n.onChange,i=(0,o.useRef)(null),a=(0,o.useRef)(),l=(0,o.useRef)(),v=(0,o.useState)(!1),c=(0,M.Z)(v,2),d=c[0],m=c[1];return(0,o.useEffect)(function(){var h=i.current;if(h){var g,p=new tt.Z(i.current,{});a.current=p;var x=Math.max(window.devicePixelRatio||1,1);h.width=h.offsetWidth*x,h.height=h.offsetHeight*x,(g=h.getContext("2d"))===null||g===void 0||g.scale(x,x)}},[]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)("span",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#aaa",visibility:l.current?"hidden":"visible"},onClick:function(){return m(!0)},children:"\u70B9\u51FB\u7B7E\u540D"}),(0,e.jsx)("img",{src:l.current||void 0,style:{display:"block",width:"100%",height:100,border:l.current?"1px solid #E3E3E3":0},onClick:function(){return m(!0)}}),(0,e.jsx)(Ke,{visible:d,title:"\u7535\u5B50\u7B7E\u540D",okContent:(0,e.jsx)("div",{style:{userSelect:"none"},onClick:function(){var g,p;if((g=a.current)!==null&&g!==void 0&&g.isEmpty()){he.FN.show({content:"\u7B7E\u540D\u4E0D\u80FD\u4E3A\u7A7A",position:"top",maskStyle:{zIndex:1e4}});return}l.current=(p=a.current)===null||p===void 0?void 0:p.toDataURL(),m(!1),t(a.current.toDataURL())},children:"\u786E\u8BA4\u7B7E\u540D"}),cancelContent:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:80},children:[(0,e.jsx)("div",{onClick:function(){return m(!1)},children:"\u53D6\u6D88"}),(0,e.jsx)("div",{style:{color:"#1e83d3"},onClick:function(){var g;return(g=a.current)===null||g===void 0?void 0:g.clear()},children:"\u91CD\u7F6E"})]}),children:(0,e.jsx)("canvas",{ref:i,style:{width:"100%",height:400,touchAction:"none",userSelect:"none"}})})]})};function Ue(r){return r?r.substring(0,r.lastIndexOf("[")):"\u70B9\u51FB\u9009\u62E9"}var _e=function(n){var t=n.onChange,i=n.value,a=n.mapMove,l=a===void 0?!1:a,v=n.optionId,c=(0,o.useRef)(null),d=(0,o.useRef)(),m=(0,o.useRef)(),h=(0,o.useRef)(),g=(0,o.useRef)(),p=(0,o.useState)(function(){if(!!i){var F=i.match(/\[(\d+\.\d+),\s*(\d+\.\d+)\]/);if(F&&F.length>2)return[parseFloat(F[1]),parseFloat(F[2])]}}),x=(0,M.Z)(p,2),C=x[0],y=x[1],E=(0,o.useState)(function(){return Ue(i)}),Z=(0,M.Z)(E,2),S=Z[0],P=Z[1],N=(0,o.useState)(!1),z=(0,M.Z)(N,2),K=z[0],X=z[1],ne=(0,o.useCallback)(function(F){m.current.getLocation(F,function(V,G){if(V==="complete"&&G.geocodes.length){var Q=G.geocodes[0].location;h.current.start(Q)}else console.error("\u6839\u636E\u5730\u5740\u67E5\u8BE2\u4F4D\u7F6E\u5931\u8D25")})},[]);return(0,o.useEffect)(function(){window["localMap".concat(v)]=function(){initAMapUI(),AMapUI.loadUI(["misc/PositionPicker"],function(xe){var je=new AMap.Map("map-".concat(v),{zoom:16,center:C,dragEnable:l,zoomEnable:l});if(d.current=je,l){var Fe=new xe({mode:"dragMarker",map:je});Fe.on("success",function(Qe){P(Qe.address),y([Qe.position.lng,Qe.position.lat])}),C?Fe.start(C):Fe.start(),je.panBy(0,1),h.current=Fe}var Se=new AMap.Geocoder({city:"010"});m.current=Se;var Ze=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});g.current=Ze,Ze.getCurrentPosition(function(Qe,He){Qe=="complete"?l?positionPicker.start(He.position):(je.setCenter(He.position),P(He.formattedAddress),y([He.position.lng,He.position.lat])):console.error(He)})})},window._AMapSecurityConfig={securityJsCode:"c92dc7c089f25dcd7944094d3ee1a959"};var F="https://webapi.amap.com/maps?v=1.4.15&key=fce3217057b3ace0b2128cb5d1696c87&callback=localMap".concat(v,"&plugin=AMap.Geocoder,AMap.Geolocation"),V=document.createElement("script");V.src=F,document.head.appendChild(V);var G="https://webapi.amap.com/ui/1.1/main-async.js",Q=document.createElement("script");Q.src=G,document.head.appendChild(Q)},[]),(0,e.jsxs)("div",{style:{position:"relative"},children:[(0,e.jsx)(O.Z.TextArea,{readOnly:!0,value:Ue(i),onClick:function(){return X(!0)}}),(0,e.jsxs)(Ke,{visible:K,height:450,onCancel:function(){X(!1)},okContent:(0,e.jsx)("div",{style:{userSelect:"none"},onClick:function(){C&&t("".concat(S,"[").concat(C[0],", ").concat(C[1],"]")),X(!1)},children:"\u786E\u8BA4\u9009\u62E9"}),cancelContent:(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:200},children:[!l&&(0,e.jsx)(L.Z,{type:"link",children:"\u83B7\u53D6\u4F4D\u7F6E"}),l&&(0,e.jsx)(O.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u8981\u641C\u7D22\u7684\u5730\u70B9\u3001\u8857\u9053",size:"small",onSearch:function(V){return ne(V)}})]}),children:[(0,e.jsx)("div",{ref:c,id:"map-".concat(v),style:{height:390}}),(0,e.jsx)("div",{style:{height:50,borderTop:"1px solid #b0b0b0",background:"#fff",padding:"12px 18px"},children:S})]})]})},We=function(n){var t,i=n.optionId,a=n.questionId,l=n.checked,v=n.checkedCount,c=n.quota,d=n.statEnabled,m=(0,u.Al)(),h=m.statistics,g=h==null?void 0:h.questionStatistics[a],p=((g==null?void 0:g.optionStatistics.reduce(function(E,Z){return E+Z.count},0))||0)+v,x=(g==null||(t=g.optionStatistics.find(function(E){return E.optionId===i}))===null||t===void 0?void 0:t.count)||0,C=l?x+1:x,y="".concat(Math.floor(C/p*1e3)/10,"%");return!d&&c===void 0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("span",{className:"vote-info",children:[c&&(0,e.jsxs)("span",{className:"vote-info-quota",style:{color:c-x>0?"#1890ff":"#949aae"},children:["(\u4F59",c-x,")"]}),d&&v>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("span",{className:"vote-info-cnt",children:[C,"\u7968"]}),(0,e.jsx)("span",{className:"vote-info-percent ",children:y}),(0,e.jsx)("div",{className:"vote-info-bar",children:(0,e.jsx)("div",{className:"vote-info-bar-fill",style:{width:y}})})]})]})},ct=s(22385),we=s(94199),rt=s(93224),nt=s(49914),Ne=s(78338);function st(r){if(r=Number(r),r<=0)return"0:0:0";var n=Math.floor(r/3600),t=Math.floor(r%3600/60),i=Math.floor(r%3600%60),a="".concat(n).padStart(2,"0"),l="".concat(t).padStart(2,"0"),v="".concat(i).padStart(2,"0");return"".concat(a,":").concat(l,":").concat(v)}function dt(r){return r<=60?"#ff4d4f":r<=180?"#faad14":"#52c41a"}var Ct=(0,D.Pi)(function(){var r,n,t=(0,nt.H)(),i=(0,u.Rk)(),a=t.startTime,l=((r=t.project)===null||r===void 0||(n=r.setting.examSetting)===null||n===void 0?void 0:n.maxSubmitMinutes)||0,v=(0,o.useState)(0),c=(0,M.Z)(v,2),d=c[0],m=c[1],h=a+l*60*1e3,g=(0,o.useRef)();return(0,o.useEffect)(function(){if(l!==0)return g.current=window.setInterval(function(){m((h-new Date().getTime())/1e3)},1e3),function(){clearInterval(g.current)}},[h]),(0,o.useEffect)(function(){d<0&&(i.submit(),clearInterval(g.current))},[d]),l===0?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{style:{position:"absolute",right:10,fontSize:13},children:[(0,e.jsx)(Ne.Z,{style:{marginRight:5,color:"#1890ff"}}),"\u5269\u4F59:",(0,e.jsx)("span",{style:{marginLeft:3,color:dt(d)},children:st(d)})]})}),pt=["size","marked"],Xe=(0,D.Pi)(function(r){var n=r.size,t=r.marked,i=t===void 0?!0:t,a=(0,rt.Z)(r,pt),l=(0,u.Rk)(),v=l.props.answerSheetVisible;return v?(0,e.jsx)("svg",(0,j.Z)((0,j.Z)({viewBox:"0 0 1024 1024",version:"1.1",width:r.size||24,height:r.size||24,className:"marked"},a),{},{children:(0,e.jsx)("path",{d:"M662.04973405 329.56834123l108.40905238-142.19888693c4.22372932-5.63163908 4.22372932-11.26327817 1.40790978-18.30282702-2.81581955-5.63163908-8.44745863-9.8553684-15.48700748-9.85536841H218.55815604c-9.8553684 0-16.89491725 7.03954885-16.89491725 16.89491726V867.38987389c0 9.8553684 7.03954885 16.89491725 16.89491725 16.89491726s16.89491725-7.03954885 16.89491726-16.89491726V487.25423562h522.33452519c7.03954885 0 12.67118794-4.22372932 15.48700749-9.8553684s1.40790977-12.67118794-2.81581955-18.30282703l-108.40905238-129.52769896z",fill:i?"#EA4942":"#d8d8d8","p-id":"1287"})})):(0,e.jsx)(e.Fragment,{})}),bt=(0,D.Pi)(function(r){var n,t,i,a=r.id,l=r.name,v=(0,u.Rk)(),c=v.answerSheet,d=c.find(function(x){return x.id===a}),m=(0,nt.H)(),h=m==null||(n=m.project)===null||n===void 0?void 0:n.isAuthenticated,g=(t=m.project)===null||t===void 0||(i=t.setting.examSetting)===null||i===void 0?void 0:i.randomSurveyWrong,p=v.exerciseMode;return(!p||!h||a.length<=10)&&!g?(0,e.jsx)(e.Fragment,{}):d!=null&&d.favorite?(0,e.jsx)(we.Z,{title:g?"\u79FB\u51FA\u9519\u9898":"\u79FB\u51FA\u6536\u85CF",children:(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"24",height:"24",style:{float:"right"},onClick:function(){v.favoriteQuestion({templateId:a,name:l},!1)},children:(0,e.jsx)("path",{d:"M484.266667 272.021333l6.634666 6.72c5.973333 5.973333 13.013333 12.842667 21.098667 20.629334l9.194667-8.917334c7.253333-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.525333 76.629333 202.794667 2.133333 281.194667L512 853.333333 204.672 553.237333c-74.474667-78.421333-73.770667-203.690667 2.133333-281.216a193.28 193.28 0 0 1 277.44 0z","p-id":"2829",fill:"#d81e06"})})}):(0,e.jsx)(we.Z,{title:g?"\u6DFB\u52A0\u5230\u9519\u9898":"\u6536\u85CF",children:(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:24,height:24,style:{float:"right"},onClick:function(){v.favoriteQuestion({templateId:a,name:l})},children:(0,e.jsx)("path",{d:"M484.267 272.021l6.634 6.72c5.974 5.974 13.014 12.843 21.099 20.63l9.195-8.918c7.253-7.04 13.44-13.184 18.56-18.432a193.28 193.28 0 0 1 277.44 0c75.904 77.526 76.629 202.795 2.133 281.195L512 853.333 204.672 553.237c-74.475-78.421-73.77-203.69 2.133-281.216a193.28 193.28 0 0 1 277.44 0z m293.162 232.15c46.272-53.76 44.182-136.15-5.973-187.371a129.28 129.28 0 0 0-185.984 0l-15.125 15.104a1687.253 1687.253 0 0 1-4.395 4.31L512 388.18l-49.28-47.445-13.227-12.928-10.965-11.008a129.28 129.28 0 0 0-186.005 0c-51.456 52.565-52.31 137.963-2.198 191.573L512 763.883l261.675-255.531 3.754-4.181z","p-id":"2674",fill:"#d8d8d8"})})})}),ut=(0,D.Pi)(function(r){var n=(0,u.Rk)(),t=r.finished,i=r.marked,a=r.seqNo,l=r.id;return(0,e.jsxs)("div",{className:Te()("answer-sheet-item",{marked:i,finished:t}),onClick:function(){return n.changePageIndex(l)},children:[a,i&&(0,e.jsx)(Xe,{style:{position:"absolute",left:32,bottom:32},size:24})]})}),$e=(0,D.Pi)(function(){var r=(0,u.Rk)(),n=r.answerSheet;return(0,e.jsx)(e.Fragment,{children:n.filter(function(t){return t.display!=="none"}).map(function(t,i){return(0,o.createElement)(ut,(0,j.Z)((0,j.Z)({},t),{},{seqNo:i+1,key:t.id}))})})}),ze=(0,D.Pi)(function(){var r=(0,u.Rk)(),n=r.answerSheet,t=n.filter(function(l){return l.finished}).length,i=n.filter(function(l){return!l.finished}).length,a=n.filter(function(l){return l.marked}).length;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"finished",children:["\u5DF2\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:t})]}),(0,e.jsxs)("div",{className:"unFinished",children:["\u672A\u7B54",(0,e.jsx)("span",{style:{marginLeft:4},children:i})]}),(0,e.jsxs)("div",{className:"marked",children:[(0,e.jsx)(Xe,{size:18}),"\u6807\u8BB0",(0,e.jsx)("span",{style:{marginLeft:4},children:a})]})]})}),Me=(0,D.Pi)(function(){var r=(0,u.Rk)(),n=r.props.answerSheetVisible,t=r.answerSheetVisible;return n?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginRight:12},onClick:function(){r.answerSheetVisible=!0},children:[(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M800 96c70.4 0 128 57.6 128 128v576c0 70.4-57.6 128-128 128H224c-70.4 0-128-57.6-128-128V224c0-70.4 57.6-128 128-128h576z m0 64H224c-35.2 0-60.8 25.6-64 60.8V800c0 35.2 25.6 60.8 60.8 64H800c35.2 0 60.8-25.6 64-60.8V224c0-35.2-25.6-60.8-60.8-64H800zM416 640c35.2 0 64 28.8 64 64s-28.8 64-64 64H288c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m320 0c35.2 0 64 28.8 64 64s-28.8 64-64 64h-128c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m-320-192c35.2 0 64 28.8 64 64s-28.8 64-64 64H288c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m320 0c35.2 0 64 28.8 64 64s-28.8 64-64 64h-128c-35.2 0-64-28.8-64-64s28.8-64 64-64h128zM416 256c35.2 0 64 28.8 64 64s-28.8 64-64 64H288c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z m320 0c35.2 0 64 28.8 64 64s-28.8 64-64 64h-128c-35.2 0-64-28.8-64-64s28.8-64 64-64h128z",fill:"#8c8c8c"})}),"\u7B54\u9898\u5361"]}),(0,e.jsx)(he.GI,{visible:t,onMaskClick:function(){r.answerSheetVisible=!1},className:"adm-answer-sheet",bodyStyle:{borderTopLeftRadius:"8px",borderTopRightRadius:"8px",overflowY:"auto"},children:(0,e.jsxs)("div",{className:"answer-sheet",children:[(0,e.jsxs)("div",{className:"answer-sheet-header",children:["\u7B54\u9898\u5361",(0,e.jsx)(Ct,{})]}),(0,e.jsx)("div",{className:"answer-sheet-content",children:(0,e.jsx)($e,{})}),(0,e.jsx)("div",{className:"answer-sheet-footer",children:(0,e.jsx)(ze,{})})]})})]}):(0,e.jsx)(e.Fragment,{})}),vt=(0,D.Pi)(function(r){var n=(0,u.Rk)(),t=n.reviewAnswer[r.qId];return t&&!t.visible?(0,e.jsx)(L.Z,{block:!0,ghost:!0,className:"review-answer-btn",style:{marginTop:10},onClick:function(){t.visible=!0},children:"\u67E5\u770B\u7B54\u6848"}):(0,e.jsx)(e.Fragment,{})}),St=s(88983),ke=s(66253),lt=s(43061),qe=s(38819),ot=s(12968),at=s(62462),Et=s(91220),ht=s(15020);function Oe(r,n,t){if(!r)return"";var i=RegExp("_{3,}","g"),a=r.matchAll(i),l=[],v=(0,Et.Z)(a),c;try{for(v.s();!(c=v.n()).done;){var d=c.value,m=d.index,h=d.index+d[0].length;l.push([m,h])}}catch(y){v.e(y)}finally{v.f()}if(l.length===0)return r;for(var g=l[0][0]===0?"":r.substring(0,l[0][0]),p=function(E){var Z,S,P=l[E],N=l[E+1],z=r.substring(P[0],P[1]),K=r.substring(P[1],N?N[0]:r.length),X=n[E];if(!X)return"break";var ne=t?t[X.id]:"";if(((Z=X.attribute)===null||Z===void 0?void 0:Z.dataType)==="select"){var F,V;ne=(F=X.dataSource)===null||F===void 0||(V=F.find(function(xe){return xe.value===ne}))===null||V===void 0?void 0:V.label}else if(((S=X.attribute)===null||S===void 0?void 0:S.dataType)==="selectDict"){var G,Q;ne=(G=ne)===null||G===void 0||(Q=G.split("|"))===null||Q===void 0?void 0:Q[1]}g+='<input data-id="'.concat(n[E].id,`" value='`).concat(ne||"",`'  class="horz-blank" style="width:`).concat(12*z.length,'px">'),g+=K},x=0;x<l.length;x++){var C=p(x);if(C==="break")break}return g}function Mt(r,n){return r.name===n?!0:r.parent?Mt(r.parent,n):!1}var ft=(0,D.Pi)(function(r){var n=r.content,t=r.children,i=r.value,a=i===void 0?{}:i,l=r.onChange,v=r.onBlur,c=r.schema,d=r.isTitle,m=(0,u.Rk)(),h=m.reviewAnswer[c.id];function g(p,x){var C,y;if(a[p]===x)return a;a[p]=x;var E=t.find(function(N){return N.id===p}),Z=E==null||(C=E.attribute)===null||C===void 0?void 0:C.cascaderLevel,S=E==null||(y=E.attribute)===null||y===void 0?void 0:y.dictCode;S&&Z&&t.filter(function(N){var z;return((z=N.attribute)===null||z===void 0?void 0:z.dictCode)===S&&N.attribute.cascaderLevel&&N.attribute.cascaderLevel>Z}).forEach(function(N){delete a[N.id]}),(x===""||x===void 0)&&delete a[p];var P=(0,j.Z)({},a);if(Object.keys(P).length!==0)return P}return(0,e.jsx)("div",{className:"pe-view",style:{lineHeight:1.5},onClick:function(x){x.preventDefault(),x.stopPropagation()},children:(0,ht.ZP)((0,I.qZ)(n,t.filter(function(p){var x,C;return d?(x=p.attribute)===null||x===void 0?void 0:x.fieldInTitle:!((C=p.attribute)!==null&&C!==void 0&&C.fieldInTitle)})),{replace:function(x){if(x.name==="img"){var C=x.attribs.width;return(0,e.jsx)(at.Z,{width:C?parseFloat(C):void 0,src:x.attribs.src,style:{cursor:"zoom-in"},fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==",preview:{mask:!1}})}var y=x.attribs;if(!!y){var E=y["data-id"];if(E){var Z,S,P,N,z,K=(0,ht.e_)(y),X=Mt(x,"tr");X&&K.style&&(K.style=(0,j.Z)((0,j.Z)({},K.style),{},{width:"96%"}));var ne=t.findIndex(function(Qe){return Qe.id===E}),F=t[ne],V=(Z=t[ne-1])===null||Z===void 0?void 0:Z.id,G=a[V],Q=(F==null||(S=F.attribute)===null||S===void 0?void 0:S.dataType)||"text",xe=F==null||(P=F.attribute)===null||P===void 0?void 0:P.dictCode,je=F==null||(N=F.attribute)===null||N===void 0?void 0:N.dateTimeFormat,Fe=(z=F.attribute)===null||z===void 0?void 0:z.cascaderLevel,Se=h==null?void 0:h[E].isCorrect,Ze=Te()(K.className,{selected:h&&h.visible,"is-correct":h&&h.visible&&Se},"horz-blank");return(0,e.jsx)(ve,(0,j.Z)((0,j.Z)({},K),{},{type:Q,value:a[E],parentValue:G,cascaderLevel:Fe,onChange:function(He){return l(g(E,He))},onBlur:function(He){return v(g(E,He))},dictCode:xe,dateTimeFormat:je,schema:F,bordered:!1,icon:!1,className:Ze,autoSize:!0}))}}}})})}),Rt=(0,D.Pi)(function(r){var n=r.qId,t=r.schema,i=r.value,a=r.onChange,l=r.onBlur,v=r.disabled,c=t.id,d=t.title,m=t.attribute,h=m===void 0?{}:m,g=(0,u.Rk)(),p=g.reviewAnswer[n],x=p==null?void 0:p[c].selected,C=p==null?void 0:p[c].isCorrect,y=h.dataType;return p&&p.visible&&(x||C)?(0,e.jsxs)("label",{className:Te()("ant-radio-wrapper ant-radio-wrapper-in-form-item option-item",{selected:x,"is-correct":C}),onClick:function(){v||r.onChange()},children:[(0,e.jsxs)("span",{children:[!C&&(0,e.jsx)(lt.Z,{style:{color:"#ff6d56",marginRight:10}}),C&&(0,e.jsx)(qe.Z,{style:{color:"#00bf6f",marginRight:10}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(A.Z,{html:d})})]}):(0,e.jsx)(ke.ZP,{value:c,className:"option-item",onClick:function(){v||r.onChange(i)},disabled:v,children:y==="horzBlank"&&t.children?(0,e.jsx)(ft,{schema:t,content:d,children:t.children,value:typeof i=="boolean"?{}:i,onBlur:l,onChange:a}):(0,e.jsx)(A.Z,{html:d})})}),Tn=s(63185),Dt=s(9676),Ft=s(36862),Tt=s(46533),Lt=(0,D.Pi)(function(r){var n=r.qId,t=r.schema,i=r.checked,a=r.onChange,l=r.value,v=r.onBlur,c=r.disabled,d=t.id,m=t.title,h=t.attribute,g=h===void 0?{}:h,p=(0,u.Rk)(),x=p.reviewAnswer[n],C=x==null?void 0:x[d].selected,y=x==null?void 0:x[d].isCorrect,E=g.dataType;return x&&x.visible&&(C||y)?(0,e.jsxs)("label",{className:Te()("ant-checkbox-wrapper ant-checkbox-wrapper-in-form-item option-item",{selected:C,"is-correct":y}),onClick:function(){return a(!i)},children:[(0,e.jsxs)("span",{children:[!y&&(0,e.jsx)(Ft.Z,{size:17,style:{color:"#ff6d56",marginRight:10,fontSize:17}}),y&&(0,e.jsx)(Tt.Z,{size:17,style:{color:"#00bf6f",marginRight:10,fontSize:17}})]}),(0,e.jsx)("div",{className:"option-label-wrap",children:(0,e.jsx)(A.Z,{html:m})})]}):(0,e.jsx)(Dt.Z,{value:d,checked:i,onChange:function(S){return a(S.target.checked)},className:"option-item",disabled:c,children:E==="horzBlank"&&t.children?(0,e.jsx)(ft,{schema:t,content:m,children:t.children,value:typeof l=="boolean"?{}:l,onBlur:v,onChange:function(S){return a(!0,S)}}):(0,e.jsx)(A.Z,{html:m})})}),mt=(0,D.Pi)(function(r){var n,t=r.schema,i=r.value,a=r.onChange,l=r.qId,v=r.onBlur,c=(0,u.AK)("-body-question"),d=t.id,m=t.attribute,h=t.title,g=m==null?void 0:m.suffix,p=m==null?void 0:m.dataType,x=m==null?void 0:m.readOnly,C=(0,u.Rk)(),y=C.reviewAnswer[l],E=y==null?void 0:y[d].isCorrect;return y&&y.visible?(0,e.jsxs)("span",{style:{position:"relative",width:"100%"},children:[!E&&(0,e.jsx)(lt.Z,{style:{color:"#ff6d56",marginRight:10,position:"absolute",left:4,top:3,zIndex:1}}),E&&(0,e.jsx)(qe.Z,{style:{color:"#00bf6f",marginRight:10,position:"absolute",left:4,top:3,zIndex:1}}),(0,e.jsx)(ve,{type:p,value:i[d],className:Te()("selected",{"is-correct":E}),onChange:function(S){return a(S)},onBlur:v,style:{paddingLeft:20},schema:t,suffix:g&&(0,e.jsx)("span",{className:c+"-option-suffix",children:(0,e.jsx)(A.Z,{html:g})})})]}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ve,{type:p,value:i[d],dictCode:(n=t.attribute)===null||n===void 0?void 0:n.dictCode,onChange:function(S){return a(S)},onBlur:v,readOnly:x,schema:t,suffix:g&&(0,e.jsx)("span",{className:c+"-option-suffix",children:(0,e.jsx)(A.Z,{html:g})})})})}),zt=(0,D.Pi)(function(r){var n,t,i=r.qId,a=r.schema,l=(0,u.Rk)(),v=l.reviewAnswer[i],c=(n=a.children)===null||n===void 0?void 0:n.map(function(g){var p;return(p=g.attribute)===null||p===void 0?void 0:p.examCorrectAnswer}).filter(function(g){return g}).join(";"),d=c&&["FillBlank","MultipleBlank","Textarea"].includes(a.type),m=function(){return d?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u6B63\u786E\u7B54\u6848\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",style:{marginBottom:10},children:c})]}):(0,e.jsx)(e.Fragment,{})},h=function(){var p;if((p=a.attribute)!==null&&p!==void 0&&p.examAnalysis){var x;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"answer-analysis-title",children:"\u7B54\u6848\u89E3\u6790\uFF1A"}),(0,e.jsx)("div",{className:"answer-analysis-content",children:(0,e.jsx)(A.Z,{html:(x=a.attribute)===null||x===void 0?void 0:x.examAnalysis})})]})}return(0,e.jsx)(e.Fragment,{})};return v&&v.visible&&((t=a.attribute)!==null&&t!==void 0&&t.examAnalysis||d)?(0,e.jsxs)("div",{className:"answer-analysis",children:[m(),h()]}):(0,e.jsx)(e.Fragment,{})}),Ht=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M839 73.9c-1.2-2.4-3.7-9.8-7.4-9.8s-11.1 8.6-13.5 12.3l-13.5 12.3c-7.4-6.1-35.6-23.4-43-23.4-11.1 0-104.6 113.2-118.1 129.1l-60.2 68.8-30.7 38.1-43.1-83.6-50.4-100.8c-4.9-9.8-8.6-22.1-22.1-22.1-7.3 0-9.8 3.6-13.5 9.8-3.7 4.9-3.7 4.9-11.1 8.6-8.6 0-12.3 0-19.7 6.2-6.2-4.9-11.1-11.1-19.7-11.1-3.7 0-6.2 1.2-8.6 3.6l-8.6 7.4c-4.8 6.1-15.9 17.2-15.9 25.8 0 11 9.8 31.9 13.5 41.8l90.9 250.8-14.7 17.3c-66.4 79.8-159.8 190.5-210.2 279l-29.5 50.4c-8.6 14.7-29.5 44.3-29.5 60.2 0 3.7 3.8 6.2 6.2 8.6 8.6 7.3 3.6 14.7 1.2 24.5-2.5 7.4-3.7 12.3-3.7 19.7 0 13.5 11.1 27 18.5 38.1 7.3 12.2 9.9 24.5 25.8 24.5 17.2 0 49.2-3.6 63.9-14.7l243.4-377.5 115.6 178.5c6.1 9.8 30.7 54.1 46.7 54.1 14.8 0 38.1-16.1 40.6-30.8-2.6-4.9-6.2-12.3-6.2-17.2 0-7.5 19.7-14.9 24.6-19.7v-9.9c8.6-3.7 13.5-8.6 17.2-17.2l-95.9-205.3-38.2-76.3 13.6-19.7 174.6-225.9c11-14.8 28.3-38.1 41.8-50.4 4.9-5 13.5-12.3 13.5-19.7 0-8.6-19.7-22.1-24.6-34.4z","p-id":"14396",fill:"#fe6c56"})}),Kt=(0,e.jsx)("svg",{viewBox:"0 0 1024 1024",width:"24",height:"24",children:(0,e.jsx)("path",{d:"M389.7 604.3L198.2 447.4c-3.7-3-9.1-3-12.8 0.1l-73.3 61.4c-4.4 3.7-4.8 10.3-0.9 14.5l324.1 344.3c5 5.3 13.8 3.6 16.6-3.1 64.4-160.1 244.3-452.8 463.2-664.7 3-2.9 3.9-7.2 2.3-11l-13.7-33c-2.4-5.8-9.5-8-14.7-4.5-243.2 157.7-419.4 353.5-499.3 452.9z",fill:"#fe6c56","p-id":"4913"})}),_t=(0,D.Pi)(function(r){var n,t=r.schema,i=r.seqNo,a=i===void 0?0:i,l=(0,u.Rk)(),v=l.props.correctAnswerVisible,c=l.props.questionScore,d=(n=t.attribute)===null||n===void 0?void 0:n.examAnswerMode;return!v||!c||d==="none"?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)("div",{className:"exam-score-info",children:[a>0&&(0,e.jsxs)("span",{children:["\u7B2C",a,"\u9898"]}),c[t.id]?(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("span",{className:"score",children:["\u5F97\u5206:",c[t.id],"\u5206"]}),Kt]}):Ht]})}),Qt=(0,D.Pi)(function(r){var n,t=r.schema,i=r.title,a=r.onBlur,l=r.onChange,v=t.type,c=((n=t.children)===null||n===void 0?void 0:n.filter(function(h){var g;return(g=h.attribute)===null||g===void 0?void 0:g.fieldInTitle}))||[],d=(0,D.U$)(),m=d.value;return v!=="HorzBlank"||c.length===0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(A.Z,{html:i})}):(0,e.jsx)(ft,{schema:t,children:c,content:i,onChange:l,onBlur:a,value:m})});function Ut(r){var n,t=r.schema,i=r.required,a=r.error,l=r.replaceTitle,v=r.index,c=r.onBlur,d=r.onChange,m=r.onFocus,h=r.seqNo,g=(0,o.useContext)(I.ZX),p=g.questionNumber,x=(0,u.AK)("-body-question"),C=(0,o.useState)(),y=(0,M.Z)(C,2),E=y[0],Z=y[1],S=(0,u.Rk)(),P=(n=S.answerSheet.find(function(K){return K.id===t.id}))===null||n===void 0?void 0:n.marked,N=t.description;(0,o.useEffect)(function(){if(E){var K,X;(K=document.querySelector("[data-id='".concat(t.id,"']")))===null||K===void 0||K.classList.remove("ant-form-item-has-error"),(X=document.querySelector("[data-id='".concat(t.id,"']")))===null||X===void 0||X.querySelectorAll("[data-id]").forEach(function(je){je.classList.remove("ant-form-item-has-error")})}if(a.length>0){var ne,F=a[0].split("^"),V=(0,M.Z)(F,2),G=V[0],Q=V[1],xe;Q?(xe=document.querySelector("[data-id='".concat(G,"']")),Z(Q)):(xe=document.querySelector("[data-id='".concat(t.id,"']")),Z(G)),(ne=xe)===null||ne===void 0||ne.classList.add("ant-form-item-has-error")}else E&&Z(void 0)},[a]);var z=function(){return E?(0,e.jsx)("span",{className:"question-tag error animated",children:(0,e.jsx)("span",{children:E})}):(0,e.jsx)(e.Fragment,{})};return(0,e.jsxs)("div",{className:x,children:[(0,e.jsx)(_t,{schema:t,seqNo:h}),(0,e.jsxs)(w.Z.Item,{label:(0,e.jsxs)("h2",{className:x+"-header",children:[i&&(0,e.jsx)("span",{className:"question-required",children:"*"}),(0,e.jsx)("span",{className:"question-seq",children:p&&h?h:""}),(0,e.jsx)(Qt,{schema:t,title:l||t.title,onBlur:c,onChange:d,onFocus:m}),z(),h&&(0,e.jsx)(Xe,{marked:P,onClick:function(){S.markQuestion(t.id,!P)}}),h&&(0,e.jsx)(b.rF,{id:t.id,name:t.title}),N&&(0,e.jsx)("div",{className:"question-desc",children:(0,e.jsx)(A.Z,{html:N})})]}),labelCol:{span:24},wrapperCol:{span:24},children:[r.children,(0,e.jsx)(vt,{qId:t.id}),(0,e.jsx)(zt,{qId:t.id,schema:t})]})]})}(0,f.eC)("Question",(0,D.Pi)(Ut),"antdMobile");function Wt(r){var n=r.schema,t=r.index,i=r.seqNo,a=(0,u.AK)("-body-questionSet"),l=(0,o.useContext)(I.ZX),v=l.questionNumber;return(0,e.jsxs)("div",{className:a,children:[(0,e.jsxs)("div",{className:a+"-title",children:[v&&(0,e.jsx)("span",{className:a+"-title-seq",children:(0,e.jsx)("b",{children:v&&i?i:""})}),(0,e.jsx)(A.Z,{html:n.title})]}),r.children,(0,e.jsx)("div",{className:a+"-splitLine"})]})}(0,f.eC)("QuestionSet",Wt,"antdMobile");var Ln=s(84305),$t=s(88182),Vt=s(82925),Jt=s(3024),Yt=(0,D.Pi)(function(){var r=(0,o.useContext)(I.ZX),n=r.progressBar,t=(0,u.AK)(),i=(0,u.Rk)(),a=i.progress;return n?(0,e.jsx)(Jt.Z,{enabled:!0,top:0,innerActiveClass:"fixed",children:(0,e.jsx)("div",{className:t+"-progress",children:(0,e.jsx)("div",{className:"progress-bar s-prog-wait",children:(0,e.jsx)("div",{className:"progress-done  s-prog-done",style:{width:"".concat(a*100,"%")}})})})}):(0,e.jsx)(e.Fragment,{})});function Gt(r){var n=r.headerVisible,t=r.footerVisible,i=r.schema,a=(0,u.AK)(),l=(0,u.Al)(),v=function(){var d,m=(d=i.attribute)===null||d===void 0?void 0:d.headerImage;if(m)return(0,e.jsx)("img",{src:"/api/public/preview/".concat(m),style:{maxWidth:"100%"}})};return(0,e.jsxs)("div",{className:Te()(a,{preview:l.isPreview}),children:[(0,e.jsx)(Yt,{}),(0,e.jsx)("div",{className:a+"-banner",children:v()}),n&&(0,e.jsx)(T,{}),(0,e.jsx)($t.ZP,{locale:Vt.Z,children:(0,e.jsx)(k,{children:r.children})}),t&&(0,e.jsx)(U,{}),(0,e.jsx)(Me,{})]})}(0,f.eC)("Survey",Gt,"antdMobile");var zn=s(13062),Re=s(71230),Hn=s(89032),De=s(15746),ge=s(32059);function Xt(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children;function v(c,d){t((0,ge.Z)({},d,c))}return(0,e.jsx)("div",{children:l==null?void 0:l.map(function(c){var d=c.id,m=c.title,h=c.attribute,g=h===void 0?{}:h,p=g.mapMove;return(0,e.jsxs)(Re.Z,{gutter:[10,0],"data-id":d,children:[m&&(0,e.jsx)(De.Z,{span:24},c.id),(0,e.jsx)(De.Z,{span:24,children:(0,e.jsx)(_e,{optionId:d,onChange:function(C){return v(C,d)},value:a[d],mapMove:p})})]},d)})})}(0,f.RM)("Address",Xt,"antdMobile");var Kn=s(43185),gt=s(32620),_n=s(34792),Zt=s(48086),xt=s(39428),Bt=s(3182),qt=s(81473);function en(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=r.readOnly,v=n.children,c=v===void 0?[]:v,d=(0,u.Al)(),m=function(){var h=(0,Bt.Z)((0,xt.Z)().mark(function g(p){var x,C,y,E;return(0,xt.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:x=p.onSuccess,C=p.onError,y=p.file,E=p.onProgress,d.onUpload&&d.onUpload({file:y,fileType:6},function(P){E&&E({percent:P.loaded/P.total*100})}).then(function(P){if(P.success&&x&&(x(P.data),P.data.content&&t((0,ge.Z)({},c[0].id,P.data.content))),!P.success&&C){var N=new Error("Some error");C({event:N})}});case 2:case"end":return S.stop()}},g)}));return function(p){return h.apply(this,arguments)}}();return(0,e.jsx)("div",{children:c==null?void 0:c.map(function(h){var g=h.id,p=h.attribute,x=p===void 0?{}:p,C=x.cameraOnly;return(0,e.jsx)(O.Z,{placeholder:"\u70B9\u51FB\u8BC6\u522B\u6761\u7801",value:a[g],addonAfter:(0,e.jsx)(gt.Z,{capture:C?"environment":void 0,disabled:l,maxCount:1,accept:"image/*",beforeUpload:function(E){return x!=null&&x.maxFileSize&&E.size>x.maxFileSize*1024*1024?(Zt.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(x.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),gt.Z.LIST_IGNORE):!0},customRequest:m,showUploadList:!1,children:(0,e.jsx)(qt.Z,{})},g)})})})}(0,f.RM)("Barcode",en,"antdMobile");function jt(r,n){var t;return((t=r.children)===null||t===void 0?void 0:t.reduce(function(i,a,l){if(l===0)i.push(r.dataSource||[]);else{var v=r.children[l-1].id,c=n[v];if(c){var d;i.push(((d=i.slice(-1)[0].find(function(m){return m.value===c}))===null||d===void 0?void 0:d.children)||[])}}return i},[]))||[]}function tn(r){var n,t=r.schema,i=r.onChange,a=r.value,l=a===void 0?{}:a,v=(0,o.useState)(r.value||{}),c=(0,M.Z)(v,2),d=c[0],m=c[1],h=(0,o.useState)(jt(t,l)),g=(0,M.Z)(h,2),p=g[0],x=g[1];(0,o.useEffect)(function(){if(Object.keys(d).length>0){var y=jt(t,d);x(y)}},[d,t]);var C=function(E,Z,S){var P,N={};(P=t.children)===null||P===void 0||P.forEach(function(z,K){S>K?N[z.id]=d[z.id]:S===K&&(N[E]=Z)}),m(N),jt(t,N).filter(function(z){return z.length>0}).length===Object.values(N).filter(function(z){return z&&z!=="\u8BF7\u9009\u62E9"}).length?i(N):i(void 0)};return(0,e.jsx)(Re.Z,{gutter:[10,10],children:(n=t.children)===null||n===void 0?void 0:n.map(function(y,E){return(0,e.jsx)(De.Z,{span:24,children:(0,e.jsx)(be,{options:p[E]||[],value:d[y.id]||"",onChange:function(S){return C(y.id,S,E)}},y.id)},y.id)})})}(0,f.RM)("Cascader",tn,"antdMobile");function nn(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=r.onBlur,v=n.children,c=n.attribute,d=24/((c==null?void 0:c.columns)||1),m=(0,u.AK)("-body-question"),h=!!(c!=null&&c.statEnabled),g=(0,u.Rk)(),p=(0,u.Al)(),x=g.hiddenOption[n.id]||[];(0,o.useEffect)(function(){var y=Object.keys(a),E=!1;y.forEach(function(Z){x.includes(Z)&&(E=!0,delete a[Z])}),E&&t((0,j.Z)({},a))},[x]);function C(y,E,Z){E?a[y]=Z||!0:delete a[y],t((0,j.Z)({},a))}return(0,o.useEffect)(function(){v==null||v.forEach(function(y){var E;(E=y.attribute)!==null&&E!==void 0&&E.defaultChecked&&Object.keys(a).length===0&&t((0,ge.Z)({},y.id,!0))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(Re.Z,{children:v==null?void 0:v.filter(function(y){return!x.includes(y.id)}).map(function(y){var E,Z,S,P,N=y.id,z=(E=y.attribute)===null||E===void 0?void 0:E.dataType,K=(Z=y.attribute)===null||Z===void 0?void 0:Z.suffix,X=(S=y.attribute)===null||S===void 0?void 0:S.readOnly,ne=(P=y.attribute)===null||P===void 0?void 0:P.quota,F=!1;if(ne!==void 0){var V,G=p.statistics,Q=G==null?void 0:G.questionStatistics[n.id],xe=(Q==null||(V=Q.optionStatistics.find(function(Fe){return Fe.optionId===N}))===null||V===void 0?void 0:V.count)||0,je=ne-xe;je<=0&&(F=!0)}return(0,e.jsxs)(De.Z,{span:d,className:m+"-option","data-id":N,children:[(0,e.jsx)(Lt,{qId:n.id,disabled:F,schema:y,checked:a.hasOwnProperty(N),onChange:function(Se,Ze){F||C(N,Se,Ze)},value:typeof a[N]=="boolean"?{}:a[N],onBlur:l}),(0,e.jsx)(We,{statEnabled:h,quota:ne,checked:!!a[N],optionId:N,questionId:n.id,checkedCount:Object.keys(a).length}),z&&(0,e.jsx)(ve,{value:typeof a[N]=="boolean"?"":a[N],style:{maxWidth:200},type:z,readOnly:X,onChange:function(Se){return C(N,!0,Se)},suffix:K&&(0,e.jsx)("span",{className:m+"-option-suffix",children:(0,e.jsx)(A.Z,{html:K})})})]},N)})})})}(0,f.RM)("Checkbox",(0,D.Pi)(nn),"antdMobile");var Qn=s(62999),an=s(54680),yt=s(3980),rn=s(60780),sn=s.n(rn);function ln(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l,c=v[0].id,d=(0,o.useState)([]),m=(0,M.Z)(d,2),h=m[0],g=m[1];function p(C){c&&((C==null?void 0:C.length)===0?t(void 0):t((0,ge.Z)({},c,C==null?void 0:C.map(function(y){return y.value}))))}var x=(0,o.useMemo)(function(){return sn()(h.map(function(C){return{title:C.name,key:C.id,value:C.id,parentId:C.parentId}}),{parentProperty:"parentId",customID:"key"})},[h]);return(0,o.useEffect)(function(){yt.hi.selectDept({}).then(function(C){C.success&&g(C.data)})},[]),(0,e.jsx)(Re.Z,{children:(0,e.jsx)(De.Z,{span:24,children:(0,e.jsx)(an.Z,{style:{width:"100%"},treeCheckable:!0,value:(a[c]||[]).map(function(C){return{value:C}}),treeCheckStrictly:!0,showSearch:!1,showCheckedStrategy:"SHOW_ALL",dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:x,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0,onChange:p})})})}(0,f.RM)("Dept",ln,"antdMobile");function Pt(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=r.onBlur,v=n.children,c=(0,u.AK)("-body-question");function d(h,g){a[h]=g,g===""&&delete a[h],t((0,j.Z)({},a))}function m(h,g){a[h]=g,g===""&&delete a[h],l((0,j.Z)({},a),h)}return(0,e.jsx)("div",{style:{display:"flex",flexDirection:"column",rowGap:10},children:v==null?void 0:v.map(function(h){var g=h.id,p=h.title;return(0,e.jsxs)(Re.Z,{gutter:[10,10],"data-id":g,children:[p&&(0,e.jsx)(De.Z,{span:24,children:h.title&&(0,e.jsx)("span",{className:c+"-option-title",children:(0,e.jsx)(A.Z,{html:h.title})})},h.id),(0,e.jsx)(De.Z,{span:24,children:(0,e.jsx)(mt,{qId:n.id,schema:h,value:a,onChange:function(C){return d(g,C)},onBlur:function(C){return m(g,C)}})})]},g)})})}(0,f.RM)("FillBlank",Pt,"antdMobile"),(0,f.RM)("MultipleBlank",Pt,"antdMobile");function It(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=r.onBlur,v=n.children,c=n.attribute,d=c===void 0?{}:c,m=d.content;return!m||!v?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(ft,{schema:n,children:v.filter(function(h){var g;return!((g=h.attribute)!==null&&g!==void 0&&g.fieldInTitle)}),content:m,onBlur:l,onChange:t,value:a})}It.Preview=function(r){var n=r.schema,t=r.value,i=n.children,a=n.attribute,l=a===void 0?{}:a,v=l.content;return(0,e.jsx)("div",{className:"preview",children:(0,e.jsx)("div",{children:(0,e.jsx)(A.Z,{html:Oe(v,i,t),replaceP:!1})})})},(0,f.RM)("HorzBlank",It,"antdMobile");var on=s(54121),cn=s(49101);function dn(r){var n,t=r.schema,i=r.onChange,a=r.value||[{}],l=t.children,v=l===void 0?[]:l,c=t.row,d=c===void 0?[]:c,m=(0,I.Ck)((n=t.attribute)===null||n===void 0?void 0:n.scope,[1,999]);return(0,e.jsxs)("div",{className:"",children:[a.map(function(h,g){return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:g+1}),(0,e.jsxs)("div",{className:"question-item",style:{background:"#f7f8fa",borderRadius:4,padding:8,position:"relative"},children:[v.map(function(p){return(0,e.jsxs)("div",{className:"option-box",style:{marginBottom:10},children:[(0,e.jsx)("div",{style:{color:"#aaa",fontSize:12,marginBottom:5},children:(0,e.jsx)(A.Z,{html:p.title})}),(0,e.jsx)(mt,{qId:t.id,schema:p,value:h,onChange:function(C){h[p.id]=C,i((0,$.Z)(a))}})]},p.id)}),a.length>1&&(0,e.jsx)(on.Z,{onClick:function(){a.splice(g,1),i((0,$.Z)(a))},style:{position:"absolute",top:-5,right:-5,color:"#ff4d4f"}})]})]},g)}),(0,e.jsx)("div",{children:a.length<m[2]&&(0,e.jsx)(L.Z,{block:!0,icon:(0,e.jsx)(cn.Z,{}),type:"dashed",onClick:function(){a.push({}),i((0,$.Z)(a))},children:"\u7EE7\u7EED\u586B\u5199"})})]})}(0,f.RM)("MatrixAuto",dn,"antdMobile");function un(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l,c=n.row,d=c===void 0?[]:c;return(0,e.jsx)("div",{className:"",children:d==null?void 0:d.map(function(m){var h=Object.keys(a[m.id]||{});return(0,e.jsxs)("div",{className:"question-item",children:[(0,e.jsx)("h3",{className:"question-sub-title",children:(0,e.jsx)(A.Z,{html:m.title})}),(0,e.jsx)("div",{className:"checkbtn-group",children:(0,e.jsx)(he.Qf,{multiple:!0,value:h,options:v.map(function(g){return{label:g.title,value:g.id}}),onChange:function(p,x){t((0,j.Z)((0,j.Z)({},a),{},(0,ge.Z)({},m.id,p.reduce(function(C,y){return C[y]=!0,C},{}))))}})})]},m.id)})})}(0,f.RM)("MatrixCheckbox",un,"antdMobile");function vn(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l,c=n.row,d=c===void 0?[]:c;return console.log(JSON.parse(JSON.stringify(a))),(0,e.jsx)("div",{className:"",children:d==null?void 0:d.map(function(m){return(0,e.jsxs)("div",{className:"question-item",children:[(0,e.jsx)("h3",{className:"question-sub-title",children:(0,e.jsx)(A.Z,{html:m.title})}),(0,e.jsx)("div",{className:"fillBlank-group",children:v.map(function(h){var g=a[m.id]||{};return(0,e.jsxs)("div",{className:"option-box",style:{marginBottom:10},children:[(0,e.jsx)("div",{style:{color:"#aaa",fontSize:12,marginBottom:5},children:(0,e.jsx)(A.Z,{html:h.title})}),(0,e.jsx)(mt,{qId:n.id,schema:h,value:g,onChange:function(x){var C=a[m.id]||{};t((0,j.Z)((0,j.Z)({},a),{},(0,ge.Z)({},m.id,(0,j.Z)((0,j.Z)({},C),{},(0,ge.Z)({},h.id,x)))))}})]},h.id)})})]},m.id)})})}function hn(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l,c=n.row,d=c===void 0?[]:c;return(0,e.jsx)("div",{className:"",children:d==null?void 0:d.map(function(m){return(0,e.jsxs)("div",{className:"question-item",children:[(0,e.jsx)("h3",{className:"question-sub-title",children:(0,e.jsx)(A.Z,{html:m.title})}),(0,e.jsx)("div",{className:"fillBlank-group",children:v.map(function(h){var g=a[m.id]||{};return(0,e.jsxs)("div",{className:"option-box",style:{marginBottom:10},children:[(0,e.jsx)("div",{style:{color:"#aaa",fontSize:12,marginBottom:5},children:(0,e.jsx)(A.Z,{html:h.title})}),(0,e.jsx)(mt,{qId:n.id,schema:h,value:g,readOnly:!0,onChange:function(x){var C=a[m.id]||{};t((0,j.Z)((0,j.Z)({},a),{},(0,ge.Z)({},m.id,(0,j.Z)((0,j.Z)({},C),{},(0,ge.Z)({},h.id,x)))))}})]},h.id)})})]},m.id)})})}(0,f.RM)("MatrixFillBlank",(0,D.Pi)(vn),"antdMobile"),(0,f.uF)("MatrixFillBlank",hn,"antdMobile");function fn(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l,c=n.row,d=c===void 0?[]:c;return(0,e.jsx)("div",{className:"",children:d==null?void 0:d.map(function(m){var h=Object.keys(a[m.id]||{})[0];return(0,e.jsxs)("div",{className:"question-item",children:[(0,e.jsx)("h3",{className:"question-sub-title",children:(0,e.jsx)(A.Z,{html:m.title})}),(0,e.jsx)("div",{className:"checkbtn-group",children:(0,e.jsx)(he.Qf,{value:h?[h]:void 0,options:v.map(function(g){return{label:g.title,value:g.id}}),onChange:function(p,x){p[0]?t((0,j.Z)((0,j.Z)({},a),{},(0,ge.Z)({},m.id,(0,ge.Z)({},p[0],!0)))):(delete a[m.id],t((0,j.Z)({},a)))}})})]},m.id)})})}(0,f.RM)("MatrixRadio",fn,"antdMobile");function mn(r){for(var n=[],t=2;t<r+2;t++)n.push(t/(r+2));return n}function gn(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=[],a=r;a<=n;a++)i.push(a);return t&&i.reverse(),i}function xn(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l;function c(m,h){t((0,ge.Z)({},m,h))}var d=function(h){var g=h.id,p=a[g],x=mn(p||0),C=h.attribute||{},y=C.scope,E=y===void 0?"[0,10]":y,Z=C.npsInvertSort,S=C.npsStart,P=S===void 0?"\u4E0D\u53EF\u80FD":S,N=C.npsEnd,z=N===void 0?"\u6781\u6709\u53EF\u80FD":N,K=E.replace("[","").replace("]","").split(","),X=(0,M.Z)(K,2),ne=X[0],F=X[1];return(0,e.jsxs)("div",{className:"nps",children:[(0,e.jsx)("div",{className:"nps-container",children:gn(parseInt(ne),parseInt(F),Z).map(function(V){var G={background:"#2672ff",opacity:x[V]};return(0,e.jsx)("div",{className:"nps-item",style:p>=V?G:void 0,onClick:function(){return c(g,V)},children:V},V)})}),(0,e.jsxs)("div",{className:"nps-tip",children:[(0,e.jsx)("div",{children:Z?z:P}),(0,e.jsx)("div",{children:Z?P:z})]})]},g)};return(0,e.jsx)(Re.Z,{children:v.map(function(m){return d(m)})})}(0,f.RM)("Nps",xn,"antdMobile");var yn=ke.ZP.Group;function wt(r){var n,t=r.schema,i=r.onChange,a=r.value,l=a===void 0?{}:a,v=t.children,c=(0,u.AK)("-body-question"),d=!!((n=t.attribute)!==null&&n!==void 0&&n.statEnabled),m=(0,u.Rk)(),h=m.hiddenOption[t.id]||[],g=(0,u.Al)();function p(x,C){i((0,ge.Z)({},x,C||!0))}return(0,o.useEffect)(function(){var x=Object.keys(l)[0];h.includes(x)&&i(void 0)},[h]),(0,o.useEffect)(function(){var x;(x=t.children)===null||x===void 0||x.forEach(function(C){var y,E=C.id,Z=C.title,S=C.attribute,P=S==null?void 0:S.dataType;(y=C.attribute)!==null&&y!==void 0&&y.defaultChecked&&Object.keys(l).length===0&&i((0,ge.Z)({},E,P?l[E]:Z))})},[]),(0,e.jsx)("div",{children:(0,e.jsx)(yn,{onChange:function(C){},value:Object.keys(l)[0],style:{width:"100%"},children:(0,e.jsx)(Re.Z,{children:v==null?void 0:v.filter(function(x){return!h.includes(x.id)}).map(function(x){var C,y,E,Z,S=x.id,P=(C=x.attribute)===null||C===void 0?void 0:C.dataType,N=(y=x.attribute)===null||y===void 0?void 0:y.suffix,z=(E=x.attribute)===null||E===void 0?void 0:E.readOnly,K=!1,X=(Z=x.attribute)===null||Z===void 0?void 0:Z.quota;if(X!==void 0){var ne,F=g.statistics,V=F==null?void 0:F.questionStatistics[t.id],G=(V==null||(ne=V.optionStatistics.find(function(xe){return xe.optionId===S}))===null||ne===void 0?void 0:ne.count)||0,Q=X-G;Q<=0&&(K=!0)}return(0,e.jsxs)(De.Z,{span:24,className:c+"-option","data-id":S,children:[(0,e.jsx)(Rt,{qId:t.id,schema:x,value:l[S],disabled:K,onChange:function(je){return p(S,je)},onBlur:function(je){}}),(0,e.jsx)(We,{statEnabled:d,quota:X,checked:!!l[S],optionId:S,questionId:t.id,checkedCount:Object.keys(l).length}),P&&(0,e.jsx)(ve,{value:l[S]===!0?"":l[S],type:P,style:{maxWidth:200},onChange:function(je){return p(S,je)},readOnly:z,suffix:N&&(0,e.jsx)("span",{className:c+"-option-suffix",children:(0,e.jsx)(A.Z,{html:N})})})]},S)})})})})}(0,f.RM)("Radio",(0,D.Pi)(wt),"antdMobile"),(0,f.RM)("Judge",(0,D.Pi)(wt),"antdMobile");function Cn(r){var n=(0,u.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(A.Z,{html:"".concat(r.replaceTitle||r.schema.title||"")})})}(0,f.RM)("Remark",Cn,"antdMobile");var Un=s(80116),Wn=s(96433),At=s(2864),Nt=s(41687),pn=s(46870),kt=s(18613),En=s(57206),jn={1:(0,e.jsx)(Nt.Z,{}),2:(0,e.jsx)(Nt.Z,{}),3:(0,e.jsx)(pn.Z,{}),4:(0,e.jsx)(kt.Z,{}),5:(0,e.jsx)(kt.Z,{})};function An(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l;function c(m,h){t((0,ge.Z)({},m,h))}var d=function(h){var g=h.attribute||{},p=h.id,x=g.scope,C=x===void 0?"[0,5]":x,y=g.scoreStyle,E=C.replace("[","").replace("]","").split(","),Z=(0,M.Z)(E,2),S=Z[0],P=Z[1];return y==="heart"?(0,e.jsx)(At.Z,{defaultValue:parseInt(S),character:(0,e.jsx)(En.Z,{}),style:{color:"#ea7463"},count:parseInt(P),onChange:function(z){return c(p,z)}},p):y==="smile"?(0,e.jsx)(At.Z,{defaultValue:parseInt(S),character:function(z){var K=z.index;return jn[K+1]},count:parseInt(P),onChange:function(z){return c(p,z)}},p):(0,e.jsx)(At.Z,{defaultValue:parseInt(S),count:parseInt(P),onChange:function(z){return c(p,z)}},p)};return(0,e.jsx)(Re.Z,{children:v.map(function(m){return d(m)})})}(0,f.RM)("Score",An,"antdMobile");function bn(r){var n,t=r.schema,i=r.onChange,a=r.value,l=a===void 0?{}:a;function v(c){var d,m=(d=t.children)===null||d===void 0?void 0:d.find(function(h){return h.id===c});m&&i((0,ge.Z)({},c,!0))}return(0,o.useEffect)(function(){var c;(c=t.children)===null||c===void 0||c.forEach(function(d){var m,h=d.id;(m=d.attribute)!==null&&m!==void 0&&m.defaultChecked&&Object.keys(l).length===0&&i((0,ge.Z)({},h,!0))})},[]),(0,e.jsx)(Re.Z,{children:(0,e.jsx)(De.Z,{span:24,children:(0,e.jsx)(be,{value:Object.keys(l)[0],onChange:v,options:((n=t.children)===null||n===void 0?void 0:n.map(function(c){return{label:c.title,value:c.id}}))||[]})})})}(0,f.RM)("Select",bn,"antdMobile");var $n=s(34669),Sn=s(82833);function Mn(r){var n=r.schema,t=r.onChange,i=n.children,a=(0,u.Al)(),l=(0,o.useState)(0),v=(0,M.Z)(l,2),c=v[0],d=v[1];function m(h,g){var p="signature-".concat(g,"-").concat((0,I.kb)(6),".png");if(!a.onUpload){t((0,ge.Z)({},g,[p]));return}fetch(h).then(function(x){return x.blob()}).then(function(x){var C=new File([x],p,{type:"image/png"});a.onUpload({file:C,questionId:n.id,projectId:a.schema.id},function(y){d(y.loaded/y.total*100)}).then(function(y){y.success&&y.data.id&&t((0,ge.Z)({},g,[y.data.id]))})})}return(0,e.jsx)("div",{children:i==null?void 0:i.map(function(h){var g=h.id,p=h.title;return(0,e.jsxs)(Re.Z,{gutter:[10,0],"data-id":g,children:[p&&(0,e.jsx)(De.Z,{span:24},h.id),(0,e.jsxs)(De.Z,{span:24,children:[(0,e.jsx)(Ge,{onChange:function(C){return m(C,g)}}),c>0&&c!==100&&(0,e.jsx)(Sn.Z,{percent:c,size:"small",showInfo:!1})]})]},g)})})}(0,f.RM)("Signature",Mn,"antdMobile");var Dn=function(n){var t=n.value,i;return t&&(i=Object.values(t)[0][0]),(0,e.jsx)("div",{className:"preview signature-print",children:i&&(0,e.jsx)("img",{src:"/api/file?id=".concat(i)})})};(0,f.uF)("Signature",Dn,"antdMobile");var Vn=s(48736),Ot=s(27049);function Zn(r){var n=(0,u.AK)("-body-question");return(0,e.jsx)("div",{className:n,children:(0,e.jsx)(Ot.Z,{plain:!0})})}(0,f.RM)("SplitLine",Zn,"antdMobile");function Bn(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=(0,u.AK)("-body-question");function c(d,m){a[d]=m,m===""&&delete a[d],t((0,j.Z)({},a))}return(0,e.jsx)("div",{children:l==null?void 0:l.map(function(d){var m=d.id,h=d.attribute,g=d.title,p=(0,I.Ck)(h==null?void 0:h.autoSize,[2,4]);return(0,e.jsxs)(Re.Z,{style:{marginBottom:10},"data-id":m,children:[g&&(0,e.jsx)(De.Z,{className:v+"-option",span:4,children:d.title&&(0,e.jsx)("span",{className:v+"-option-title",children:d.title})},d.id),(0,e.jsx)(De.Z,{span:24,children:(0,e.jsx)(O.Z.TextArea,{autoSize:{minRows:p[1],maxRows:p[2]},value:a[m]||"",onChange:function(C){return c(m,C.target.value)}})})]},m)})})}(0,f.RM)("Textarea",Bn,"antdMobile");var Pn=s(43347),In=gt.Z.Dragger;function wn(r){var n=r.schema,t=r.onChange,i=r.value,a=r.readOnly,l=n.children,v=(0,u.Al)(),c=(0,o.useState)(),d=(0,M.Z)(c,2),m=d[0],h=d[1];(0,o.useEffect)(function(){var x=n.children[0].id,C=i&&i[x]||[];m==null&&C.length>0&&yt.hi.loadFiles({ids:C}).then(function(y){h(y==null?void 0:y.map(function(E){return{name:E.originalName,uid:E.id,status:"done"}}))})},[i]);var g=function(){var x=(0,Bt.Z)((0,xt.Z)().mark(function C(y){var E,Z,S,P;return(0,xt.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:E=y.onSuccess,Z=y.onError,S=y.file,P=y.onProgress,v.onUpload&&v.onUpload({file:S,questionId:n.id,projectId:v.schema.id},function(K){P&&P({percent:K.loaded/K.total*100})}).then(function(K){if(K.success&&E&&E(K.data),!K.success&&Z){var X=new Error("Some error");Z({event:X})}});case 2:case"end":return z.stop()}},C)}));return function(y){return x.apply(this,arguments)}}(),p=function(C,y){if(h(C.fileList),(C.file.status==="removed"||C.file.status==="done")&&!C.fileList.find(function(Z){return Z.status!=="done"})){var E=C.fileList.filter(function(Z){return Z.status==="done"}).map(function(Z){var S;return((S=Z.response)===null||S===void 0?void 0:S.id)||Z.uid});E.length===0?t(void 0):t((0,ge.Z)({},y,E))}};return(0,e.jsx)("div",{children:l==null?void 0:l.map(function(x){var C=x.id,y=x.attribute,E=y===void 0?{}:y,Z=[],S=E.maxFileCount,P=E.maxFileSize,N=E.fileAccept,z=E.cameraOnly;return S&&Z.push("\u6700\u591A\u4E0A\u4F20".concat(S,"\u4E2A")),P&&Z.push("\u9650\u5236\u6BCF\u4E2A\u6587\u4EF6".concat(P,"M\u4EE5\u5185")),N&&Z.push("\u4EC5\u652F\u6301\u6587\u4EF6\u7C7B\u578B\uFF1A".concat(N)),(0,e.jsxs)(In,{multiple:!0,capture:z?"environment":void 0,disabled:a,maxCount:(E==null?void 0:E.maxFileCount)||20,accept:z?"image/*":void 0,beforeUpload:function(X){return E!=null&&E.maxFileSize&&X.size>E.maxFileSize*1024*1024?(Zt.default.error("\u6700\u5927\u53EA\u80FD\u4E0A\u4F20 ".concat(E.maxFileSize,"M \u5927\u5C0F\u7684\u6587\u4EF6")),gt.Z.LIST_IGNORE):!0},customRequest:g,onChange:function(X){return p(X,C)},fileList:m,children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Pn.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u9009\u62E9\u6216\u62D6\u62FD\u4E0A\u4F20\u6587\u4EF6"}),(0,e.jsx)("p",{className:"ant-upload-hint",style:{whiteSpace:"pre-line",wordBreak:"break-word",textAlign:"center"},children:Z.join(",")})]},C)})})}(0,f.RM)("Upload",wn,"antdMobile");var Nn=s(55686),kn=ee.Z.Option;function On(r){var n=r.schema,t=r.onChange,i=r.value,a=i===void 0?{}:i,l=n.children,v=l===void 0?[]:l,c=v[0].id,d=(0,o.useState)([]),m=(0,M.Z)(d,2),h=m[0],g=m[1];function p(y){c&&t((0,ge.Z)({},c,y))}var x=(0,yt.zE)(function(y){yt.hi.userSelect({name:y,selected:a[c]||[]}).then(function(E){E.success&&g(E.data)})},5),C=function(E){p(E?h.map(function(Z){return Z.userId}):void 0)};return(0,o.useEffect)(function(){var y;x(""),(y=n.children)===null||y===void 0||y.forEach(function(E){var Z,S=E.id;(Z=E.attribute)!==null&&Z!==void 0&&Z.defaultChecked&&Object.keys(a).length===0&&t((0,ge.Z)({},S,!0))})},[]),(0,e.jsx)(Re.Z,{children:(0,e.jsx)(De.Z,{span:24,children:(0,e.jsx)(ee.Z,{placeholder:"\u8BF7\u9009\u62E9",allowClear:!0,filterOption:!1,mode:"multiple",onClear:function(){t(void 0)},value:a[c]||[],onSearch:x,showSearch:!0,onChange:p,dropdownRender:function(E){return(0,e.jsxs)("div",{children:[E,(0,e.jsx)(Ot.Z,{style:{margin:"4px 0"}}),(0,e.jsx)("div",{style:{display:"flex",flexWrap:"nowrap",paddingLeft:10},children:(0,e.jsx)(Dt.Z,{onChange:function(S){C(S.target.checked)},children:"\u5168\u9009"})})]})},children:h.map(function(y){return(0,e.jsx)(kn,{value:y.userId,label:y.name,children:(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{role:"img",style:{marginRight:10},children:(0,e.jsx)(Nn.Z,{user:y,size:20})}),y.name," ",y.deptName&&"(".concat(y.deptName,")")]})},y.userId)})})})})}(0,f.RM)("User",On,"antdMobile");var Rn=function(n){return(0,e.jsx)(e.Fragment,{children:n.children})},Fn=Rn;(0,I.RM)("RichText",(0,o.lazy)(function(){return Promise.resolve().then(s.bind(s,80116))}),"antdMobile"),(0,I.uF)("Upload",(0,o.lazy)(function(){return Promise.all([s.e(4502),s.e(858)]).then(s.bind(s,90858))}),"antdMobile")},80116:function(ie,_,s){"use strict";s.r(_);var B=s(32059),w=s(94657),M=s(88851),I=s(3980),A=s(67294),D=s(54707),o=s(85893);function u(f){var b=f.schema,e=f.onChange,T=f.value,k=T===void 0?{}:T,H=f.onBlur,L=b.children,U=(0,D.AK)("-body-question"),j=(0,A.useState)(k[b.children[0].id]),re=(0,w.Z)(j,2),O=re[0],q=re[1],ee=(0,D.Rk)(),me=(0,D.Al)(),oe=(0,A.useCallback)(function(se,ye){e((0,B.Z)({},se,ye))},[]);return(0,o.jsx)("div",{children:L==null?void 0:L.map(function(se){var ye=se.id;return(0,o.jsx)(M.Mf,{value:O,onChange:function(ve){return oe(ye,ve)},onUpload:function(ve){return I.hi.upload("/api/public/upload",{fileType:4,basePath:ee.schema.id,file:ve,questionId:b.id,projectId:me.schema.id})}},se.id)})})}_.default=u},55686:function(ie,_,s){"use strict";var B=s(11849),w=s(94233),M=s(51890),I=s(93224),A=s(89366),D=s(85893),o=["user"],u=function(b){var e=b.user,T=(0,I.Z)(b,o);return!e||!e.avatar?(0,D.jsx)(M.C,(0,B.Z)({icon:(0,D.jsx)(A.Z,{}),size:T.size||"small"},T)):(0,D.jsx)(M.C,(0,B.Z)({src:"/api/public/preview/".concat(e.avatar),size:T.size||"small"},T))};_.Z=u},81643:function(ie,_,s){"use strict";s.d(_,{Z:function(){return B}});var B=function(M){if(!M)return null;var I=typeof M=="function";return I?M():M}},9715:function(ie,_,s){"use strict";var B=s(38663),w=s.n(B),M=s(34442),I=s.n(M),A=s(6999),D=s(22385)},55241:function(ie,_,s){"use strict";var B=s(22122),w=s(67294),M=s(53124),I=s(94199),A=s(81643),D=s(33603),o=function(b,e){var T={};for(var k in b)Object.prototype.hasOwnProperty.call(b,k)&&e.indexOf(k)<0&&(T[k]=b[k]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,k=Object.getOwnPropertySymbols(b);H<k.length;H++)e.indexOf(k[H])<0&&Object.prototype.propertyIsEnumerable.call(b,k[H])&&(T[k[H]]=b[k[H]]);return T},u=function(e){var T=e.title,k=e.content,H=e.prefixCls;return!T&&!k?null:w.createElement(w.Fragment,null,T&&w.createElement("div",{className:"".concat(H,"-title")},(0,A.Z)(T)),w.createElement("div",{className:"".concat(H,"-inner-content")},(0,A.Z)(k)))},f=w.forwardRef(function(b,e){var T=b.prefixCls,k=b.title,H=b.content,L=b._overlay,U=b.placement,j=U===void 0?"top":U,re=b.trigger,O=re===void 0?"hover":re,q=b.mouseEnterDelay,ee=q===void 0?.1:q,me=b.mouseLeaveDelay,oe=me===void 0?.1:me,se=b.overlayStyle,ye=se===void 0?{}:se,Ae=o(b,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),ve=w.useContext(M.E_),Ce=ve.getPrefixCls,be=Ce("popover",T),Be=Ce();return w.createElement(I.Z,(0,B.Z)({placement:j,trigger:O,mouseEnterDelay:ee,mouseLeaveDelay:oe,overlayStyle:ye},Ae,{prefixCls:be,ref:e,overlay:L||w.createElement(u,{prefixCls:be,title:k,content:H}),transitionName:(0,D.mL)(Be,"zoom-big",Ae.transitionName)}))});_.Z=f},20136:function(ie,_,s){"use strict";var B=s(38663),w=s.n(B),M=s(31930),I=s.n(M)},32138:function(ie,_,s){"use strict";s.d(_,{Z:function(){return Ee}});var B=s(96156),w=s(90484),M=s(22122),I=s(28991),A=s(67294),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},o=D,u=s(27029),f=function(J,te){return A.createElement(u.Z,(0,I.Z)((0,I.Z)({},J),{},{ref:te,icon:o}))};f.displayName="HolderOutlined";var b=A.forwardRef(f),e=s(94184),T=s.n(e),k=s(83179),H=s(53124),L=s(33603),U=s(85061),j=s(28481),re=s(86504),O=s(91816),q=s(63258),ee=s(10225),me=s(1089),oe;(function(R){R[R.None=0]="None",R[R.Start=1]="Start",R[R.End=2]="End"})(oe||(oe={}));function se(R,J){function te(Y){var ae=Y.key,he=Y.children;J(ae,Y)!==!1&&se(he||[],J)}R.forEach(te)}function ye(R){var J=R.treeData,te=R.expandedKeys,Y=R.startKey,ae=R.endKey,he=[],W=oe.None;if(Y&&Y===ae)return[Y];if(!Y||!ae)return[];function Pe(fe){return fe===Y||fe===ae}return se(J,function(fe){if(W===oe.End)return!1;if(Pe(fe)){if(he.push(fe),W===oe.None)W=oe.Start;else if(W===oe.Start)return W=oe.End,!1}else W===oe.Start&&he.push(fe);return te.indexOf(fe)!==-1}),he}function Ae(R,J){var te=(0,U.Z)(J),Y=[];return se(R,function(ae,he){var W=te.indexOf(ae);return W!==-1&&(Y.push(he),te.splice(W,1)),!!te.length}),Y}var ve=function(R,J){var te={};for(var Y in R)Object.prototype.hasOwnProperty.call(R,Y)&&J.indexOf(Y)<0&&(te[Y]=R[Y]);if(R!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ae=0,Y=Object.getOwnPropertySymbols(R);ae<Y.length;ae++)J.indexOf(Y[ae])<0&&Object.prototype.propertyIsEnumerable.call(R,Y[ae])&&(te[Y[ae]]=R[Y[ae]]);return te};function Ce(R){var J=R.isLeaf,te=R.expanded;return J?A.createElement(re.Z,null):te?A.createElement(O.Z,null):A.createElement(q.Z,null)}function be(R){var J=R.treeData,te=R.children;return J||(0,me.zn)(te)}var Be=function(J,te){var Y=J.defaultExpandAll,ae=J.defaultExpandParent,he=J.defaultExpandedKeys,W=ve(J,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),Pe=A.useRef(),fe=A.useRef(),Le=A.createRef();A.useImperativeHandle(te,function(){return Le.current});var Ie=function(){var $e=(0,me.I8)(be(W)),ze=$e.keyEntities,Me;return Y?Me=Object.keys(ze):ae?Me=(0,ee.r7)(W.expandedKeys||he||[],ze):Me=W.expandedKeys||he,Me},et=A.useState(W.selectedKeys||W.defaultSelectedKeys||[]),it=(0,j.Z)(et,2),tt=it[0],Je=it[1],Te=A.useState(function(){return Ie()}),Ye=(0,j.Z)(Te,2),Ke=Ye[0],Ge=Ye[1];A.useEffect(function(){"selectedKeys"in W&&Je(W.selectedKeys)},[W.selectedKeys]),A.useEffect(function(){"expandedKeys"in W&&Ge(W.expandedKeys)},[W.expandedKeys]);var Ue=function($e,ze){var Me;return"expandedKeys"in W||Ge($e),(Me=W.onExpand)===null||Me===void 0?void 0:Me.call(W,$e,ze)},_e=function($e,ze){var Me,vt=W.multiple,St=ze.node,ke=ze.nativeEvent,lt=St.key,qe=lt===void 0?"":lt,ot=be(W),at=(0,M.Z)((0,M.Z)({},ze),{selected:!0}),Et=(ke==null?void 0:ke.ctrlKey)||(ke==null?void 0:ke.metaKey),ht=ke==null?void 0:ke.shiftKey,Oe;vt&&Et?(Oe=$e,Pe.current=qe,fe.current=Oe,at.selectedNodes=Ae(ot,Oe)):vt&&ht?(Oe=Array.from(new Set([].concat((0,U.Z)(fe.current||[]),(0,U.Z)(ye({treeData:ot,expandedKeys:Ke,startKey:qe,endKey:Pe.current}))))),at.selectedNodes=Ae(ot,Oe)):(Oe=[qe],Pe.current=qe,fe.current=Oe,at.selectedNodes=Ae(ot,Oe)),(Me=W.onSelect)===null||Me===void 0||Me.call(W,Oe,at),"selectedKeys"in W||Je(Oe)},We=A.useContext(H.E_),ct=We.getPrefixCls,we=We.direction,rt=W.prefixCls,nt=W.className,Ne=W.showIcon,st=Ne===void 0?!0:Ne,dt=W.expandAction,Ct=dt===void 0?"click":dt,pt=ve(W,["prefixCls","className","showIcon","expandAction"]),Xe=ct("tree",rt),bt=T()("".concat(Xe,"-directory"),(0,B.Z)({},"".concat(Xe,"-directory-rtl"),we==="rtl"),nt);return A.createElement(ue,(0,M.Z)({icon:Ce,ref:Le,blockNode:!0},pt,{showIcon:st,expandAction:Ct,prefixCls:Xe,className:bt,expandedKeys:Ke,selectedKeys:tt,onSelect:_e,onExpand:Ue}))},Ve=A.forwardRef(Be),$=Ve,le=4;function ce(R){var J,te=R.dropPosition,Y=R.dropLevelOffset,ae=R.prefixCls,he=R.indent,W=R.direction,Pe=W===void 0?"ltr":W,fe=Pe==="ltr"?"left":"right",Le=Pe==="ltr"?"right":"left",Ie=(J={},(0,B.Z)(J,fe,-Y*he+le),(0,B.Z)(J,Le,0),J);switch(te){case-1:Ie.top=-3;break;case 1:Ie.bottom=-3;break;default:Ie.bottom=-3,Ie[fe]=he+le;break}return A.createElement("div",{style:Ie,className:"".concat(ae,"-drop-indicator")})}var pe=s(6324),de=A.forwardRef(function(R,J){var te,Y=A.useContext(H.E_),ae=Y.getPrefixCls,he=Y.direction,W=Y.virtual,Pe=R.prefixCls,fe=R.className,Le=R.showIcon,Ie=Le===void 0?!1:Le,et=R.showLine,it=R.switcherIcon,tt=R.blockNode,Je=tt===void 0?!1:tt,Te=R.children,Ye=R.checkable,Ke=Ye===void 0?!1:Ye,Ge=R.selectable,Ue=Ge===void 0?!0:Ge,_e=R.draggable,We=R.motion,ct=We===void 0?(0,M.Z)((0,M.Z)({},L.ZP),{motionAppear:!1}):We,we=ae("tree",Pe),rt=(0,M.Z)((0,M.Z)({},R),{checkable:Ke,selectable:Ue,showIcon:Ie,motion:ct,blockNode:Je,showLine:Boolean(et),dropIndicatorRender:ce}),nt=A.useMemo(function(){if(!_e)return!1;var Ne={};switch((0,w.Z)(_e)){case"function":Ne.nodeDraggable=_e;break;case"object":Ne=(0,M.Z)({},_e);break;default:break}return Ne.icon!==!1&&(Ne.icon=Ne.icon||A.createElement(b,null)),Ne},[_e]);return A.createElement(k.Z,(0,M.Z)({itemHeight:20,ref:J,virtual:W},rt,{prefixCls:we,className:T()((te={},(0,B.Z)(te,"".concat(we,"-icon-hide"),!Ie),(0,B.Z)(te,"".concat(we,"-block-node"),Je),(0,B.Z)(te,"".concat(we,"-unselectable"),!Ue),(0,B.Z)(te,"".concat(we,"-rtl"),he==="rtl"),te),fe),direction:he,checkable:Ke&&A.createElement("span",{className:"".concat(we,"-checkbox-inner")}),selectable:Ue,switcherIcon:function(st){return(0,pe.Z)(we,it,et,st)},draggable:nt}),Te)});de.TreeNode=k.O,de.DirectoryTree=$;var ue=de,Ee=ue},32157:function(ie,_,s){"use strict";var B=s(38663),w=s.n(B),M=s(16695),I=s.n(M)},18446:function(ie,_,s){var B=s(90939);function w(M,I){return B(M,I)}ie.exports=w},18601:function(ie,_,s){var B=s(14841),w=1/0,M=17976931348623157e292;function I(A){if(!A)return A===0?A:0;if(A=B(A),A===w||A===-w){var D=A<0?-1:1;return D*M}return A===A?A:0}ie.exports=I},40554:function(ie,_,s){var B=s(18601);function w(M){var I=B(M),A=I%1;return I===I?A?I-A:I:0}ie.exports=w},17672:function(ie,_,s){"use strict";s.d(_,{Z:function(){return A}});/*!
 * Signature Pad v4.0.4 | https://github.com/szimek/signature_pad
 * (c) 2022 Szymon Nowak | Released under the MIT license
 */class B{constructor(o,u,f,b){if(isNaN(o)||isNaN(u))throw new Error(`Point is invalid: (${o}, ${u})`);this.x=+o,this.y=+u,this.pressure=f||0,this.time=b||Date.now()}distanceTo(o){return Math.sqrt(Math.pow(this.x-o.x,2)+Math.pow(this.y-o.y,2))}equals(o){return this.x===o.x&&this.y===o.y&&this.pressure===o.pressure&&this.time===o.time}velocityFrom(o){return this.time!==o.time?this.distanceTo(o)/(this.time-o.time):0}}class w{constructor(o,u,f,b,e,T){this.startPoint=o,this.control2=u,this.control1=f,this.endPoint=b,this.startWidth=e,this.endWidth=T}static fromPoints(o,u){const f=this.calculateControlPoints(o[0],o[1],o[2]).c2,b=this.calculateControlPoints(o[1],o[2],o[3]).c1;return new w(o[1],f,b,o[2],u.start,u.end)}static calculateControlPoints(o,u,f){const b=o.x-u.x,e=o.y-u.y,T=u.x-f.x,k=u.y-f.y,H={x:(o.x+u.x)/2,y:(o.y+u.y)/2},L={x:(u.x+f.x)/2,y:(u.y+f.y)/2},U=Math.sqrt(b*b+e*e),j=Math.sqrt(T*T+k*k),re=H.x-L.x,O=H.y-L.y,q=j/(U+j),ee={x:L.x+re*q,y:L.y+O*q},me=u.x-ee.x,oe=u.y-ee.y;return{c1:new B(H.x+me,H.y+oe),c2:new B(L.x+me,L.y+oe)}}length(){const o=10;let u=0,f,b;for(let e=0;e<=o;e+=1){const T=e/o,k=this.point(T,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),H=this.point(T,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(e>0){const L=k-f,U=H-b;u+=Math.sqrt(L*L+U*U)}f=k,b=H}return u}point(o,u,f,b,e){return u*(1-o)*(1-o)*(1-o)+3*f*(1-o)*(1-o)*o+3*b*(1-o)*o*o+e*o*o*o}}class M{constructor(){try{this._et=new EventTarget}catch(o){this._et=document}}addEventListener(o,u,f){this._et.addEventListener(o,u,f)}dispatchEvent(o){return this._et.dispatchEvent(o)}removeEventListener(o,u,f){this._et.removeEventListener(o,u,f)}}function I(D,o=250){let u=0,f=null,b,e,T;const k=()=>{u=Date.now(),f=null,b=D.apply(e,T),f||(e=null,T=[])};return function(...L){const U=Date.now(),j=o-(U-u);return e=this,T=L,j<=0||j>o?(f&&(clearTimeout(f),f=null),u=U,b=D.apply(e,T),f||(e=null,T=[])):f||(f=window.setTimeout(k,j)),b}}class A extends M{constructor(o,u={}){super();this.canvas=o,this._handleMouseDown=f=>{f.buttons===1&&(this._drawningStroke=!0,this._strokeBegin(f))},this._handleMouseMove=f=>{this._drawningStroke&&this._strokeMoveUpdate(f)},this._handleMouseUp=f=>{f.buttons===1&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(f))},this._handleTouchStart=f=>{if(f.preventDefault(),f.targetTouches.length===1){const b=f.changedTouches[0];this._strokeBegin(b)}},this._handleTouchMove=f=>{f.preventDefault();const b=f.targetTouches[0];this._strokeMoveUpdate(b)},this._handleTouchEnd=f=>{if(f.target===this.canvas){f.preventDefault();const e=f.changedTouches[0];this._strokeEnd(e)}},this._handlePointerStart=f=>{this._drawningStroke=!0,f.preventDefault(),this._strokeBegin(f)},this._handlePointerMove=f=>{this._drawningStroke&&(f.preventDefault(),this._strokeMoveUpdate(f))},this._handlePointerEnd=f=>{this._drawningStroke&&(f.preventDefault(),this._drawningStroke=!1,this._strokeEnd(f))},this.velocityFilterWeight=u.velocityFilterWeight||.7,this.minWidth=u.minWidth||.5,this.maxWidth=u.maxWidth||2.5,this.throttle="throttle"in u?u.throttle:16,this.minDistance="minDistance"in u?u.minDistance:5,this.dotSize=u.dotSize||0,this.penColor=u.penColor||"black",this.backgroundColor=u.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?I(A.prototype._strokeUpdate,this.throttle):A.prototype._strokeUpdate,this._ctx=o.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:o,canvas:u}=this;o.fillStyle=this.backgroundColor,o.clearRect(0,0,u.width,u.height),o.fillRect(0,0,u.width,u.height),this._data=[],this._reset(),this._isEmpty=!0}fromDataURL(o,u={}){return new Promise((f,b)=>{const e=new Image,T=u.ratio||window.devicePixelRatio||1,k=u.width||this.canvas.width/T,H=u.height||this.canvas.height/T,L=u.xOffset||0,U=u.yOffset||0;this._reset(),e.onload=()=>{this._ctx.drawImage(e,L,U,k,H),f()},e.onerror=j=>{b(j)},e.crossOrigin="anonymous",e.src=o,this._isEmpty=!1})}toDataURL(o="image/png",u){switch(o){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(o,u)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const o=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!o?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(o,{clear:u=!0}={}){u&&this.clear(),this._fromData(o,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(o)}toData(){return this._data}_strokeBegin(o){this.dispatchEvent(new CustomEvent("beginStroke",{detail:o}));const u={dotSize:this.dotSize,minWidth:this.minWidth,maxWidth:this.maxWidth,penColor:this.penColor,points:[]};this._data.push(u),this._reset(),this._strokeUpdate(o)}_strokeUpdate(o){if(this._data.length===0){this._strokeBegin(o);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:o}));const u=o.clientX,f=o.clientY,b=o.pressure!==void 0?o.pressure:o.force!==void 0?o.force:0,e=this._createPoint(u,f,b),T=this._data[this._data.length-1],k=T.points,H=k.length>0&&k[k.length-1],L=H?e.distanceTo(H)<=this.minDistance:!1,{penColor:U,dotSize:j,minWidth:re,maxWidth:O}=T;if(!H||!(H&&L)){const q=this._addPoint(e);H?q&&this._drawCurve(q,{penColor:U,dotSize:j,minWidth:re,maxWidth:O}):this._drawDot(e,{penColor:U,dotSize:j,minWidth:re,maxWidth:O}),k.push({time:e.time,x:e.x,y:e.y,pressure:e.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:o}))}_strokeEnd(o){this._strokeUpdate(o),this.dispatchEvent(new CustomEvent("endStroke",{detail:o}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),document.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor}_createPoint(o,u,f){const b=this.canvas.getBoundingClientRect();return new B(o-b.left,u-b.top,f,new Date().getTime())}_addPoint(o){const{_lastPoints:u}=this;if(u.push(o),u.length>2){u.length===3&&u.unshift(u[0]);const f=this._calculateCurveWidths(u[1],u[2]),b=w.fromPoints(u,f);return u.shift(),b}return null}_calculateCurveWidths(o,u){const f=this.velocityFilterWeight*u.velocityFrom(o)+(1-this.velocityFilterWeight)*this._lastVelocity,b=this._strokeWidth(f),e={end:b,start:this._lastWidth};return this._lastVelocity=f,this._lastWidth=b,e}_strokeWidth(o){return Math.max(this.maxWidth/(o+1),this.minWidth)}_drawCurveSegment(o,u,f){const b=this._ctx;b.moveTo(o,u),b.arc(o,u,f,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(o,u){const f=this._ctx,b=o.endWidth-o.startWidth,e=Math.ceil(o.length())*2;f.beginPath(),f.fillStyle=u.penColor;for(let T=0;T<e;T+=1){const k=T/e,H=k*k,L=H*k,U=1-k,j=U*U,re=j*U;let O=re*o.startPoint.x;O+=3*j*k*o.control1.x,O+=3*U*H*o.control2.x,O+=L*o.endPoint.x;let q=re*o.startPoint.y;q+=3*j*k*o.control1.y,q+=3*U*H*o.control2.y,q+=L*o.endPoint.y;const ee=Math.min(o.startWidth+L*b,u.maxWidth);this._drawCurveSegment(O,q,ee)}f.closePath(),f.fill()}_drawDot(o,u){const f=this._ctx,b=u.dotSize>0?u.dotSize:(u.minWidth+u.maxWidth)/2;f.beginPath(),this._drawCurveSegment(o.x,o.y,b),f.closePath(),f.fillStyle=u.penColor,f.fill()}_fromData(o,u,f){for(const b of o){const{penColor:e,dotSize:T,minWidth:k,maxWidth:H,points:L}=b;if(L.length>1)for(let U=0;U<L.length;U+=1){const j=L[U],re=new B(j.x,j.y,j.pressure,j.time);this.penColor=e,U===0&&this._reset();const O=this._addPoint(re);O&&u(O,{penColor:e,dotSize:T,minWidth:k,maxWidth:H})}else this._reset(),f(L[0],{penColor:e,dotSize:T,minWidth:k,maxWidth:H})}}_toSVG(){const o=this._data,u=Math.max(window.devicePixelRatio||1,1),f=0,b=0,e=this.canvas.width/u,T=this.canvas.height/u,k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttribute("width",this.canvas.width.toString()),k.setAttribute("height",this.canvas.height.toString()),this._fromData(o,(O,{penColor:q})=>{const ee=document.createElement("path");if(!isNaN(O.control1.x)&&!isNaN(O.control1.y)&&!isNaN(O.control2.x)&&!isNaN(O.control2.y)){const me=`M ${O.startPoint.x.toFixed(3)},${O.startPoint.y.toFixed(3)} C ${O.control1.x.toFixed(3)},${O.control1.y.toFixed(3)} ${O.control2.x.toFixed(3)},${O.control2.y.toFixed(3)} ${O.endPoint.x.toFixed(3)},${O.endPoint.y.toFixed(3)}`;ee.setAttribute("d",me),ee.setAttribute("stroke-width",(O.endWidth*2.25).toFixed(3)),ee.setAttribute("stroke",q),ee.setAttribute("fill","none"),ee.setAttribute("stroke-linecap","round"),k.appendChild(ee)}},(O,{penColor:q,dotSize:ee,minWidth:me,maxWidth:oe})=>{const se=document.createElement("circle"),ye=ee>0?ee:(me+oe)/2;se.setAttribute("r",ye.toString()),se.setAttribute("cx",O.x.toString()),se.setAttribute("cy",O.y.toString()),se.setAttribute("fill",q),k.appendChild(se)});const H="data:image/svg+xml;base64,",L=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="${f} ${b} ${this.canvas.width} ${this.canvas.height}" width="${e}" height="${T}">`;let U=k.innerHTML;if(U===void 0){const O=document.createElement("dummy"),q=k.childNodes;O.innerHTML="";for(let ee=0;ee<q.length;ee+=1)O.appendChild(q[ee].cloneNode(!0));U=O.innerHTML}const j="</svg>",re=L+U+j;return H+btoa(re)}}}}]);
