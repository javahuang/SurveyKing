(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[3717],{95101:function(v){v.exports={container:"container___3u4qc",lang:"lang___3VyRW",content:"content___1k5Ro",top:"top___1x2PK",header:"header___3Kw-q",logo:"logo___2aK9c",title:"title___1Izp8",desc:"desc___vFX8U",main:"main___19HXK",icon:"icon___14_b2",other:"other____-JZS",register:"register___3QsXc",prefixIcon:"prefixIcon___2x9jr"}},3178:function(){},29791:function(v,E,e){"use strict";var n=e(27400),O=e(36450),f=e(85893);E.Z=function(){var g,c,C=(0,n.a)(),h=C.system,m=(g=h.setting)===null||g===void 0?void 0:g.copyright,o=[];if((c=h.setting)!==null&&c!==void 0&&c.recordNum){var t;o.push({key:"recordNumber",title:(t=h.setting)===null||t===void 0?void 0:t.recordNum,href:"https://beian.miit.gov.cn/",blankTarget:!0})}return(0,f.jsx)(O.qc,{copyright:m||!1,links:o})}},29552:function(v,E,e){"use strict";e.r(E);var n=e(39428),O=e(34792),f=e(48086),g=e(3182),c=e(94657),C=e(17462),h=e(76772),m=e(67294),o=e(21307),t=e(42285),R=e(73727),W=e(29791),b=e(95101),d=e.n(b),Z=e(27400),F=e(80582),S=e(5481),N=e.n(S),z=e(3980),s=e(85893),k=function(B){var P=B.content;return(0,s.jsx)(h.Z,{style:{marginBottom:24},message:P,type:"error",showIcon:!0})},w=function(){var B=(0,m.useState)(!1),P=(0,c.Z)(B,2),j=P[0],x=P[1],$=(0,m.useState)(),A=(0,c.Z)($,2),I=A[0],H=A[1],U=(0,Z.a)(),_=U.system,X=(0,m.useState)(""),T=(0,c.Z)(X,2),K=T[0],G=T[1],J=(0,m.useState)([]),L=(0,c.Z)(J,2),D=L[0],Q=L[1],y=(0,t.YB)(),Y=function(){var r=(0,g.Z)((0,n.Z)().mark(function u(l){var p;return(0,n.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,D.length===1&&(l.role=D[0].id),a.next=4,U.register(l);case 4:if(p=a.sent,!p.success){a.next=9;break}return f.default.success("\u6CE8\u518C\u6210\u529F"),t.m8.push("/user/login"),a.abrupt("return");case 9:H(p.message),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),f.default.error("\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 15:x(!1);case 16:case"end":return a.stop()}},u,null,[[0,12]])}));return function(l){return r.apply(this,arguments)}}();return(0,m.useEffect)(function(){z.hi.getRegisterRoles().then(function(r){r&&Q(r)})},[]),(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsx)("div",{className:d().lang,"data-lang":!0,children:t.pD&&(0,s.jsx)(t.pD,{})}),(0,s.jsxs)("div",{className:d().content,children:[(0,s.jsxs)("div",{className:d().top,children:[(0,s.jsx)("div",{className:d().header,children:(0,s.jsxs)(R.rU,{to:"/",children:[(0,s.jsx)("img",{alt:"logo",className:d().logo,src:_.avatar?"/api/public/preview/".concat(_==null?void 0:_.avatar):N()}),(0,s.jsx)("span",{className:d().title,children:_==null?void 0:_.name})]})}),(0,s.jsx)("div",{className:d().desc,children:_==null?void 0:_.description})]}),(0,s.jsx)("div",{className:d().main,children:(0,s.jsxs)(o.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:y.formatMessage({id:"pages.login.registerAccount",defaultMessage:"\u6CE8\u518C"})},render:function(u,l){return l.pop()},submitButtonProps:{loading:j,size:"large",style:{width:"100%"},htmlType:"submit"}},onFinish:function(){var r=(0,g.Z)((0,n.Z)().mark(function u(l){return(0,n.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!j){i.next=2;break}return i.abrupt("return");case 2:return x(!0),i.next=5,Y(l);case 5:case"end":return i.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),children:[I&&(0,s.jsx)(k,{content:I}),(0,s.jsx)(o.V,{label:"\u59D3\u540D",name:"name",fieldProps:{size:"large"},placeholder:y.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u59D3\u540D"}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u59D3\u540D!"})}]}),(0,s.jsx)(o.V,{label:"\u767B\u5F55\u8D26\u53F7",name:"username",fieldProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7",rules:[{required:!0,message:"\u767B\u5F55\u8D26\u53F7\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,s.jsx)(o.V.Password,{label:"\u5BC6\u7801",name:"password",fieldProps:{size:"large",onChange:function(u){G(u.target.value)}},placeholder:y.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,s.jsx)(t._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})},{pattern:_.registerInfo.strongPasswordEnabled?/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,16}$/:/.{6,}/,message:_.registerInfo.strongPasswordEnabled?"8-16\u4F4D\u5927\u5C0F\u5199\u5B57\u6BCD\u548C\u6570\u5B57,\u4E0D\u80FD\u4F7F\u7528\u7279\u6B8A\u5B57\u7B26":"\u5BC6\u7801\u81F3\u5C116\u4F4D"}]}),(0,s.jsx)(o.V.Password,{name:"rePassword",label:"\u5BC6\u7801\u786E\u8BA4",fieldProps:{size:"large"},placeholder:"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},{validator:function(){var r=(0,g.Z)((0,n.Z)().mark(function l(p,i){return(0,n.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(i&&K&&i!==K)){M.next=2;break}throw new Error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4!");case 2:case"end":return M.stop()}},l)}));function u(l,p){return r.apply(this,arguments)}return u}()}]}),D.length>1&&(0,s.jsx)(o._I,{name:"role",label:"\u9009\u62E9\u89D2\u8272",fieldProps:{size:"large"},options:D.map(function(r){return{label:r.name,value:r.id}}),placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272"}]}),(0,s.jsx)("div",{style:{marginBottom:24,display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(R.rU,{to:"/user/login",children:"\u8FD4\u56DE\u767B\u5F55"})})]})})]}),(0,s.jsx)(W.Z,{})]})};E.default=(0,F.Pi)(w)},5481:function(v,E,e){v.exports=e.p+"static/logo.efd90f0d.svg"},17462:function(v,E,e){"use strict";var n=e(38663),O=e.n(n),f=e(3178),g=e.n(f)}}]);
