(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[346],{66023:function(ve,L){"use strict";var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};L.Z=e},27029:function(ve,L,e){"use strict";e.d(L,{Z:function(){return fe}});var P=e(28991),x=e(28481),W=e(96156),K=e(81253),E=e(67294),D=e(94184),C=e.n(D),z=e(63017),Z=e(41755),ie=["icon","className","onClick","style","primaryColor","secondaryColor"],S={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function se(O){var j=O.primaryColor,T=O.secondaryColor;S.primaryColor=j,S.secondaryColor=T||(0,Z.pw)(j),S.calculated=!!T}function Ce(){return(0,P.Z)({},S)}var _=function(j){var T=j.icon,ne=j.className,N=j.onClick,d=j.style,n=j.primaryColor,f=j.secondaryColor,r=(0,K.Z)(j,ie),i=S;if(n&&(i={primaryColor:n,secondaryColor:f||(0,Z.pw)(n)}),(0,Z.C3)(),(0,Z.Kp)((0,Z.r)(T),"icon should be icon definiton, but got ".concat(T)),!(0,Z.r)(T))return null;var u=T;return u&&typeof u.icon=="function"&&(u=(0,P.Z)((0,P.Z)({},u),{},{icon:u.icon(i.primaryColor,i.secondaryColor)})),(0,Z.R_)(u.icon,"svg-".concat(u.name),(0,P.Z)({className:ne,onClick:N,style:d,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},r))};_.displayName="IconReact",_.getTwoToneColors=Ce,_.setTwoToneColors=se;var te=_;function ce(O){var j=(0,Z.H9)(O),T=(0,x.Z)(j,2),ne=T[0],N=T[1];return te.setTwoToneColors({primaryColor:ne,secondaryColor:N})}function F(){var O=te.getTwoToneColors();return O.calculated?[O.primaryColor,O.secondaryColor]:O.primaryColor}var le=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ce("#1890ff");var ee=E.forwardRef(function(O,j){var T,ne=O.className,N=O.icon,d=O.spin,n=O.rotate,f=O.tabIndex,r=O.onClick,i=O.twoToneColor,u=(0,K.Z)(O,le),X=E.useContext(z.Z),B=X.prefixCls,A=B===void 0?"anticon":B,Q=C()(A,(T={},(0,W.Z)(T,"".concat(A,"-").concat(N.name),!!N.name),(0,W.Z)(T,"".concat(A,"-spin"),!!d||N.name==="loading"),T),ne),Y=f;Y===void 0&&r&&(Y=-1);var ae=n?{msTransform:"rotate(".concat(n,"deg)"),transform:"rotate(".concat(n,"deg)")}:void 0,s=(0,Z.H9)(i),re=(0,x.Z)(s,2),$=re[0],a=re[1];return E.createElement("span",(0,P.Z)((0,P.Z)({role:"img","aria-label":N.name},u),{},{ref:j,tabIndex:Y,onClick:r,className:Q}),E.createElement(te,{icon:N,primaryColor:$,secondaryColor:a,style:ae}))});ee.displayName="AntdIcon",ee.getTwoToneColor=F,ee.setTwoToneColor=ce;var fe=ee},59271:function(ve,L,e){"use strict";e.d(L,{Z:function(){return C}});var P=e(28991),x=e(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"}}]},name:"home",theme:"outlined"},K=W,E=e(27029),D=function(Z,ie){return x.createElement(E.Z,(0,P.Z)((0,P.Z)({},Z),{},{ref:ie,icon:K}))};D.displayName="HomeOutlined";var C=x.forwardRef(D)},81262:function(){},18727:function(ve,L,e){"use strict";e.r(L),e.d(L,{Practice:function(){return re},default:function(){return $}});var P=e(36017),x=e(35247),W=e(71194),K=e(50146),E=e(11849),D=e(39428),C=e(3182),z=e(68068),Z=e(9761),ie=e(1615),S=e(67294),se=e(5977);const Ce="Left",_="Right",te="Up",ce="Down",F={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:Infinity,touchEventOptions:{passive:!0}},le={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},ee="mousemove",fe="mouseup",O="touchend",j="touchmove",T="touchstart";function ne(a,h,v,g){return a>h?v>0?_:Ce:g>0?ce:te}function N(a,h){if(h===0)return a;const v=Math.PI/180*h,g=a[0]*Math.cos(v)+a[1]*Math.sin(v),U=a[1]*Math.cos(v)-a[0]*Math.sin(v);return[g,U]}function d(a,h){const v=t=>{const c="touches"in t;c&&t.touches.length>1||a((l,m)=>{m.trackMouse&&!c&&(document.addEventListener(ee,g),document.addEventListener(fe,w));const{clientX:o,clientY:k}=c?t.touches[0]:t,J=N([o,k],m.rotationAngle);return m.onTouchStartOrOnMouseDown&&m.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},l),le),{initial:J.slice(),xy:J,start:t.timeStamp||0})})},g=t=>{a((c,l)=>{const m="touches"in t;if(m&&t.touches.length>1)return c;if(t.timeStamp-c.start>l.swipeDuration)return c.swiping?Object.assign(Object.assign({},c),{swiping:!1}):c;const{clientX:o,clientY:k}=m?t.touches[0]:t,[J,me]=N([o,k],l.rotationAngle),he=J-c.xy[0],ge=me-c.xy[1],ue=Math.abs(he),R=Math.abs(ge),de=(t.timeStamp||0)-c.start,Oe=Math.sqrt(ue*ue+R*R)/(de||1),Se=[he/(de||1),ge/(de||1)],pe=ne(ue,R,he,ge),Te=typeof l.delta=="number"?l.delta:l.delta[pe.toLowerCase()]||F.delta;if(ue<Te&&R<Te&&!c.swiping)return c;const be={absX:ue,absY:R,deltaX:he,deltaY:ge,dir:pe,event:t,first:c.first,initial:c.initial,velocity:Oe,vxvy:Se};be.first&&l.onSwipeStart&&l.onSwipeStart(be),l.onSwiping&&l.onSwiping(be);let je=!1;return(l.onSwiping||l.onSwiped||l[`onSwiped${pe}`])&&(je=!0),je&&l.preventScrollOnSwipe&&l.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},c),{first:!1,eventData:be,swiping:!0})})},U=t=>{a((c,l)=>{let m;if(c.swiping&&c.eventData){if(t.timeStamp-c.start<l.swipeDuration){m=Object.assign(Object.assign({},c.eventData),{event:t}),l.onSwiped&&l.onSwiped(m);const o=l[`onSwiped${m.dir}`];o&&o(m)}}else l.onTap&&l.onTap({event:t});return l.onTouchEndOrOnMouseUp&&l.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},c),le),{eventData:m})})},H=()=>{document.removeEventListener(ee,g),document.removeEventListener(fe,w)},w=t=>{H(),U(t)},I=(t,c)=>{let l=()=>{};if(t&&t.addEventListener){const m=Object.assign(Object.assign({},F.touchEventOptions),c.touchEventOptions),o=[[T,v,m],[j,g,Object.assign(Object.assign({},m),c.preventScrollOnSwipe?{passive:!1}:{})],[O,U,m]];o.forEach(([k,J,me])=>t.addEventListener(k,J,me)),l=()=>o.forEach(([k,J])=>t.removeEventListener(k,J))}return l},oe={ref:t=>{t!==null&&a((c,l)=>{if(c.el===t)return c;const m={};return c.el&&c.el!==t&&c.cleanUpTouch&&(c.cleanUpTouch(),m.cleanUpTouch=void 0),l.trackTouch&&t&&(m.cleanUpTouch=I(t,l)),Object.assign(Object.assign(Object.assign({},c),{el:t}),m)})}};return h.trackMouse&&(oe.onMouseDown=v),[oe,I]}function n(a,h,v,g){return!h.trackTouch||!a.el?(a.cleanUpTouch&&a.cleanUpTouch(),Object.assign(Object.assign({},a),{cleanUpTouch:void 0})):a.cleanUpTouch?h.preventScrollOnSwipe!==v.preventScrollOnSwipe||h.touchEventOptions.passive!==v.touchEventOptions.passive?(a.cleanUpTouch(),Object.assign(Object.assign({},a),{cleanUpTouch:g(a.el,h)})):a:Object.assign(Object.assign({},a),{cleanUpTouch:g(a.el,h)})}function f(a){const{trackMouse:h}=a,v=S.useRef(Object.assign({},le)),g=S.useRef(Object.assign({},F)),U=S.useRef(Object.assign({},g.current));U.current=Object.assign({},g.current),g.current=Object.assign(Object.assign({},F),a);let H;for(H in F)g.current[H]===void 0&&(g.current[H]=F[H]);const[w,I]=S.useMemo(()=>d(G=>v.current=G(v.current,g.current),{trackMouse:h}),[h]);return v.current=n(v.current,g.current,U.current,I),w}var r=e(92725),i=e(12997),u=e(96389),X=e(42285),B=e(78210),A=e(3980),Q=e(32235),Y=e(27400),ae=e(59271),s=e(85893),re=(0,Z.Pi)(function(){var a,h,v,g,U=(0,se.UO)(),H=U.id,w=U.answerId,I=(0,se.TH)(),G=I.query.preview==="1",oe=I.query.pattern,t=I.query.openid,c=I.query.ptype,l=(0,S.useMemo)(function(){return(0,u.SB)()},[]),m=(0,S.useRef)(null),o=(0,S.useMemo)(function(){return new Q.b({surveyRef:m,id:"exercise",answerId:w,repoId:H,examExerciseType:c})},[m,H,w]),k=(0,Y.a)();(0,S.useEffect)(function(){k.currentUser()},[k]);var J=o.saving,me=o.loading,he=(a=o.setting)===null||a===void 0?void 0:a.answerSetting,ge=o.loginRequired,ue=o.verifying,R=he||{},de=R.autoSave,Oe=R.progressBar,Se=R.initialValues,pe=R.questionNumber,Te=R.wechatOnly,be=R.onePageOneQuestion,je=R.answerSheetVisible,Be=R.triggerType,Ue=R.copyEnabled,Ze=((h=o.setting)===null||h===void 0?void 0:h.examSetting)||{},ze=Ze.exerciseMode,Fe=Ze.maxSwitchScreenTimes,Le=!!((v=o.setting)!==null&&v!==void 0&&(g=v.examSetting)!==null&&g!==void 0&&g.randomSurveyWrong),Ae=o.errorMessage,we=o.savedAnswer,Me=o.confirmTempAnswerType,$e=o.statistics,ye=o.survey,Ie=o.answerId,Re=o.mode,xe=o.success,De=(0,u.XO)(ye,I);(0,S.useEffect)(function(){ye&&(0,u.iq)(ye,"statEnabled","quota")&&o.loadStatistics()},[ye,o]);var Xe=f({onSwipedLeft:function(){var p;(p=m.current)===null||p===void 0||p.getStore().handleNext()},onSwipedRight:function(){var p;(p=m.current)===null||p===void 0||p.getStore().handlePrev()}}),He=(0,S.useCallback)(function(q,p){Oe&&o.changeProgress(p),de&&q&&o.tempSave(q)},[Oe]),Ve=function(){return(0,s.jsx)(i.BW,{})},Ne=function(p){var b,y;return(0,s.jsxs)("div",{className:"render-failure ".concat(l?"mobile":"phone"),children:[((b=o.project)===null||b===void 0?void 0:b.name)&&(0,s.jsx)("div",{className:"title",children:(y=o.project)===null||y===void 0?void 0:y.name}),(0,s.jsxs)("div",{className:"content",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i.AT,{})}),(0,s.jsx)("h2",{children:Ae||p}),(0,s.jsx)("div",{children:"\u611F\u8C22\u5173\u6CE8\uFF01"})]})]})},We=function(){if(xe)return(0,s.jsx)(s.Fragment,{});if(me)return(0,s.jsx)(r.Z,{});if(o.errorCode!==200)return Ne();if(Te&&!(0,u.CL)())return Ne("\u53EA\u80FD\u5728\u5FAE\u4FE1\u4E2D\u6253\u5F00");if(ge)return(0,s.jsx)("div",{children:Ve()});if(ye&&!xe&&!ue)return Me===1&&de&&Re==="survey"&&!Ie?(0,s.jsx)(i.oq,{}):(0,s.jsx)("div",{style:{userSelect:Ue===!1?"none":"unset"},children:(0,s.jsx)(z.Z,{ref:m,mode:Re,loading:J||me,progressBar:Oe,questionNumber:pe,theme:l?"antdMobile":"antd",schema:ye,onChange:He,onePageOneQuestion:!0,answerSheetVisible:!0,exerciseMode:!0,wrongMode:Le,pattern:oe,triggerType:Be,onInit:function(b){o.tempSave(b.values)},initialQuestionScore:o.initialQuestionScore,onDictSearch:function(){var p=(0,C.Z)((0,D.Z)().mark(function b(y){var V;return(0,D.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,A.hi.loadDict(y);case 2:if(V=M.sent,!V.success){M.next=5;break}return M.abrupt("return",V.data);case 5:return M.abrupt("return",[]);case 6:case"end":return M.stop()}},b)}));return function(b){return p.apply(this,arguments)}}(),initialValues:Me===3?De:(0,E.Z)((0,E.Z)((0,E.Z)((0,E.Z)({},Se),de?we==null?void 0:we.answer:{}),De),o.values),statistics:$e,onUpload:function(b,y){return o.upload(b,y)},footerVisible:!(G||oe==="readPretty"),headerVisible:!G,isPreview:G,onLink:function(b){A.hi.loadLinkResult((0,E.Z)((0,E.Z)({},b),{},{projectId:H})).then(function(y){if(y.success&&y.data.answer){var V=y.data.answer;Object.keys(V).forEach(function(Ee){var M=V[Ee];if(b.questionId!==Ee){var Pe;(Pe=m.current)===null||Pe===void 0||Pe.setValue(Ee,M)}})}})},onSubmit:function(b){o.saveData((0,E.Z)((0,E.Z)({},b),{},{openid:t}),{answerId:Ie}).then(function(y){!(y!=null&&y.success)&&y!==null&&y!==void 0&&y.message&&(l?ie.u_.alert({title:"\u4FDD\u5B58\u5931\u8D25",content:(0,s.jsx)(B.Z,{html:y.message})}):K.Z.error({title:"\u4FDD\u5B58\u5931\u8D25",content:(0,s.jsx)(B.Z,{html:y.message}),okText:"\u77E5\u9053\u4E86"}))})},onNote:function(b,y){A.hi.updateUserBook({templateId:b,note:y})},onLazyLoad:function(){var p=(0,C.Z)((0,D.Z)().mark(function b(y){var V;return(0,D.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,A.hi.getTemplate({id:y});case 2:return V=M.sent,M.abrupt("return",(0,E.Z)((0,E.Z)({},V),{},{schema:V==null?void 0:V.template}));case 4:case"end":return M.stop()}},b)}));return function(b){return p.apply(this,arguments)}}()})})};(0,S.useEffect)(function(){xe&&X.m8.push("/exercise")},[xe]);var Ke=function(){var p,b,y=(p=o.survey)===null||p===void 0||(b=p.attribute)===null||b===void 0?void 0:b.backgroundImage;if(y)return{backgroundImage:"url(/api/public/preview/".concat(y,")")}};return(0,s.jsxs)(u.ff.Provider,{value:o,children:[(0,s.jsx)("div",{style:{padding:20},children:(0,s.jsxs)(x.Z,{children:[(0,s.jsxs)(x.Z.Item,{onClick:function(){return X.m8.push("/")},children:[(0,s.jsx)(ae.Z,{}),"\u9996\u9875"]}),(0,s.jsx)(x.Z.Item,{onClick:function(){return X.m8.push("/exercise")},children:"\u5728\u7EBF\u7EC3\u4E60"})]})}),(0,s.jsx)("div",{className:"survey ".concat(l?"mobile":"pc"),style:Ke(),children:We()})]})}),$=function(){var a=(0,se.UO)(),h=a.id,v=h===void 0?"":h,g=a.answerId;return(0,s.jsx)(re,{id:v,aId:g})}},35247:function(ve,L,e){"use strict";e.d(L,{Z:function(){return N}});var P=e(96156),x=e(22122),W=e(85061),K=e(94184),E=e.n(K),D=e(50344),C=e(67294),z=e(53124),Z=e(28682),ie=e(96159),S=e(13622),se=e(81555),Ce=function(d,n){var f={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&n.indexOf(r)<0&&(f[r]=d[r]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(d);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(d,r[i])&&(f[r[i]]=d[r[i]]);return f},_=function(n){var f=n.prefixCls,r=n.separator,i=r===void 0?"/":r,u=n.children,X=n.menu,B=n.overlay,A=n.dropdownProps,Q=Ce(n,["prefixCls","separator","children","menu","overlay","dropdownProps"]),Y=C.useContext(z.E_),ae=Y.getPrefixCls,s=ae("breadcrumb",f),re=function(h){if(X||B){var v=(0,x.Z)({},A);return"overlay"in n&&(v.overlay=B),C.createElement(se.Z,(0,x.Z)({menu:X,placement:"bottom"},v),C.createElement("span",{className:"".concat(s,"-overlay-link")},h,C.createElement(S.Z,null)))}return h},$;return"href"in Q?$=C.createElement("a",(0,x.Z)({className:"".concat(s,"-link")},Q),u):$=C.createElement("span",(0,x.Z)({className:"".concat(s,"-link")},Q),u),$=re($),u!=null?C.createElement("li",null,$,i&&C.createElement("span",{className:"".concat(s,"-separator")},i)):null};_.__ANT_BREADCRUMB_ITEM=!0;var te=_,ce=function(n){var f=n.children,r=C.useContext(z.E_),i=r.getPrefixCls,u=i("breadcrumb");return C.createElement("span",{className:"".concat(u,"-separator")},f||"/")};ce.__ANT_BREADCRUMB_SEPARATOR=!0;var F=ce,le=function(d,n){var f={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&n.indexOf(r)<0&&(f[r]=d[r]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(d);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(d,r[i])&&(f[r[i]]=d[r[i]]);return f};function ee(d,n){if(!d.breadcrumbName)return null;var f=Object.keys(n).join("|"),r=d.breadcrumbName.replace(new RegExp(":(".concat(f,")"),"g"),function(i,u){return n[u]||i});return r}function fe(d,n,f,r){var i=f.indexOf(d)===f.length-1,u=ee(d,n);return i?C.createElement("span",null,u):C.createElement("a",{href:"#/".concat(r.join("/"))},u)}var O=function(n,f){return n=(n||"").replace(/^\//,""),Object.keys(f).forEach(function(r){n=n.replace(":".concat(r),f[r])}),n},j=function(n,f,r){var i=(0,W.Z)(n),u=O(f||"",r);return u&&i.push(u),i},T=function(n){var f=n.prefixCls,r=n.separator,i=r===void 0?"/":r,u=n.style,X=n.className,B=n.routes,A=n.children,Q=n.itemRender,Y=Q===void 0?fe:Q,ae=n.params,s=ae===void 0?{}:ae,re=le(n,["prefixCls","separator","style","className","routes","children","itemRender","params"]),$=C.useContext(z.E_),a=$.getPrefixCls,h=$.direction,v,g=a("breadcrumb",f);if(B&&B.length>0){var U=[];v=B.map(function(w){var I=O(w.path,s);I&&U.push(I);var G;w.children&&w.children.length&&(G=C.createElement(Z.Z,{items:w.children.map(function(t){return{key:t.path||t.breadcrumbName,label:Y(t,s,B,j(U,t.path,s))}})}));var oe={separator:i};return G&&(oe.overlay=G),C.createElement(te,(0,x.Z)({},oe,{key:I||w.breadcrumbName}),Y(w,s,B,U))})}else A&&(v=(0,D.Z)(A).map(function(w,I){return w&&(0,ie.Tm)(w,{separator:i,key:I})}));var H=E()(g,(0,P.Z)({},"".concat(g,"-rtl"),h==="rtl"),X);return C.createElement("nav",(0,x.Z)({className:H,style:u},re),C.createElement("ol",null,v))};T.Item=te,T.Separator=F;var ne=T,N=ne},36017:function(ve,L,e){"use strict";var P=e(38663),x=e.n(P),W=e(81262),K=e.n(W),E=e(59250),D=e(30887)},13622:function(ve,L,e){"use strict";var P=e(28991),x=e(67294),W=e(66023),K=e(27713),E=function(z,Z){return x.createElement(K.Z,(0,P.Z)((0,P.Z)({},z),{},{ref:Z,icon:W.Z}))},D=x.forwardRef(E);L.Z=D}}]);
