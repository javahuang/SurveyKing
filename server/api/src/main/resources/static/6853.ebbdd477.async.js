(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[6853],{80341:function(){},56853:function(ue,V,o){"use strict";o.r(V),o.d(V,{default:function(){return se}});var h=o(94657),E=o(1615),m=o(67294),W=o(42285),j=o(11849),D=o(39428),l=o(83279),k=o(3182),_=o(54029),G=o(79166),A=o(402),ee=o(56118),te=o(3980),F=o(27484),H=o.n(F),v=o(85893),ae=ee.Z.Text,re=function(w){var $=w.itemKey,n=w.mode,e=w.type,s=(0,W.YB)(),r=(0,m.useState)([]),t=(0,h.Z)(r,2),c=t[0],y=t[1],i=(0,m.useRef)({current:1,pageSize:10}),x=function(a){var f=a.status;return n==="exam"&&e==="history"?(0,v.jsxs)("div",{style:{textAlign:"right"},children:[(0,v.jsx)(ae,{type:"danger",strong:!0,style:{fontSize:18,marginRight:5},children:a.examTotal}),(0,v.jsx)("span",{style:{fontSize:12},children:s.formatMessage({id:"pages.home.todo.table.score.unit",defaultMessage:"\u5206"})}),(0,v.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:H()(a.endTime).format("YYYY-MM-DD HH:mm")})]}):n==="survey"&&e==="history"?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{style:{fontSize:12,color:"#8c8c8c"},children:H()(a.endTime).format("YYYY-MM-DD HH:mm")})}):f===0?(0,v.jsx)(G.Z,{status:"default",text:s.formatMessage({id:"pages.home.todo.table.status.notStarted",defaultMessage:"\u672A\u5F00\u59CB"})}):f===1?(0,v.jsx)(G.Z,{status:"processing",text:s.formatMessage({id:"pages.home.todo.table.status.processing",defaultMessage:"\u8FDB\u884C\u4E2D"})}):(0,v.jsx)(G.Z,{status:"success",text:s.formatMessage({id:"pages.home.todo.table.status.finished",defaultMessage:"\u5DF2\u5B8C\u6210"})})};function Z(u){return S.apply(this,arguments)}function S(){return S=(0,k.Z)((0,D.Z)().mark(function u(a){var f,d,g,N,I,Y;return(0,D.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return C&&!a&&c.length>0&&(i.current.current=i.current.current+1),p.next=3,te.hi.getWithPagination(e==="todo"?"/api/listUserTask":"/api/listHistoryTask",(0,j.Z)((0,j.Z)({},i.current),{},{type:n,current:a||i.current.current}));case 3:return f=p.sent,d=i.current,g=d.pageSize,N=g===void 0?10:g,I=d.total,Y=I===void 0?0:I,a||(i.current=(0,j.Z)((0,j.Z)({},i.current),{},{total:f.total}),R(Y/N>i.current.current)),p.abrupt("return",f.list);case 7:case"end":return p.stop()}},u)})),S.apply(this,arguments)}var P=(0,m.useState)(!0),T=(0,h.Z)(P,2),C=T[0],R=T[1],M=function(){var u=(0,k.Z)((0,D.Z)().mark(function a(){var f;return(0,D.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Z();case 2:f=g.sent,y([].concat((0,l.Z)(c),(0,l.Z)(f)));case 4:case"end":return g.stop()}},a)}));return function(){return u.apply(this,arguments)}}(),b=function(a){var f=new Date().getTime(),d=[];return e==="history"&&(n==="exam"?d.push({key:"start",text:s.formatMessage({id:"pages.home.todo.table.action.viewResult",defaultMessage:"\u67E5\u770B\u7ED3\u679C"}),primary:!0,onClick:function(){window.open("/s/".concat(a.projectId,"/exam-result/").concat(a.answerId))}}):d.push({key:"start",text:s.formatMessage({id:"pages.home.todo.table.action.viewAnswer",defaultMessage:"\u67E5\u770B\u7B54\u6848"}),primary:!0,onClick:function(){window.open("/s/".concat(a.projectId,"/").concat(a.answerId,"?pattern=readPretty"))}})),e=="todo"&&(n==="exam"?a.examStartTime&&a.examStartTime>f?d.push({key:"start",text:s.formatMessage({id:"pages.home.mobile.exam.notStarted",defaultMessage:"\u8003\u8BD5\u672A\u5F00\u59CB"}),danger:!0,primary:!0}):a.examEndTime&&f>a.examEndTime?a.status===2?d.push({key:"result",text:s.formatMessage({id:"pages.home.todo.table.action.viewResult",defaultMessage:"\u67E5\u770B\u7ED3\u679C"}),primary:!0,onClick:function(){window.open("/s/".concat(a.projectId,"/exam-result/").concat(a.answerId))}}):d.push({key:"result",text:s.formatMessage({id:"pages.home.mobile.exam.ended",defaultMessage:"\u8003\u8BD5\u5DF2\u7ED3\u675F"}),primary:!0}):(a.status===1||a.status===0)&&d.push({key:"start",text:s.formatMessage({id:"pages.home.mobile.exam.start",defaultMessage:"\u5F00\u59CB\u8003\u8BD5"}),primary:!0,onClick:function(){window.open("/s/".concat(a.projectId))}}):a.endTime&&f>a.endTime?d.push({key:"start",text:s.formatMessage({id:"pages.home.mobile.survey.ended",defaultMessage:"\u95EE\u5377\u5DF2\u7ED3\u675F"}),danger:!0}):d.push({key:"start",text:s.formatMessage({id:"pages.home.mobile.survey.start",defaultMessage:"\u5F00\u59CB\u7B54\u5377"}),primary:!0,onClick:function(){window.open("/s/".concat(a.projectId))}})),d.push({key:"cancel",text:s.formatMessage({id:"pages.home.mobile.action.cancel",defaultMessage:"\u53D6\u6D88"})}),d};return(0,v.jsx)("div",{style:{height:"100vh",overflowY:"scroll"},children:(0,v.jsxs)(E.t8,{onRefresh:(0,k.Z)((0,D.Z)().mark(function u(){var a;return(0,D.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Z(1);case 2:a=d.sent,y([].concat((0,l.Z)(a),(0,l.Z)(c.filter(function(g){return!a.map(function(N){return N.projectId}).includes(g.projectId)}))));case 4:case"end":return d.stop()}},u)})),children:[(0,v.jsx)(E.aV,{children:c.map(function(u,a){return(0,v.jsx)(E.aV.Item,{onClick:function(){E.u_.show({content:u.name,closeOnAction:!0,actions:b(u)})},extra:x(u),description:u.examStartTime?H()(u.examStartTime).format("YYYY-MM-DD HH:mm"):void 0,children:u.name},a)})}),(0,v.jsx)(E.v_,{loadMore:M,hasMore:C})]},$)})},ne=re;function se(){var z=(0,W.YB)(),w=(0,m.useRef)(null),$=[{key:"survey",title:z.formatMessage({id:"pages.home.todo.tab.mySurveys",defaultMessage:"\u6211\u7684\u95EE\u5377"}),type:"todo",mode:"survey"},{key:"exam",title:z.formatMessage({id:"pages.home.todo.tab.myExams",defaultMessage:"\u6211\u7684\u8003\u8BD5"}),type:"todo",mode:"exam"},{key:"surveyHistory",title:z.formatMessage({id:"pages.home.todo.tab.surveyHistory",defaultMessage:"\u95EE\u5377\u8BB0\u5F55"}),type:"history",mode:"survey"},{key:"examHistory",title:z.formatMessage({id:"pages.home.todo.tab.examHistory",defaultMessage:"\u8003\u8BD5\u8BB0\u5F55"}),type:"history",mode:"exam"}],n=(0,m.useState)(0),e=(0,h.Z)(n,2),s=e[0],r=e[1];return(0,v.jsxs)("div",{className:"mobile-home",children:[(0,v.jsx)(E.mQ,{activeKey:$[s].key,onChange:function(c){var y,i=$.findIndex(function(x){return x.key===c});r(i),(y=w.current)===null||y===void 0||y.swipeTo(i)},children:$.map(function(t){return(0,v.jsx)(E.mQ.Tab,{title:t.title},t.key)})}),(0,v.jsx)(E.tq,{direction:"horizontal",loop:!0,indicator:function(){return null},ref:w,defaultIndex:s,onIndexChange:function(c){r(c)},children:$.map(function(t){return(0,v.jsx)(E.tq.Item,{children:(0,v.jsx)("div",{className:"survey",children:(0,v.jsx)(ne,{itemKey:t.key,mode:t.mode,type:t.type})})},t.key)})})]})}},79166:function(ue,V,o){"use strict";o.d(V,{Z:function(){return $}});var h=o(96156),E=o(90484),m=o(22122),W=o(94184),j=o.n(W),D=o(5461),l=o(67294),k=o(53124),_=o(96159),G=o(98787);function A(n){return G.Y.includes(n)}var ee=function(e){var s=e.className,r=e.prefixCls,t=e.style,c=e.color,y=e.children,i=e.text,x=e.placement,Z=x===void 0?"end":x,S=l.useContext(k.E_),P=S.getPrefixCls,T=S.direction,C=P("ribbon",r),R=A(c),M=j()(C,"".concat(C,"-placement-").concat(Z),(0,h.Z)((0,h.Z)({},"".concat(C,"-rtl"),T==="rtl"),"".concat(C,"-color-").concat(c),R),s),b={},u={};return c&&!R&&(b.background=c,u.color=c),l.createElement("div",{className:"".concat(C,"-wrapper")},y,l.createElement("div",{className:M,style:(0,m.Z)((0,m.Z)({},b),t)},l.createElement("span",{className:"".concat(C,"-text")},i),l.createElement("div",{className:"".concat(C,"-corner"),style:u})))},te=ee,F=o(28481);function H(n){var e=n.prefixCls,s=n.value,r=n.current,t=n.offset,c=t===void 0?0:t,y;return c&&(y={position:"absolute",top:"".concat(c,"00%"),left:0}),l.createElement("span",{style:y,className:j()("".concat(e,"-only-unit"),{current:r})},s)}function v(n,e,s){for(var r=n,t=0;(r+10)%10!==e;)r+=s,t+=s;return t}function ae(n){var e=n.prefixCls,s=n.count,r=n.value,t=Number(r),c=Math.abs(s),y=l.useState(t),i=(0,F.Z)(y,2),x=i[0],Z=i[1],S=l.useState(c),P=(0,F.Z)(S,2),T=P[0],C=P[1],R=function(){Z(t),C(c)};l.useEffect(function(){var N=setTimeout(function(){R()},1e3);return function(){clearTimeout(N)}},[t]);var M,b;if(x===t||Number.isNaN(t)||Number.isNaN(x))M=[l.createElement(H,(0,m.Z)({},n,{key:t,current:!0}))],b={transition:"none"};else{M=[];for(var u=t+10,a=[],f=t;f<=u;f+=1)a.push(f);var d=a.findIndex(function(N){return N%10===x});M=a.map(function(N,I){var Y=N%10;return l.createElement(H,(0,m.Z)({},n,{key:N,value:Y,offset:I-d,current:I===d}))});var g=T<c?1:-1;b={transform:"translateY(".concat(-v(x,t,g),"00%)")}}return l.createElement("span",{className:"".concat(e,"-only"),style:b,onTransitionEnd:R},M)}var re=function(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,r=Object.getOwnPropertySymbols(n);t<r.length;t++)e.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(n,r[t])&&(s[r[t]]=n[r[t]]);return s},ne=function(e){var s=e.prefixCls,r=e.count,t=e.className,c=e.motionClassName,y=e.style,i=e.title,x=e.show,Z=e.component,S=Z===void 0?"sup":Z,P=e.children,T=re(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),C=l.useContext(k.E_),R=C.getPrefixCls,M=R("scroll-number",s),b=(0,m.Z)((0,m.Z)({},T),{"data-show":x,style:y,className:j()(M,t,c),title:i}),u=r;if(r&&Number(r)%1==0){var a=String(r).split("");u=a.map(function(f,d){return l.createElement(ae,{prefixCls:M,count:Number(r),value:f,key:a.length-d})})}return y&&y.borderColor&&(b.style=(0,m.Z)((0,m.Z)({},y),{boxShadow:"0 0 0 1px ".concat(y.borderColor," inset")})),P?(0,_.Tm)(P,function(f){return{className:j()("".concat(M,"-custom-component"),f==null?void 0:f.className,c)}}):l.createElement(S,b,u)},se=ne,z=function(n,e){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,r=Object.getOwnPropertySymbols(n);t<r.length;t++)e.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(n,r[t])&&(s[r[t]]=n[r[t]]);return s},w=function(e){var s=e.prefixCls,r=e.scrollNumberPrefixCls,t=e.children,c=e.status,y=e.text,i=e.color,x=e.count,Z=x===void 0?null:x,S=e.overflowCount,P=S===void 0?99:S,T=e.dot,C=T===void 0?!1:T,R=e.size,M=R===void 0?"default":R,b=e.title,u=e.offset,a=e.style,f=e.className,d=e.showZero,g=d===void 0?!1:d,N=z(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),I=l.useContext(k.E_),Y=I.getPrefixCls,L=I.direction,p=Y("badge",s),oe=Z>P?"".concat(P,"+"):Z,J=oe==="0"||oe===0,pe=Z===null||J&&!g,le=(c!=null||i!=null)&&pe,Q=C&&!J,B=Q?"":oe,K=(0,l.useMemo)(function(){var O=B==null||B==="";return(O||J&&!g)&&!Q},[B,J,g,Q]),de=(0,l.useRef)(Z);K||(de.current=Z);var U=de.current,fe=(0,l.useRef)(B);K||(fe.current=B);var ce=fe.current,me=(0,l.useRef)(Q);K||(me.current=Q);var X=(0,l.useMemo)(function(){if(!u)return(0,m.Z)({},a);var O={marginTop:u[1]};return L==="rtl"?O.left=parseInt(u[0],10):O.right=-parseInt(u[0],10),(0,m.Z)((0,m.Z)({},O),a)},[L,u,a]),ge=b!=null?b:typeof U=="string"||typeof U=="number"?U:void 0,he=K||!y?null:l.createElement("span",{className:"".concat(p,"-status-text")},y),xe=!U||(0,E.Z)(U)!=="object"?void 0:(0,_.Tm)(U,function(O){return{style:(0,m.Z)((0,m.Z)({},X),O.style)}}),Ce=j()((0,h.Z)((0,h.Z)((0,h.Z)({},"".concat(p,"-status-dot"),le),"".concat(p,"-status-").concat(c),!!c),"".concat(p,"-status-").concat(i),A(i))),ve={};i&&!A(i)&&(ve.background=i);var ye=j()(p,(0,h.Z)((0,h.Z)((0,h.Z)({},"".concat(p,"-status"),le),"".concat(p,"-not-a-wrapper"),!t),"".concat(p,"-rtl"),L==="rtl"),f);if(!t&&le){var Ze=X.color;return l.createElement("span",(0,m.Z)({},N,{className:ye,style:X}),l.createElement("span",{className:Ce,style:ve}),y&&l.createElement("span",{style:{color:Ze},className:"".concat(p,"-status-text")},y))}return l.createElement("span",(0,m.Z)({},N,{className:ye}),t,l.createElement(D.default,{visible:!K,motionName:"".concat(p,"-zoom"),motionAppear:!1,motionDeadline:1e3},function(O){var be=O.className,Ne=Y("scroll-number",r),ie=me.current,Me=j()((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)((0,h.Z)({},"".concat(p,"-dot"),ie),"".concat(p,"-count"),!ie),"".concat(p,"-count-sm"),M==="small"),"".concat(p,"-multiple-words"),!ie&&ce&&ce.toString().length>1),"".concat(p,"-status-").concat(c),!!c),"".concat(p,"-status-").concat(i),A(i))),q=(0,m.Z)({},X);return i&&!A(i)&&(q=q||{},q.background=i),l.createElement(se,{prefixCls:Ne,show:!K,motionClassName:be,className:Me,count:ce,title:ge,style:q,key:"scrollNumber"},xe)}),he)};w.Ribbon=te;var $=w},54029:function(ue,V,o){"use strict";var h=o(38663),E=o.n(h),m=o(80341),W=o.n(m)}}]);
