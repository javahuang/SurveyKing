(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[5382],{87588:function(I,v,e){"use strict";var S=e(28991),y=e(67294),l=e(61144),c=e(27029),C=function(j,Z){return y.createElement(c.Z,(0,S.Z)((0,S.Z)({},j),{},{ref:Z,icon:l.Z}))};C.displayName="ExclamationCircleOutlined",v.Z=y.forwardRef(C)},59686:function(I,v,e){"use strict";e.r(v),e.d(v,{default:function(){return W}});var S=e(57663),y=e(71577),l=e(39428),c=e(3182),C=e(34792),O=e(48086),j=e(71194),Z=e(50146),B=e(94657),T=e(3980),L=e(87588),b=e(51042),U=e(36450),F=e(16894),A=e(80582),h=e(67294),D=e(42285),R=e(11849),u=e(21307),t=e(85893),K=(0,A.Pi)(function(r){var s=r.onOk,p=r.onClose,m=r.position,E=(0,h.useRef)(),f=(0,T.m2)(),a=(0,D.YB)(),P=m?m.id?"edit":"view":"create";return(0,t.jsxs)(u.aN,{title:P==="edit"?a.formatMessage({id:"pages.system.position.drawer.edit",defaultMessage:"\u4FEE\u6539\u5C97\u4F4D"}):P==="create"?a.formatMessage({id:"pages.system.position.drawer.create",defaultMessage:"\u65B0\u589E\u5C97\u4F4D"}):a.formatMessage({id:"pages.system.position.drawer.view",defaultMessage:"\u67E5\u770B\u5C97\u4F4D"}),formRef:E,visible:!0,initialValues:m,drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){p()}},onFinish:function(){var n=(0,c.Z)((0,l.Z)().mark(function i(o){var M;return(0,l.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,f.saveOrUpdatePosition((0,R.Z)((0,R.Z)({},m),o));case 2:M=d.sent,M.success&&s();case 4:case"end":return d.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),children:[(0,t.jsxs)(u.ZP.Group,{children:[(0,t.jsx)(u.V,{name:"name",width:"md",label:a.formatMessage({id:"pages.system.position.field.name.label",defaultMessage:"\u5C97\u4F4D\u540D\u79F0"}),placeholder:a.formatMessage({id:"pages.system.position.field.name.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u540D\u79F0"}),required:!0,rules:[{required:!0,message:a.formatMessage({id:"pages.system.position.field.name.required",defaultMessage:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"})}]}),(0,t.jsx)(u.V,{width:"md",name:"code",label:a.formatMessage({id:"pages.system.position.field.code.label",defaultMessage:"\u5C97\u4F4D\u7F16\u7801"}),placeholder:a.formatMessage({id:"pages.system.position.field.code.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u5C97\u4F4D\u7F16\u7801"}),rules:[{required:!0,message:a.formatMessage({id:"pages.system.position.field.code.required",defaultMessage:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"})}],required:!0})]}),(0,t.jsx)(u.ZP.Group,{children:(0,t.jsx)(u._I,{width:"md",request:(0,c.Z)((0,l.Z)().mark(function n(){return(0,l.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",[{label:a.formatMessage({id:"pages.system.position.permission.self",defaultMessage:"\u672C\u4EBA"}),value:"SELF"},{label:a.formatMessage({id:"pages.system.position.permission.selfAndSub",defaultMessage:"\u672C\u4EBA\u53CA\u4E0B\u5C5E"}),value:"SELF_AND_SUB"},{label:a.formatMessage({id:"pages.system.position.permission.dept",defaultMessage:"\u672C\u90E8\u95E8"}),value:"DEPT"},{label:a.formatMessage({id:"pages.system.position.permission.deptAndSub",defaultMessage:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8"}),value:"DEPT_AND_SUB"},{label:a.formatMessage({id:"pages.system.position.permission.all",defaultMessage:"\u5168\u90E8"}),value:"ALL"}]);case 1:case"end":return o.stop()}},n)})),name:"dataPermissionType",label:a.formatMessage({id:"pages.system.position.field.permission.label",defaultMessage:"\u6570\u636E\u6743\u9650"})})})]})}),N=(0,A.Pi)(function(){var r=(0,T.m2)(),s=(0,D.YB)(),p=(0,h.useRef)(),m=(0,h.useState)(),E=(0,B.Z)(m,2),f=E[0],a=E[1];(0,h.useEffect)(function(){r.loadPermissions()},[r]);var P=[{title:s.formatMessage({id:"pages.system.position.column.name",defaultMessage:"\u540D\u79F0"}),dataIndex:"name",ellipsis:!0},{title:s.formatMessage({id:"pages.system.position.column.code",defaultMessage:"\u7F16\u7801"}),dataIndex:"code",hideInSearch:!0},{title:s.formatMessage({id:"pages.system.position.column.permission",defaultMessage:"\u6570\u636E\u6743\u9650"}),dataIndex:"dataPermissionType",valueEnum:{SELF:s.formatMessage({id:"pages.system.position.permission.self",defaultMessage:"\u672C\u4EBA"}),SELF_AND_SUB:s.formatMessage({id:"pages.system.position.permission.selfAndSub",defaultMessage:"\u672C\u4EBA\u53CA\u4E0B\u5C5E"}),DEPT:s.formatMessage({id:"pages.system.position.permission.dept",defaultMessage:"\u672C\u90E8\u95E8"}),DEPT_AND_SUB:s.formatMessage({id:"pages.system.position.permission.deptAndSub",defaultMessage:"\u672C\u90E8\u95E8\u53CA\u4E0B\u5C5E\u90E8\u95E8"}),ALL:s.formatMessage({id:"pages.system.position.permission.all",defaultMessage:"\u5168\u90E8"})},hideInSearch:!0},{title:s.formatMessage({id:"pages.system.position.column.actions",defaultMessage:"\u64CD\u4F5C"}),valueType:"option",width:200,render:function(i,o){return[(0,t.jsx)("a",{onClick:function(){a({visible:!0,current:o})},children:s.formatMessage({id:"pages.system.position.action.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,t.jsx)("a",{onClick:function(){Z.Z.confirm({title:s.formatMessage({id:"pages.system.position.modal.delete.title",defaultMessage:"\u5220\u9664"}),content:s.formatMessage({id:"pages.system.position.modal.delete.content",defaultMessage:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u5C97\u4F4D?"}),icon:(0,t.jsx)(L.Z,{}),okText:s.formatMessage({id:"pages.common.delete",defaultMessage:"\u5220\u9664"}),cancelText:s.formatMessage({id:"pages.common.cancel",defaultMessage:"\u53D6\u6D88"}),onOk:function(){r.deletePosition(o.id).then(function(d){if(d.success){var x;O.default.success(s.formatMessage({id:"pages.system.position.message.deleteSuccess",defaultMessage:"\u5220\u9664\u6210\u529F"})),(x=p.current)===null||x===void 0||x.reload()}})}})},children:s.formatMessage({id:"pages.system.position.action.delete",defaultMessage:"\u5220\u9664"})},"delte")]}}];return(0,t.jsxs)(U._z,{title:!1,children:[(0,t.jsx)(F.ZP,{columns:P,actionRef:p,bordered:!0,dataSource:r.positions,request:function(){var n=(0,c.Z)((0,l.Z)().mark(function i(o){return(0,l.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",r.loadPositions(o));case 1:case"end":return g.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),columnsState:{persistenceKey:"pro-table-singe-position",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{pageSize:5},scroll:{x:650},dateFormatter:"string",headerTitle:s.formatMessage({id:"pages.system.position.header.title",defaultMessage:"\u5C97\u4F4D\u5217\u8868"}),toolBarRender:function(){return[(0,t.jsx)(y.Z,{icon:(0,t.jsx)(b.Z,{}),type:"primary",onClick:function(){a({visible:!0})},children:s.formatMessage({id:"pages.system.position.toolbar.new",defaultMessage:"\u65B0\u5EFA"})},"button")]}}),(f==null?void 0:f.visible)&&(0,t.jsx)(K,{onClose:function(){a(void 0)},onOk:function(){var i;a(void 0),(i=p.current)===null||i===void 0||i.reload()},position:f.current})]})}),W=N}}]);
