(self.webpackChunksurvey_king=self.webpackChunksurvey_king||[]).push([[7905],{19540:function(Ct,de,N){"use strict";N.r(de),N.d(de,{default:function(){return xt}});var kt=N(57663),J=N(71577),E=N(39428),j=N(3182),Mt=N(34792),F=N(48086),Kt=N(71194),Q=N(50146),Dt=N(77576),Ee=N(12028),U=N(94657),I=N(3980),Te=N(87588),Pe=N(51042),we=N(36450),Oe=N(93279),X=N(16894),ie=N(80582),b=N(67294),G=N(42285),B=N(93224),D=N(11849),P=N(32059),q=N(69610),_=N(54941),T=N(3372),ee=N(43028),te=N(15818),je=N(94184),w=N.n(je),W=N(45598),le=b.createContext(null),Le=N(45916),x=N(85893),Ie=["className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","expanded","selected","checked","halfChecked"],ce="open",ue="close",$e="---",Re=function(p){(0,ee.Z)(h,p);var i=(0,te.Z)(h);function h(){var e;(0,q.Z)(this,h);for(var s=arguments.length,f=new Array(s),o=0;o<s;o++)f[o]=arguments[o];return e=i.call.apply(i,[this].concat(f)),e.state={dragNodeHighlight:!1},e.selectHandle=void 0,e.onSelectorClick=function(t){var a=e.props.context.onNodeClick;a(t,(0,T.Z)(e)),e.isSelectable()?e.onSelect(t):e.onCheck(t)},e.onSelectorDoubleClick=function(t){var a=e.props.context.onNodeDoubleClick;a(t,(0,T.Z)(e))},e.onSelect=function(t){if(!e.isDisabled()){var a=e.props.context.onNodeSelect;t.preventDefault(),a(t,(0,T.Z)(e))}},e.onCheck=function(t){if(!e.isDisabled()){var a=e.props,r=a.disableCheckbox,d=a.checked,n=e.props.context.onNodeCheck;if(!(!e.isCheckable()||r)){t.preventDefault();var l=!d;n(t,(0,T.Z)(e),l)}}},e.onMouseEnter=function(t){var a=e.props.context.onNodeMouseEnter;a(t,(0,T.Z)(e))},e.onMouseLeave=function(t){var a=e.props.context.onNodeMouseLeave;a(t,(0,T.Z)(e))},e.onContextMenu=function(t){var a=e.props.context.onNodeContextMenu;a(t,(0,T.Z)(e))},e.onDragStart=function(t){var a=e.props.context.onNodeDragStart;t.stopPropagation(),e.setState({dragNodeHighlight:!0}),a(t,(0,T.Z)(e));try{t.dataTransfer.setData("text/plain","")}catch(r){}},e.onDragEnter=function(t){var a=e.props.context.onNodeDragEnter;t.preventDefault(),t.stopPropagation(),a(t,(0,T.Z)(e))},e.onDragOver=function(t){var a=e.props.context.onNodeDragOver;t.preventDefault(),t.stopPropagation(),a(t,(0,T.Z)(e))},e.onDragLeave=function(t){var a=e.props.context.onNodeDragLeave;t.stopPropagation(),a(t,(0,T.Z)(e))},e.onDragEnd=function(t){var a=e.props.context.onNodeDragEnd;t.stopPropagation(),e.setState({dragNodeHighlight:!1}),a(t,(0,T.Z)(e))},e.onDrop=function(t){var a=e.props.context.onNodeDrop;t.preventDefault(),t.stopPropagation(),e.setState({dragNodeHighlight:!1}),a(t,(0,T.Z)(e))},e.onExpand=function(t){var a=e.props.context.onNodeExpand;a(t,(0,T.Z)(e))},e.setSelectHandle=function(t){e.selectHandle=t},e.getNodeChildren=function(){var t=e.props.children,a=(0,W.default)(t).filter(function(d){return d}),r=ve(a);return a.length!==r.length&&pe(),r},e.getNodeState=function(){var t=e.props.expanded;return e.isLeaf()?null:t?ce:ue},e.isLeaf=function(){var t=e.props,a=t.isLeaf,r=t.loaded,d=e.props.context.loadData,n=e.getNodeChildren().length!==0;return a===!1?!1:a||!d&&!n||d&&r&&!n},e.isDisabled=function(){var t=e.props.disabled,a=e.props.context.disabled;return t===!1?!1:!!(a||t)},e.isCheckable=function(){var t=e.props.checkable,a=e.props.context.checkable;return!a||t===!1?!1:a},e.syncLoadData=function(t){var a=t.expanded,r=t.loading,d=t.loaded,n=e.props.context,l=n.loadData,u=n.onNodeLoad;if(!r&&l&&a&&!e.isLeaf()){var c=e.getNodeChildren().length!==0;!c&&!d&&u((0,T.Z)(e))}},e.renderSwitcher=function(){var t=e.props,a=t.expanded,r=t.switcherIcon,d=e.props.context,n=d.prefixCls,l=d.switcherIcon,u=r||l;if(e.isLeaf())return(0,x.jsx)("span",{className:w()("".concat(n,"-switcher"),"".concat(n,"-switcher-noop")),children:typeof u=="function"?u((0,D.Z)((0,D.Z)({},e.props),{},{isLeaf:!0})):u});var c=w()("".concat(n,"-switcher"),"".concat(n,"-switcher_").concat(a?ce:ue));return(0,x.jsx)("span",{onClick:e.onExpand,className:c,children:typeof u=="function"?u((0,D.Z)((0,D.Z)({},e.props),{},{isLeaf:!1})):u})},e.renderCheckbox=function(){var t=e.props,a=t.checked,r=t.halfChecked,d=t.disableCheckbox,n=e.props.context.prefixCls,l=e.isDisabled(),u=e.isCheckable();if(!u)return null;var c=typeof u!="boolean"?u:null;return(0,x.jsx)("span",{className:w()("".concat(n,"-checkbox"),a&&"".concat(n,"-checkbox-checked"),!a&&r&&"".concat(n,"-checkbox-indeterminate"),(l||d)&&"".concat(n,"-checkbox-disabled")),onClick:e.onCheck,children:c})},e.renderIcon=function(){var t=e.props.loading,a=e.props.context.prefixCls;return(0,x.jsx)("span",{className:w()("".concat(a,"-iconEle"),"".concat(a,"-icon__").concat(e.getNodeState()||"docu"),t&&"".concat(a,"-icon_loading"))})},e.renderSelector=function(){var t=e.state.dragNodeHighlight,a=e.props,r=a.title,d=a.selected,n=a.icon,l=a.loading,u=e.props.context,c=u.prefixCls,y=u.showIcon,v=u.icon,m=u.draggable,C=u.loadData,g=e.isDisabled(),k="".concat(c,"-node-content-wrapper"),K;if(y){var Z=n||v;K=Z?(0,x.jsx)("span",{className:w()("".concat(c,"-iconEle"),"".concat(c,"-icon__customize")),children:typeof Z=="function"?Z(e.props):Z}):e.renderIcon()}else C&&l&&(K=e.renderIcon());var S=(0,x.jsx)("span",{className:"".concat(c,"-title"),children:r});return(0,x.jsxs)("span",{ref:e.setSelectHandle,title:typeof r=="string"?r:"",className:w()("".concat(k),"".concat(k,"-").concat(e.getNodeState()||"normal"),!g&&(d||t)&&"".concat(c,"-node-selected"),!g&&m&&"draggable"),draggable:!g&&m||void 0,"aria-grabbed":!g&&m||void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick,onDragStart:m?e.onDragStart:void 0,children:[K,S]})},e.renderChildren=function(){var t=e.props,a=t.expanded,r=t.pos,d=e.props.context,n=d.prefixCls,l=d.motion,u=d.renderTreeNode,c=e.getNodeChildren();if(c.length===0)return null;var y=!0;return c.forEach(function(v){v.props.children.length>0&&(y=!1)}),(0,x.jsx)(Le.ZP,(0,D.Z)((0,D.Z)({visible:a},l),{},{children:function(m){var C=m.style,g=m.className;return(0,x.jsx)("ul",{className:w()(g,"".concat(n,"-child-tree"),a&&"".concat(n,"-child-tree-open")),style:(0,D.Z)((0,D.Z)({},C),{},{display:y?"flex":""}),"data-expanded":a,role:"group",children:me(c,function(k,K){return u(k,K,r)})})}}))},e}return(0,_.Z)(h,[{key:"componentDidMount",value:function(){var s=this.props,f=s.eventKey,o=s.context.registerTreeNode;this.syncLoadData(this.props),o(f,this)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"componentWillUnmount",value:function(){var s=this.props,f=s.eventKey,o=s.context.registerTreeNode;o(f,null)}},{key:"isSelectable",value:function(){var s=this.props.selectable,f=this.props.context.selectable;return typeof s=="boolean"?s:f}},{key:"render",value:function(){var s,f=this.props.loading,o=this.props,t=o.className,a=o.style,r=o.dragOver,d=o.dragOverGapTop,n=o.dragOverGapBottom,l=o.isLeaf,u=o.expanded,c=o.selected,y=o.checked,v=o.halfChecked,m=(0,B.Z)(o,Ie),C=this.props.context,g=C.prefixCls,k=C.filterTreeNode,K=C.draggable,Z=this.isDisabled(),S=Ke(m);return(0,x.jsxs)("li",(0,D.Z)((0,D.Z)({className:w()(t,(s={},(0,P.Z)(s,"".concat(g,"-treenode-disabled"),Z),(0,P.Z)(s,"".concat(g,"-treenode-switcher-").concat(u?"open":"close"),!l),(0,P.Z)(s,"".concat(g,"-treenode-checkbox-checked"),y),(0,P.Z)(s,"".concat(g,"-treenode-checkbox-indeterminate"),v),(0,P.Z)(s,"".concat(g,"-treenode-selected"),c),(0,P.Z)(s,"".concat(g,"-treenode-loading"),f),(0,P.Z)(s,"drag-over",!Z&&r),(0,P.Z)(s,"drag-over-gap-top",!Z&&d),(0,P.Z)(s,"drag-over-gap-bottom",!Z&&n),(0,P.Z)(s,"filter-node",k&&k(this)),s)),style:a,role:"treeitem",onDragEnter:K?this.onDragEnter:void 0,onDragOver:K?this.onDragOver:void 0,onDragLeave:K?this.onDragLeave:void 0,onDrop:K?this.onDrop:void 0,onDragEnd:K?this.onDragEnd:void 0},S),{},{children:[this.renderSwitcher(),this.renderCheckbox(),this.renderSelector(),this.renderChildren()]}))}}]),h}(b.Component),ae=function(i){return(0,x.jsx)(le.Consumer,{children:function(e){return(0,x.jsx)(Re,(0,D.Z)((0,D.Z)({},i),{},{context:e}))}})};ae.defaultProps={title:$e},ae.isTreeNode=1;var re=ae,Ae=["children"],Ue=.25,He=2,fe=!1;function pe(){fe||(fe=!0)}function $(p,i){var h=p.slice(),e=h.indexOf(i);return e>=0&&h.splice(e,1),h}function R(p,i){var h=p.slice();return h.indexOf(i)===-1&&h.push(i),h}function Fe(p){return p.split("-")}function he(p,i){return"".concat(p,"-").concat(i)}function Ge(p){return p&&p.type&&p.type.isTreeNode}function ve(p){return(0,W.default)(p).filter(Ge)}function A(p){var i=p.props||{},h=i.disabled,e=i.disableCheckbox,s=i.checkable;return!!(h||e)||s===!1}function ge(p,i){function h(e,s,f){var o=e?e.props.children:p,t=e?he(f.pos,s):0,a=ve(o);if(e){var r={node:e,index:s,pos:t,key:e.key||t,parentPos:f.node?f.pos:null};i(r)}b.Children.forEach(a,function(d,n){h(d,n,{node:e,pos:t})})}h(null)}function me(p,i){var h=(0,W.default)(p).map(i);return h.length===1?h[0]:h}function Be(p,i){var h=i.props,e=h.eventKey,s=h.pos,f=[];return ge(p,function(o){var t=o.key;f.push(t)}),f.push(e||s),f}function ye(p,i){var h=p.clientY,e=i.selectHandle.getBoundingClientRect(),s=e.top,f=e.bottom,o=e.height,t=Math.max(o*Ue,He);return h<=s+t?-1:h>=f-t?1:0}function xe(p,i){if(!!p){var h=i.multiple;return h?p.slice():p.length?[p[0]]:p}}function Ne(p){return p&&p.map(function(i){return String(i)})}var We=function(i){return i};function Ce(p,i){if(!p)return[];var h=i||{},e=h.processProps,s=e===void 0?We:e,f=Array.isArray(p)?p:[p];return f.map(function(o){var t=o.children,a=(0,B.Z)(o,Ae),r=Ce(t,i);return(0,x.jsx)(re,(0,D.Z)((0,D.Z)({},s(a)),{},{children:r}))})}function ze(p){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=i.initWrapper,e=i.processEntity,s=i.onProcessFinished,f={},o={},t={posEntities:f,keyEntities:o};return h&&(t=h(t)||t),ge(p,function(a){var r=a.node,d=a.index,n=a.pos,l=a.key,u=a.parentPos,c={node:r,index:d,key:l,pos:n};f[n]=c,o[l]=c,c.parent=f[u],c.parent&&(c.parent.children=c.parent.children||[],c.parent.children.push(c)),e&&e(c,t)}),s&&s(t),t}function ne(p){if(!p)return null;var i;if(Array.isArray(p))i={checkedKeys:p,halfCheckedKeys:void 0};else if(typeof p=="object")i={checkedKeys:p.checked||void 0,halfCheckedKeys:p.halfChecked||void 0};else return null;return i.checkedKeys=Ne(i.checkedKeys),i.halfCheckedKeys=Ne(i.halfCheckedKeys),i}function ke(p,i,h){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s={},f={};(e.checkedKeys||[]).forEach(function(n){s[n]=!0}),(e.halfCheckedKeys||[]).forEach(function(n){f[n]=!0});function o(n){if(s[n]!==i){var l=h[n];if(!!l){var u=l.children,c=l.parent,y=l.node;if(!A(y)){var v=!0,m=!1;(u||[]).filter(function(C){return!A(C.node)}).forEach(function(C){var g=C.key,k=s[g],K=f[g];(k||K)&&(m=!0),k||(v=!1)}),i?s[n]=v:s[n]=!1,f[n]=m,c&&o(c.key)}}}}function t(n){if(s[n]!==i){var l=h[n];if(!!l){var u=l.children,c=l.node;A(c)||(s[n]=i,(u||[]).forEach(function(y){t(y.key)}))}}}function a(n){var l=h[n];if(!!l){var u=l.children,c=l.parent,y=l.node;s[n]=i,!A(y)&&((u||[]).filter(function(v){return!A(v.node)}).forEach(function(v){t(v.key)}),c&&o(c.key))}}(p||[]).forEach(function(n){a(n)});var r=[],d=[];return Object.keys(s).forEach(function(n){s[n]&&r.push(n)}),Object.keys(f).forEach(function(n){!s[n]&&f[n]&&d.push(n)}),{checkedKeys:r,halfCheckedKeys:d}}function Me(p,i){var h={};function e(s){if(!h[s]){var f=i[s];if(!!f){h[s]=!0;var o=f.parent,t=f.node;A(t)||o&&e(o.key)}}}return(p||[]).forEach(function(s){e(s)}),Object.keys(h)}function Ke(p){return Object.keys(p).reduce(function(i,h){return(h.substr(0,5)==="data-"||h.substr(0,5)==="aria-")&&(i[h]=p[h]),i},{})}var De=function(p){(0,ee.Z)(h,p);var i=(0,te.Z)(h);function h(){var e;(0,q.Z)(this,h);for(var s=arguments.length,f=new Array(s),o=0;o<s;o++)f[o]=arguments[o];return e=i.call.apply(i,[this].concat(f)),e.domTreeNodes={},e.delayedDragEnterLogic=void 0,e.state={keyEntities:{},selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],dragNodesKeys:[],dragOverNodeKey:null,dropPosition:null,treeNode:[],prevProps:null},e.dragNode=void 0,e.onNodeDragStart=function(t,a){var r=e.state.expandedKeys,d=e.props.onDragStart,n=a.props,l=n.eventKey,u=n.children;e.dragNode=a,e.setState({dragNodesKeys:Be(u,a),expandedKeys:$(r,l)}),d&&d({event:t,node:a})},e.onNodeDragEnter=function(t,a){var r=e.state.expandedKeys,d=e.props.onDragEnter,n=a.props,l=n.pos,u=n.eventKey;if(!!e.dragNode){var c=ye(t,a);if(e.dragNode.props.eventKey===u&&c===0){e.setState({dragOverNodeKey:"",dropPosition:null});return}setTimeout(function(){e.setState({dragOverNodeKey:u,dropPosition:c}),e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(y){clearTimeout(e.delayedDragEnterLogic[y])}),e.delayedDragEnterLogic[l]=window.setTimeout(function(){var y=R(r,u);"expandedKeys"in e.props||e.setState({expandedKeys:y}),d&&d({event:t,node:a,expandedKeys:y})},400)},0)}},e.onNodeDragOver=function(t,a){var r=e.props.onDragOver,d=a.props.eventKey;if(e.dragNode&&d===e.state.dragOverNodeKey){var n=ye(t,a);if(n===e.state.dropPosition)return;e.setState({dropPosition:n})}r&&r({event:t,node:a})},e.onNodeDragLeave=function(t,a){var r=e.props.onDragLeave;e.setState({dragOverNodeKey:""}),r&&r({event:t,node:a})},e.onNodeDragEnd=function(t,a){var r=e.props.onDragEnd;e.setState({dragOverNodeKey:""}),r&&r({event:t,node:a}),e.dragNode=null},e.onNodeDrop=function(t,a){var r=e.state,d=r.dragNodesKeys,n=d===void 0?[]:d,l=r.dropPosition,u=e.props.onDrop,c=a.props,y=c.eventKey,v=c.pos;if(e.setState({dragOverNodeKey:""}),n.indexOf(y)===-1){var m=Fe(v),C={event:t,node:a,dragNode:e.dragNode,dragNodesKeys:n.slice(),dropPosition:l+Number(m[m.length-1]),dropToGap:!1};l!==0&&(C.dropToGap=!0),u&&u(C),e.dragNode=null}},e.onNodeClick=function(t,a){var r=e.props.onClick;r&&r(t,a)},e.onNodeDoubleClick=function(t,a){var r=e.props.onDoubleClick;r&&r(t,a)},e.onNodeSelect=function(t,a){var r=e.state.selectedKeys,d=e.state.keyEntities,n=e.props,l=n.onSelect,u=n.multiple,c=a.props,y=c.selected,v=c.eventKey,m=!y;m?u?r=R(r,v):r=[v]:r=$(r,v);var C=r.map(function(g){var k=d[g];return k?k.node:null}).filter(function(g){return g});e.setUncontrolledState({selectedKeys:r}),l&&l(r,{event:"select",selected:m,node:a,selectedNodes:C,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,a,r){var d=e.state,n=d.keyEntities,l=d.checkedKeys,u=d.halfCheckedKeys,c=e.props,y=c.checkStrictly,v=c.onCheck,m=a.props.eventKey,C,g={event:"check",node:a,checked:r,nativeEvent:t.nativeEvent};if(y){var k=r?R(l,m):$(l,m),K=$(u,m);C={checked:k,halfChecked:K},g.checkedNodes=k.map(function(M){return n[M]}).filter(function(M){return M}).map(function(M){return M.node}),e.setUncontrolledState({checkedKeys:k})}else{var Z=ke([m],r,n,{checkedKeys:l,halfCheckedKeys:u}),S=Z.checkedKeys,L=Z.halfCheckedKeys;C=S,g.checkedNodes=[],g.checkedNodesPositions=[],g.halfCheckedKeys=L,S.forEach(function(M){var H=n[M];if(!!H){var V=H.node,Nt=H.pos;g.checkedNodes.push(V),g.checkedNodesPositions.push({node:V,pos:Nt})}}),e.setUncontrolledState({checkedKeys:S,halfCheckedKeys:L})}v&&v(C,g)},e.onNodeLoad=function(t){return new Promise(function(a){e.setState(function(r){var d=r.loadedKeys,n=d===void 0?[]:d,l=r.loadingKeys,u=l===void 0?[]:l,c=e.props,y=c.loadData,v=c.onLoad,m=t.props.eventKey;if(!y||n.indexOf(m)!==-1||u.indexOf(m)!==-1)return{};var C=y(t);return C.then(function(){var g=e.state,k=g.loadedKeys,K=g.loadingKeys,Z=R(k,m),S=$(K,m);v&&v(Z,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:Z}),e.setState({loadingKeys:S}),a()}),{loadingKeys:R(u,m)}})})},e.onNodeExpand=function(t,a){var r=e.state.expandedKeys,d=e.props,n=d.onExpand,l=d.loadData,u=a.props,c=u.eventKey,y=u.expanded,v=r.indexOf(c),m=!y;if(m?r=R(r,c):r=$(r,c),e.setUncontrolledState({expandedKeys:r}),n&&n(r,{node:a,expanded:m,nativeEvent:t.nativeEvent}),m&&l){var C=e.onNodeLoad(a);return C?C.then(function(){e.setUncontrolledState({expandedKeys:r})}):null}return null},e.onNodeMouseEnter=function(t,a){var r=e.props.onMouseEnter;r&&r({event:t,node:a})},e.onNodeMouseLeave=function(t,a){var r=e.props.onMouseLeave;r&&r({event:t,node:a})},e.onNodeContextMenu=function(t,a){var r=e.props.onRightClick;r&&(t.preventDefault(),r({event:t,node:a}))},e.setUncontrolledState=function(t){var a=!1,r={};Object.keys(t).forEach(function(d){d in e.props||(a=!0,r[d]=t[d])}),a&&e.setState(r)},e.registerTreeNode=function(t,a){a?e.domTreeNodes[t]=a:delete e.domTreeNodes[t]},e.isKeyChecked=function(t){var a=e.state.checkedKeys,r=a===void 0?[]:a;return r.indexOf(t)!==-1},e.renderTreeNode=function(t,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=e.state,n=d.keyEntities,l=d.expandedKeys,u=l===void 0?[]:l,c=d.selectedKeys,y=c===void 0?[]:c,v=d.halfCheckedKeys,m=v===void 0?[]:v,C=d.loadedKeys,g=C===void 0?[]:C,k=d.loadingKeys,K=k===void 0?[]:k,Z=d.dragOverNodeKey,S=d.dropPosition,L=he(r,a),M=t.key||L;return n[M]?b.cloneElement(t,{key:M,eventKey:M,expanded:u.indexOf(M)!==-1,selected:y.indexOf(M)!==-1,loaded:g.indexOf(M)!==-1,loading:K.indexOf(M)!==-1,checked:e.isKeyChecked(M),halfChecked:m.indexOf(M)!==-1,pos:L,dragOver:Z===M&&S===0,dragOverGapTop:Z===M&&S===-1,dragOverGapBottom:Z===M&&S===1}):(pe(),null)},e}return(0,_.Z)(h,[{key:"render",value:function(){var s=this,f=this.state.treeNode,o=this.props,t=o.prefixCls,a=o.className,r=o.focusable,d=o.style,n=o.showLine,l=o.tabIndex,u=l===void 0?0:l,c=o.selectable,y=o.showIcon,v=o.icon,m=o.switcherIcon,C=o.draggable,g=o.checkable,k=o.checkStrictly,K=o.disabled,Z=o.motion,S=o.loadData,L=o.filterTreeNode,M=Ke(this.props);return r&&(M.tabIndex=u),(0,x.jsx)(le.Provider,{value:{prefixCls:t,selectable:c,showIcon:y,icon:v,switcherIcon:m,draggable:C,checkable:g,checkStrictly:k,disabled:K,motion:Z,loadData:S,filterTreeNode:L,renderTreeNode:this.renderTreeNode,isKeyChecked:this.isKeyChecked,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop,registerTreeNode:this.registerTreeNode},children:(0,x.jsx)("ul",(0,D.Z)((0,D.Z)({},M),{},{className:w()(t,a,(0,P.Z)({},"".concat(t,"-show-line"),n)),style:d,role:"tree",unselectable:"on",children:me(f,function(H,V){return s.renderTreeNode(H,V)})}))})}}],[{key:"getDerivedStateFromProps",value:function(s,f){var o=f.prevProps,t={prevProps:s};function a(g){return!o&&g in s||o&&o[g]!==s[g]}var r=null;if(a("treeData")?r=Ce(s.treeData):a("children")&&(r=(0,W.default)(s.children)),r){t.treeNode=r;var d=ze(r);t.keyEntities=d.keyEntities}var n=t.keyEntities||f.keyEntities;if(a("expandedKeys")||o&&a("autoExpandParent")?t.expandedKeys=s.autoExpandParent||!o&&s.defaultExpandParent?Me(s.expandedKeys,n):s.expandedKeys:!o&&s.defaultExpandAll?t.expandedKeys=Object.keys(n):!o&&s.defaultExpandedKeys&&(t.expandedKeys=s.autoExpandParent||s.defaultExpandParent?Me(s.defaultExpandedKeys,n):s.defaultExpandedKeys),s.selectable&&(a("selectedKeys")?t.selectedKeys=xe(s.selectedKeys,s):!o&&s.defaultSelectedKeys&&(t.selectedKeys=xe(s.defaultSelectedKeys,s))),s.checkable){var l;if(a("checkedKeys")?l=ne(s.checkedKeys)||{}:!o&&s.defaultCheckedKeys?l=ne(s.defaultCheckedKeys)||{}:r&&(l=ne(s.checkedKeys)||{checkedKeys:f.checkedKeys,halfCheckedKeys:f.halfCheckedKeys}),l){var u=l,c=u.checkedKeys,y=c===void 0?[]:c,v=u.halfCheckedKeys,m=v===void 0?[]:v;if(!s.checkStrictly){var C=ke(y,!0,n);y=C.checkedKeys,m=C.halfCheckedKeys}t.checkedKeys=y,t.halfCheckedKeys=m}}return a("loadedKeys")&&(t.loadedKeys=s.loadedKeys),t}}]),h}(b.Component);De.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[]};var Ye=De,Ze=Ye;Ze.TreeNode=re;var Ve=Ze,se=function(){return{height:0,opacity:0}},Se=function(i){return{height:i.scrollHeight,opacity:1}},Je=function(i){return{height:i.offsetHeight}},Qe={motionName:"ant-motion-collapse",onAppearStart:se,onEnterStart:se,onAppearActive:Se,onEnterActive:Se,onLeaveStart:Je,onLeaveActive:se},Xe=Qe,be=N(16165),qe=N(46133),_e=N.n(qe),et=N(3361),tt=N.n(et),at=N(31929),z=N(83279),rt=["value","flatTreeData","onChange","readonly"],nt=function(i){var h=i.value,e=h===void 0?[]:h,s=i.flatTreeData,f=i.onChange,o=i.readonly,t=(0,B.Z)(i,rt);return(0,x.jsx)(oe,(0,D.Z)({checkable:!0,showIcon:!0,defaultCheckedKeys:e,checkedKeys:e,checkStrictly:!0,defaultExpandAll:!0,onCheck:function(r,d){var n=r.checked,l=d.node.props.eventKey;if(!(!l||!f||o)){var u=(s==null?void 0:s.filter(function(c){return c.key.startsWith(l)}).map(function(c){return c.key}))||[];if(d.checked){f((0,z.Z)(new Set([].concat((0,z.Z)(n),(0,z.Z)(u)))));return}if(!d.checked){f(n.filter(function(c){return!u.includes(c)}));return}}}},t))},oe=function(p){(0,ee.Z)(h,p);var i=(0,te.Z)(h);function h(){var e;(0,q.Z)(this,h);for(var s=arguments.length,f=new Array(s),o=0;o<s;o++)f[o]=arguments[o];return e=i.call.apply(i,[this].concat(f)),e.tree=void 0,e.renderSwitcherIcon=function(t,a,r){var d=r.isLeaf,n=r.expanded,l=r.loading,u=e.props.showLine;if(l)return(0,x.jsx)(be.Z,{type:"loading",className:"".concat(t,"-switcher-loading-icon")});if(d)return u?(0,x.jsx)(be.Z,{type:"file",className:"".concat(t,"-switcher-line-icon")}):null;var c="".concat(t,"-switcher-icon");return a?b.cloneElement(a,{className:w()(a.props.className||"",c)}):n?(0,x.jsx)(_e(),{className:c}):(0,x.jsx)(tt(),{className:c})},e.setTreeRef=function(t){e.tree=t},e.renderTree=function(t){var a,r=t.getPrefixCls,d=(0,T.Z)(e),n=d.props,l=n.prefixCls,u=n.className,c=n.showIcon,y=n.switcherIcon,v=n.blockNode,m=n.children,C=n.checkable,g="ant3-tree";return(0,x.jsx)(Ve,(0,D.Z)((0,D.Z)({ref:e.setTreeRef},n),{},{prefixCls:g,className:w()(u,(a={},(0,P.Z)(a,"".concat(g,"-icon-hide"),!c),(0,P.Z)(a,"".concat(g,"-block-node"),v),a)),checkable:C&&(0,x.jsx)("span",{className:"".concat(g,"-checkbox-inner")}),switcherIcon:function(K){return e.renderSwitcherIcon(g,y,K)},children:m}))},e}return(0,_.Z)(h,[{key:"render",value:function(){return(0,x.jsx)(at.ConfigConsumer,{children:this.renderTree})}}]),h}(b.Component);oe.TreeNode=re,oe.defaultProps={checkable:!1,showIcon:!1,motion:(0,D.Z)((0,D.Z)({},Xe),{},{motionAppear:!1}),blockNode:!1};var st=N(52125),ot=N(14361),O=N(21307),dt=["treeData","flatTreeData","readonly"];function it(p){for(var i=p.split(":"),h=[],e=0;e<i.length;e++)e>0?h.push("".concat(h[e-1],":").concat(i[e])):h.push(i[0]);return h}var Y={list:"1",detail:"2",create:"3",update:"4",delete:"5",import:"6",export:"7"},lt=function p(i,h){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"parentKey",s=i.filter(function(o){return o[e]===h}),f=s.filter(function(o){return Object.keys(Y).includes(o.key.toLowerCase().split(":").slice(-1)[0])}).length>0;return f&&s.sort(function(o,t){var a=Y[o.key.toLowerCase().split(":").slice(-1)[0]]||o,r=Y[t.key.toLowerCase().split(":").slice(-1)[0]]||t;return a>r?1:a<r?-1:0}),s.map(function(o){return(0,D.Z)((0,D.Z)({},o),{},{children:p(i,o.key)})})},ct=function(i){var h=i.treeData,e=i.flatTreeData,s=i.readonly,f=(0,B.Z)(i,dt);return(0,x.jsx)(O.ZP.Item,(0,D.Z)((0,D.Z)({},f),{},{children:(0,x.jsx)(nt,(0,D.Z)({treeData:h,flatTreeData:e},i.fieldProps))}))},ut=(0,ie.Pi)(function(p){var i=p.onOk,h=p.onClose,e=p.role,s=(0,b.useRef)(),f=!!(e!=null&&e.id),o=(0,G.YB)(),t=(0,I.m2)(),a=[];t.permissions.filter(function(n){return!n.code.startsWith("ROLE_")}).forEach(function(n){it(n.code).forEach(function(l,u,c){var y=n.name||o.formatMessage({id:"authority.".concat(l.replaceAll(":",".")),defaultMessage:l});if(!a.find(function(m){return m.key===l})){var v=Object.keys(Y).includes(l.toLowerCase().split(":").slice(-1)[0]);a.push({key:l,title:y,icon:v?(0,x.jsx)(st.Z,{}):(0,x.jsx)(ot.Z,{}),parentKey:c[u-1]})}})});var r=lt(a,void 0),d=["home","project","exercise","repo","answer","template","user","system"];return r=r.sort(function(n,l){return d.indexOf(n.key)-d.indexOf(l.key)}),(0,x.jsxs)(O.aN,{title:f?e!=null&&e.id?o.formatMessage({id:"pages.system.role.drawer.edit",defaultMessage:"\u4FEE\u6539\u89D2\u8272"}):o.formatMessage({id:"pages.system.role.drawer.create",defaultMessage:"\u65B0\u589E\u89D2\u8272"}):o.formatMessage({id:"pages.system.role.drawer.view",defaultMessage:"\u67E5\u770B\u89D2\u8272"}),formRef:s,open:!0,initialValues:e,drawerProps:{forceRender:!0,destroyOnClose:!0,onClose:function(){h()}},onFinish:function(){var n=(0,j.Z)((0,E.Z)().mark(function l(u){var c;return(0,E.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!((e==null?void 0:e.code)==="admin"&&u.code!=="admin")){v.next=3;break}return F.default.error(o.formatMessage({id:"pages.system.role.message.cannotChangeAdmin",defaultMessage:"\u9ED8\u8BA4\u7BA1\u7406\u5458\u89D2\u8272\u7F16\u7801\u4E0D\u80FD\u4FEE\u6539"})),v.abrupt("return");case 3:return v.next=5,t.saveOrUpdateRole((0,D.Z)((0,D.Z)({},e),u));case 5:c=v.sent,c.success&&i();case 7:case"end":return v.stop()}},l)}));return function(l){return n.apply(this,arguments)}}(),children:[(0,x.jsxs)(O.ZP.Group,{children:[(0,x.jsx)(O.V,{name:"name",width:"md",label:o.formatMessage({id:"pages.system.role.field.name.label",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),placeholder:o.formatMessage({id:"pages.system.role.field.name.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"}),required:!0,rules:[{required:!0,message:o.formatMessage({id:"pages.system.role.field.name.required",defaultMessage:"\u89D2\u8272\u540D\u4E0D\u80FD\u4E3A\u7A7A"})}]}),(0,x.jsx)(O.V,{width:"md",name:"code",label:o.formatMessage({id:"pages.system.role.field.code.label",defaultMessage:"\u89D2\u8272\u7F16\u7801"}),placeholder:o.formatMessage({id:"pages.system.role.field.code.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u7801"}),rules:[{required:!0,message:o.formatMessage({id:"pages.system.role.field.code.required",defaultMessage:"\u89D2\u8272\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A"})}],required:!0}),(0,x.jsx)(O._I,{width:"md",name:"status",label:o.formatMessage({id:"pages.system.role.field.status.label",defaultMessage:"\u72B6\u6001"}),rules:[{required:!0,message:o.formatMessage({id:"pages.system.role.field.status.required",defaultMessage:"\u8BF7\u9009\u62E9\u89D2\u8272\u72B6\u6001"})}],fieldProps:{options:[{label:o.formatMessage({id:"pages.system.role.field.status.active",defaultMessage:"\u6B63\u5E38"}),value:1},{label:o.formatMessage({id:"pages.system.role.field.status.inactive",defaultMessage:"\u505C\u7528"}),value:0}]},required:!0})]}),(0,x.jsx)(O.ZP.Group,{children:(0,x.jsx)(O.$J,{name:"remark",width:"xl",label:o.formatMessage({id:"pages.system.role.field.remark.label",defaultMessage:"\u63CF\u8FF0"}),placeholder:o.formatMessage({id:"pages.system.role.field.remark.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u89D2\u8272\u63CF\u8FF0\u4FE1\u606F"})})}),(0,x.jsx)(O.ZP.Group,{children:(0,x.jsx)(ct,{name:"authorities",label:o.formatMessage({id:"pages.system.role.field.authorities.label",defaultMessage:"\u89D2\u8272\u6388\u6743"}),treeData:r,flatTreeData:a})})]})}),Zt=N(57338),ft=N(273),St=N(62350),pt=N(24565),ht=N(37809),vt=N(96642),gt=function(i){var h=i.onClose,e=i.role,s=(0,b.useRef)(),f=(0,G.YB)(),o=(0,b.useState)([]),t=(0,U.Z)(o,2),a=t[0],r=t[1],d=[{title:f.formatMessage({id:"pages.system.common.column.dept",defaultMessage:"\u7EC4\u7EC7\u673A\u6784"}),dataIndex:"deptName",hideInSearch:!0,width:150},{title:f.formatMessage({id:"pages.system.common.column.name",defaultMessage:"\u59D3\u540D"}),dataIndex:"name",ellipsis:!0,width:120},{title:f.formatMessage({id:"pages.system.common.column.phone",defaultMessage:"\u624B\u673A"}),dataIndex:"phone",width:150,search:!1},{title:f.formatMessage({id:"pages.system.common.column.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",search:!1,width:100,valueEnum:{0:{text:f.formatMessage({id:"pages.system.common.status.inactive",defaultMessage:"\u5931\u6D3B"}),status:"Default"},1:{text:f.formatMessage({id:"pages.system.common.status.active",defaultMessage:"\u6FC0\u6D3B"}),status:"Processing"}}},{title:f.formatMessage({id:"pages.system.common.column.createdAt",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),key:"showTime",dataIndex:"createAt",width:150,valueType:"dateTime",hideInSearch:!0}];return(0,x.jsx)(Q.Z,{title:f.formatMessage({id:"pages.system.role.modal.selectUser.title",defaultMessage:"\u9009\u62E9\u7528\u6237"}),open:!0,width:950,onCancel:function(){return h()},okText:f.formatMessage({id:"pages.system.role.modal.selectUser.ok",defaultMessage:"\u6279\u91CF\u6DFB\u52A0"}),okButtonProps:{disabled:a.length===0},onOk:(0,j.Z)((0,E.Z)().mark(function n(){var l,u;return(0,E.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,I.hi.updateRole({id:e.id,userIds:a});case 2:if(l=y.sent,!l.success){y.next=9;break}return(u=s.current)===null||u===void 0||u.reload(),r([]),y.abrupt("return",!0);case 9:return F.default.error(l.message||f.formatMessage({id:"pages.system.role.message.addFail",defaultMessage:"\u6DFB\u52A0\u5931\u8D25"})),y.abrupt("return",!1);case 11:case"end":return y.stop()}},n)})),children:(0,x.jsx)(X.ZP,{columns:d,bordered:!0,actionRef:s,params:{neRoleId:e.id},request:function(){var n=(0,j.Z)((0,E.Z)().mark(function l(u){return(0,E.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",I.hi.loadUsers(u));case 1:case"end":return y.stop()}},l)}));return function(l){return n.apply(this,arguments)}}(),rowKey:"id",pagination:{defaultPageSize:10},rowSelection:{selectedRowKeys:a,onChange:function(l){r(l)}}})})},mt=function(i){var h=i.onClose,e=i.role,s=(0,b.useRef)(),f=(0,G.YB)(),o=(0,b.useState)([]),t=(0,U.Z)(o,2),a=t[0],r=t[1],d=(0,b.useState)(),n=(0,U.Z)(d,2),l=n[0],u=n[1],c=function(){var v=(0,j.Z)((0,E.Z)().mark(function m(){var C,g,k,K,Z,S=arguments;return(0,E.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:for(C=S.length,g=new Array(C),k=0;k<C;k++)g[k]=S[k];return M.next=3,I.hi.updateRole({id:e.id,evictUserIds:g});case 3:if(K=M.sent,!K.success){M.next=9;break}return(Z=s.current)===null||Z===void 0||Z.reload(),M.abrupt("return",!0);case 9:return F.default.error(K.message||f.formatMessage({id:"pages.system.role.message.revokeFail",defaultMessage:"\u53D6\u6D88\u5931\u8D25"})),M.abrupt("return",!1);case 11:case"end":return M.stop()}},m)}));return function(){return v.apply(this,arguments)}}(),y=[{title:f.formatMessage({id:"pages.system.common.column.dept",defaultMessage:"\u7EC4\u7EC7\u673A\u6784"}),dataIndex:"deptName",hideInSearch:!0,width:150},{title:f.formatMessage({id:"pages.system.common.column.name",defaultMessage:"\u59D3\u540D"}),dataIndex:"name",ellipsis:!0,width:120},{title:f.formatMessage({id:"pages.system.common.column.phone",defaultMessage:"\u624B\u673A"}),dataIndex:"phone",width:150,search:!1},{title:f.formatMessage({id:"pages.system.common.column.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",search:!1,width:100,valueEnum:{0:{text:f.formatMessage({id:"pages.system.common.status.inactive",defaultMessage:"\u5931\u6D3B"}),status:"Default"},1:{text:f.formatMessage({id:"pages.system.common.status.active",defaultMessage:"\u6FC0\u6D3B"}),status:"Processing"}}},{title:f.formatMessage({id:"pages.system.common.column.createdAt",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),key:"showTime",dataIndex:"createAt",width:180,hideInSearch:!0},{title:f.formatMessage({id:"pages.system.common.column.actions",defaultMessage:"\u64CD\u4F5C"}),valueType:"option",render:function(m,C){return[(0,x.jsx)(pt.Z,{title:f.formatMessage({id:"pages.system.role.popover.revoke",defaultMessage:"\u786E\u5B9A\u53D6\u6D88\u7528\u6237 {roleName} \u89D2\u8272\u5417\uFF1F"},{roleName:(0,x.jsx)("b",{children:e.name})}),onConfirm:(0,j.Z)((0,E.Z)().mark(function g(){return(0,E.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:c(C.id);case 1:case"end":return K.stop()}},g)})),children:(0,x.jsx)("a",{children:f.formatMessage({id:"pages.system.role.action.revoke",defaultMessage:"\u53D6\u6D88\u6388\u6743"})},"editable")})]}}];return(0,x.jsxs)(ft.Z,{title:f.formatMessage({id:"pages.system.role.drawer.assignUser",defaultMessage:"\u5206\u914D\u7528\u6237"}),onClose:h,open:!0,width:1e3,children:[(0,x.jsx)(X.ZP,{columns:y,bordered:!0,actionRef:s,params:{roleId:e.id},request:function(){var v=(0,j.Z)((0,E.Z)().mark(function m(C){return(0,E.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",I.hi.loadUsers(C));case 1:case"end":return k.stop()}},m)}));return function(m){return v.apply(this,arguments)}}(),rowKey:"id",pagination:{defaultPageSize:10},rowSelection:{selectedRowKeys:a,onChange:function(m){r(m)}},toolBarRender:function(){return[(0,x.jsx)(J.Z,{icon:(0,x.jsx)(ht.Z,{}),type:"primary",onClick:function(){u(!0)},children:f.formatMessage({id:"pages.system.role.action.addUser",defaultMessage:"\u6DFB\u52A0\u7528\u6237"})},"batchAdd"),(0,x.jsx)(J.Z,{danger:!0,disabled:a.length===0,icon:(0,x.jsx)(vt.Z,{}),type:"primary",onClick:(0,j.Z)((0,E.Z)().mark(function m(){return(0,E.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,c.apply(void 0,(0,z.Z)(a));case 2:r([]);case 3:case"end":return g.stop()}},m)})),children:f.formatMessage({id:"pages.system.role.action.batchRevoke",defaultMessage:"\u6279\u91CF\u53D6\u6D88\u6388\u6743"})},"batchCancel")]}}),l&&(0,x.jsx)(gt,{role:e,onClose:function(){var m;u(!1),(m=s.current)===null||m===void 0||m.reload()}})]})},yt=(0,ie.Pi)(function(){var p=(0,I.m2)(),i=(0,b.useRef)(),h=(0,b.useState)(),e=(0,U.Z)(h,2),s=e[0],f=e[1],o=(0,b.useState)(),t=(0,U.Z)(o,2),a=t[0],r=t[1],d=(0,G.YB)();(0,b.useEffect)(function(){p.loadPermissions()},[p]);var n=[{title:d.formatMessage({id:"pages.system.role.column.name",defaultMessage:"\u89D2\u8272\u540D\u79F0"}),dataIndex:"name",ellipsis:!0,width:150},{title:d.formatMessage({id:"pages.system.role.column.code",defaultMessage:"\u7F16\u7801"}),dataIndex:"code",hideInSearch:!0,width:150},{title:d.formatMessage({id:"pages.system.role.column.remark",defaultMessage:"\u63CF\u8FF0"}),dataIndex:"remark",search:!1},{title:d.formatMessage({id:"pages.system.role.column.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",search:!1,renderText:function(u,c,y,v){return(0,x.jsx)(Ee.Z,{checked:u===1,onChange:function(C){I.hi.updateRole({id:c.id,status:C?1:0}).then(function(g){if(g.success){var k;(k=i.current)===null||k===void 0||k.reload()}})}})}},{title:d.formatMessage({id:"pages.system.role.column.createdAt",defaultMessage:"\u521B\u5EFA\u65F6\u95F4"}),key:"showTime",dataIndex:"createAt",valueType:"dateTime",hideInSearch:!0,width:200},{title:d.formatMessage({id:"pages.system.role.column.actions",defaultMessage:"\u64CD\u4F5C"}),valueType:"option",width:200,render:function(u,c){return[(0,x.jsx)("a",{onClick:function(){r({current:c,visible:!0})},children:d.formatMessage({id:"pages.common.edit",defaultMessage:"\u7F16\u8F91"})},"edit"),(0,x.jsx)(Oe.Z,{onSelect:function(v){if(v==="delete"){if(c.id==="1"){Q.Z.info({title:d.formatMessage({id:"pages.system.role.modal.info.title",defaultMessage:"\u63D0\u793A"}),content:d.formatMessage({id:"pages.system.role.modal.info.content",defaultMessage:"\u5185\u7F6E\u89D2\u8272\u4E0D\u80FD\u5220\u9664"}),okText:d.formatMessage({id:"pages.common.ok",defaultMessage:"\u786E\u5B9A"})});return}Q.Z.confirm({title:d.formatMessage({id:"pages.system.role.modal.delete.title",defaultMessage:"\u5220\u9664"}),content:d.formatMessage({id:"pages.system.role.modal.delete.content",defaultMessage:"\u786E\u5B9A\u5220\u9664\u5F53\u524D\u89D2\u8272?"}),icon:(0,x.jsx)(Te.Z,{}),okText:d.formatMessage({id:"pages.common.delete",defaultMessage:"\u5220\u9664"}),cancelText:d.formatMessage({id:"pages.common.cancel",defaultMessage:"\u53D6\u6D88"}),onOk:function(){p.deleteRole(c.id).then(function(C){if(C.success){var g;F.default.success(d.formatMessage({id:"pages.system.role.message.deleteSuccess",defaultMessage:"\u5220\u9664\u6210\u529F"})),(g=i.current)===null||g===void 0||g.reload()}})}})}else v==="roleUser"&&f(c)},menus:c.code==="admin"?[{key:"roleUser",name:d.formatMessage({id:"pages.system.role.action.assignUser",defaultMessage:"\u5206\u914D\u7528\u6237"})}]:[{key:"roleUser",name:d.formatMessage({id:"pages.system.role.action.assignUser",defaultMessage:"\u5206\u914D\u7528\u6237"})},{key:"delete",name:d.formatMessage({id:"pages.common.delete",defaultMessage:"\u5220\u9664"})}]},"actionGroup")]}}];return(0,x.jsxs)(we._z,{title:!1,children:[(0,x.jsx)(X.ZP,{columns:n,bordered:!0,actionRef:i,dataSource:p.roles,request:function(){var l=(0,j.Z)((0,E.Z)().mark(function u(c){return(0,E.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",p.loadRoles(c));case 1:case"end":return v.stop()}},u)}));return function(u){return l.apply(this,arguments)}}(),scroll:{x:800},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage"},rowKey:"id",search:{labelWidth:"auto"},pagination:{defaultPageSize:5},dateFormatter:"string",headerTitle:d.formatMessage({id:"pages.system.role.header",defaultMessage:"\u7CFB\u7EDF\u89D2\u8272\u5217\u8868"}),toolBarRender:function(){return[(0,x.jsx)(J.Z,{icon:(0,x.jsx)(Pe.Z,{}),type:"primary",onClick:function(){r({visible:!0})},children:d.formatMessage({id:"pages.system.role.toolbar.new",defaultMessage:"\u65B0\u5EFA"})},"button")]}}),(a==null?void 0:a.visible)&&(0,x.jsx)(ut,{onClose:function(){r(void 0)},onOk:function(){var u;r(void 0),(u=i.current)===null||u===void 0||u.reload()},role:a.current}),s&&(0,x.jsx)(mt,{role:s,onClose:function(){return f(void 0)}})]})}),xt=yt}}]);
